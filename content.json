{"meta":{"title":"å°å´ã®åšå®¢","subtitle":"é«˜å†·ç™½ç¾Š","description":"æˆ‘çš„åšå®¢","author":"Snowman","url":"https://snowman12137.github.io","root":"/"},"pages":[{"title":"about","date":"2023-04-16T12:45:28.000Z","updated":"2023-04-16T12:46:28.171Z","comments":true,"path":"about/index.html","permalink":"https://snowman12137.github.io/about/index.html","excerpt":"","text":"å…³äºæˆ‘è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•"},{"title":"","date":"2023-04-16T12:47:01.000Z","updated":"2024-02-03T17:23:39.226Z","comments":true,"path":"tags/index.html","permalink":"https://snowman12137.github.io/tags/index.html","excerpt":"","text":""},{"title":"","date":"2023-04-16T12:47:12.000Z","updated":"2024-02-03T17:22:50.822Z","comments":true,"path":"categories/index.html","permalink":"https://snowman12137.github.io/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"metaGEMä½¿ç”¨å°è®°(è§£å†³å„ç§é—®é¢˜)2024.2(ä¸‰)","slug":"metaGEMä½¿ç”¨å°è®°-è§£å†³å„ç§é—®é¢˜-2024-2ï¼ˆä¸‰ï¼‰","date":"2024-02-13T16:00:00.000Z","updated":"2024-02-17T15:47:26.549Z","comments":true,"path":"2024/02/14/metaGEMä½¿ç”¨å°è®°-è§£å†³å„ç§é—®é¢˜-2024-2ï¼ˆä¸‰ï¼‰/","link":"","permalink":"https://snowman12137.github.io/2024/02/14/metaGEM%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%AE%B0-%E8%A7%A3%E5%86%B3%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98-2024-2%EF%BC%88%E4%B8%89%EF%BC%89/","excerpt":"","text":"metaGEMä½¿ç”¨å°è®°(è§£å†³å„ç§é—®é¢˜)2024.2ï¼ˆä¸‰ï¼‰æ­£å¼æµç¨‹è¿™æ˜¯åŸå§‹æ–‡ä»¶å¤¹çœç•¥äº†è¿™äº›æ–‡ä»¶çš„å†…å®¹ï¼Œtree -I &#39;scripts|rules|envs&#39; 12345678910111213.â”œâ”€â”€ config.yamlâ”œâ”€â”€ datasetâ”‚ â”œâ”€â”€ L1EFG190305--AM43â”‚ â”‚ â”œâ”€â”€ L1EFG190305--AM43_R1.fastq.gzâ”‚ â”‚ â””â”€â”€ L1EFG190305--AM43_R2.fastq.gzâ”‚ â””â”€â”€ L1EFG190306--AM51â”‚ â”œâ”€â”€ L1EFG190306--AM51_R1.fastq.gzâ”‚ â””â”€â”€ L1EFG190306--AM51_R2.fastq.gzâ”œâ”€â”€ logsâ”œâ”€â”€ metaGEM.shâ”œâ”€â”€ Snakefileâ”œâ”€â”€ temp 1.ä½¿ç”¨fastpè´¨é‡è¿‡æ»¤readsæ¯ä¸ªæ ·æœ¬æäº¤ä¸€ä¸ªè´¨é‡è¿‡æ»¤å·¥ä½œï¼Œæ¯ä¸ªè¿‡æ»¤å·¥ä½œæœ‰2ä¸ªCPUå’Œ20GB å†…å­˜ï¼Œæœ€å¤§è¿è¡Œæ—¶é—´ä¸º2å°æ—¶ 123bash metaGEM.sh -t fastp -j 2 -c 2 -m 20 -h 2 #è¿è¡Œä¸»è¦ç¨‹åº(ä¸è¦å¿˜äº†source)#å¯è§†åŒ–è´¨é‡ç­›é€‰ç»“æœï¼šbash metaGEM.sh -t qfilterVis 2.ç”¨ Megahit ç»„è£…æ¯ä¸ªæ ·å“æäº¤ä¸€ä¸ªç»„è£…ä½œä¸šï¼Œæ¯ä¸ªç»„è£…ä½œä¸šæœ‰24ä¸ªCPUå’Œ120GB å†…å­˜ï¼Œæœ€å¤§è¿è¡Œæ—¶é—´ä¸º24å°æ—¶: 123bash metaGEM.sh -t megahit -j 2 -c 24 -m 120 -h 24#å¯è§†åŒ–ç»„è£…ç»“æœbash metaGEM.sh -t assemblyVis 3. ä½¿ç”¨ CONCOCTã€ MaxBin2å’Œ MetaBAT2åˆ†ç®±ä½¿ç”¨ bwa å’Œ samtoolsï¼Œå°†æ¯ç»„æˆå¯¹çš„æœ«ç«¯è¯»æ•°ä¸æ¯ç»„ç»„è£…çš„ç»„åˆè¿›è¡Œäº¤å‰æ˜ å°„ï¼Œä»¥è·å¾—æ ·å“é—´ç»„åˆçš„ä¸°åº¦&#x2F;è¦†ç›–ç‡ã€‚æ¯ä¸ªæ ·æœ¬æäº¤ä¸€ä¸ªä½œä¸šï¼Œæ¯ä¸ªä½œä¸šæœ‰24ä¸ªCPUå’Œ120GB å†…å­˜ï¼Œæœ€å¤§è¿è¡Œæ—¶é—´ä¸º24å°æ—¶: 1bash metaGEM.sh -t crossMapSeries -j 2 -c 24 -m 120 -h 24 æ³¨æ„è¿™é‡Œå¦‚æœæŠ¥é”™æ‰¾ä¸åˆ°XXX.pyæ˜¯æ²¡æœ‰å®‰è£…CONCOCTéœ€è¦æ‰‹åŠ¨å®‰è£…ï¼ˆå¥½åƒåé¢è¿˜ç¼ºäº†ä»€ä¹ˆæ–‡ä»¶å…ˆä¸ç®¡å®ƒï¼‰ 1234wget https://github.com/BinPro/CONCOCT/archive/refs/tags/1.1.0.tar.gztar -zxvf 1.1.0.tar.gzcd 1.1.0.tar.gzpython setup.py install å¦‚æœå®‰è£…æ—¶ æŠ¥é”™gsl&#x2F;gsl_vector.h: No such file or directory ç§»æ­¥è¿™é‡Œ æˆ–è€…å¿«æ·è§£å†³conda install anaconda::gsl åé¢è¿˜è®©æˆ‘è£…äº†pandaså’Œpyarrow(å¥‡æ€ª) 1conda install anaconda::pandas anaconda::pyarrow -y æ³¨æ„: æ—§çš„ rule CrosMap è¢«åˆ†æˆäº† CrosMapSeries å’Œ rosMapParaller ä¸¤éƒ¨åˆ†ã€‚è¿è¡Œåºåˆ—æ˜ å°„æ›´åŠ ç®€å•ï¼Œä½†æ˜¯ä»è®¡ç®—èµ„æºçš„è§’åº¦æ¥çœ‹ï¼Œå¯¹äºæœ‰å¤§é‡æ ·æœ¬çš„æ•°æ®é›†ï¼Œä¾‹å¦‚ N &#x3D; 1000ï¼Œè¿è¡Œæ˜ å°„çš„ä»£ä»·å¯èƒ½ä¼šé«˜å¾—ä»¤äººæœ›è€Œå´æ­¥ã€‚åœ¨æ ·æœ¬ä¹‹é—´è¿è¡Œæ¯ä¸ªbinnersï¼Œä½¿ç”¨è¿ç»­è¦†ç›–ç‡: 123bash metaGEM.sh -t concoct -j 2 -c 24 -m 80 -h 10bash metaGEM.sh -t metabat -j 2 -c 24 -m 80 -h 10bash metaGEM.sh -t maxbin -j 2 -c 24 -m 80 -h 10 4.ä½¿ç”¨metWRAPæ”¹è¿›å’Œé‡æ–°ç»„è£…ä¼˜åŒ–å’Œé‡ç»„bins 1bash metaGEM.sh -t binRefine -j 2 -c 24 -m 150 -h 24 æŠ¥é”™1(concoct)ï¼šTypeError: Feature names are only supported if all input features have string names, but your input has [â€˜intâ€™, â€˜strâ€™] as feature name &#x2F; column name types. If you want feature names to be stored and validated, you must convert them all to strings, by using X.columns &#x3D; X.columns.astype(str) for example. Otherwise you can remove feature &#x2F; column names from your input data, or convert them all to a non-string data type. æ ¹æ®æŠ¥é”™æ‰¾åˆ°å…³é”®è¯­å¥ 1concoct --coverage_file $(basename /home/gc/metaGEM/workflow/concoct/L1EFG190305--AM43/cov/coverage_table.tsv) --composition_file assembly_c10k.fa -b $(basename $(dirname /home/gc/metaGEM/workflow/concoct/L1EFG190305--AM43/L1EFG190305--AM43.concoct-bins)) -t 48 -c 800 æ‰¾åˆ°äº†ç›¸å…³è§£å†³æ–¹æ¡ˆ æ‰¾åˆ°/envs/metagem/lib/python3.10/site-packages/sklearn/utils/validation.py æ–‡ä»¶ ä¿®æ”¹è¯­å¥ 1feature_names = np.asarray(X.columns, dtype=object) æŠŠè¿™ä¸ªè¯­å¥æ³¨é‡Šæ‰ç„¶åæ·»åŠ  1feature_names = np.asarray(X.columns.astype(str), dtype=object) æŠ¥é”™2(maxbin2)ï¼š&#x2F;usr&#x2F;bin&#x2F;bash: line 28: run_MaxBin.pl: command not found åŸå› æ²¡æœ‰å®‰è£…maxbin ä¸‹è½½ https://sourceforge.net/projects/maxbin/files/ 1234567wget https://sourceforge.net/projects/maxbin/files/MaxBin-2.2.7.tar.gztar -zxvf MaxBin-2.2.7.tar.gzcd MaxBin-2.2.7/srcmakecd ..apt-get install autoconf./autobuild_auxiliary åœ¨æœ€åä¸€æ­¥æŠ¥é”™Cannot unzip bowtie2 zip file. Please make sure that [unzip] works properly. åŸå› ï¼šå®‰è£…æºä¸‹è½½ç½‘é€Ÿè¿‡æ…¢å¯¼è‡´æ— æ³•è¿è¡Œ ä¿®æ­£æ–¹æ³•ï¼šæ‰¾åˆ°.&#x2F;MaxBin-2.2.7&#x2F;buildappæ–‡ä»¶ï¼Œæ‰¾åˆ°è¿™ä¸€è¡Œ 1$cmd = &quot;curl -L $URLBASE/$bowtie_f -k 1&gt;$bowtie_f &quot;; æ³¨é‡Šæ‰å¹¶æ”¹æˆä¸€ä¸‹å†…å®¹ï¼Œæ³¨æ„åé¢æœ‰åˆ†å·ä¸è¦å¿˜äº† 12#$cmd = &quot;curl -L $URLBASE/$bowtie_f -k 1&gt;$bowtie_f &quot;;$cmd = &quot;wget https://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.2.3/bowtie2-2.2.3-source.zip&quot; ä¸è¦å¿˜äº†æŠŠæ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹åŠ å…¥ç¯å¢ƒå˜é‡ 1export PATH=&quot;/home/gc/MaxBin-2.2.7:$PATH&quot; åœ¨è¾“å…¥ä¸‹åˆ—è¯­å¥ä¹‹å‰ä¸€å®šè¦å…ˆè¿›å…¥åˆ°metawrap ç¯å¢ƒç„¶åé…ç½®ä¸‹é¢çš„åŠŸèƒ½ 123conda activate envs/metawrap checkm_db=&quot;/home/ubuntu/checkm/&quot;echo $&#123;checkm_db&#125; | checkm data setRoot $&#123;checkm_db&#125; å¦‚æœä¸é…ç½®å¥½ä¼šå¾—åˆ°ä»¥ä¸‹æŠ¥é”™ 12It seems that the CheckM data folder has not been set yet or has been removed. Running: &#x27;checkm data setRoot&#x27;.Where should CheckM store it&#x27;s data? ç„¶åè¾“å…¥è¿è¡Œç¨‹åº 1bash metaGEM.sh -t binReassemble -j 2 -c 24 -m 150 -h 24 æŠ¥é”™IOError: [Errno 2] No such file or directory: uâ€™&#x2F;home&#x2F;gc&#x2F;checkm&#x2F;hmms&#x2F;phylo.hmmâ€™æˆ–è€…It seems that the CheckM data folder has not been set yet or has been removed. Running: â€˜checkm data setRootâ€™.Where should CheckM store itâ€™s data? 1234567#å…ˆä¸‹è½½ç¼ºå¤±çš„æ–‡ä»¶cd ~wget https://data.ace.uq.edu.au/public/CheckM_databases/checkm_data_2015_01_16.tar.gzmkdir checkmtar -zxvf checkm_data_2015_01_16.tar.gz -C ./checkmcheckm_db=&quot;/home/gc/checkm/&quot;echo $&#123;checkm_db&#125; | checkm data setRoot $&#123;checkm_db&#125; ç»ˆäºåœ¨æœ¬åœ°è°ƒè¯•ä¸­å‘ç°äº†æŠ¥é”™ è§£å†³ 123æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶çš„è¿™ä¸€è¡ŒFile &quot;/home/gc/metaGEM/workflow/envs/metawrap/share/spades-3.13.0-0/share/spades/pyyaml3/constructor.py&quot;, line 126, in construct_mappingæ‰¾åˆ°ä»£ç  if not isinstance(key, collections.Hashable):æ”¹æˆè¿™æ · if not isinstance(key, collections.abc.Hashable) å¯è§†åŒ–è¾“å‡º 1bash metaGEM.sh -t binningVis æŠ¥é”™*/*reassembled_bins/*.fa: No such file or directoryçœ‹reassembled_binsæ–‡ä»¶å¤¹é‡Œé¢ç¡®å®æ²¡æœ‰faç»“å°¾çš„æ–‡ä»¶ï¼Œè¿™ä¸ªå˜¶~ï¼ŒæŠ¥é”™æ— ä»æŸ¥èµ·ã€‚é‚£å°±å†è·‘ä¸€ébash metaGEM.sh -t binReassemble -j 2 -c 24 -m 150 -h 24è¿™ä¸ªå‘½ä»¤å§ã€‚ å¯ä»¥çœ‹åˆ°åœ¨ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶ä¸­æ˜¯æœ‰.faç»“å°¾çš„æ–‡ä»¶çš„ï¼Œè€Œä¸”è¿˜ä¸å°‘ï¼Œå› æ­¤æˆ‘ä»¬ç›‘æ§ä¸€ä¸‹åœ¨å¤„ç†æ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚ å› ä¸ºä¸Šæ¬¡è¿è¡Œçš„æ—¶å€™æœ‰ä¸­æ–­è¡Œä¸ºï¼Œå› æ­¤é‡æ–°è¿è¡Œä¸€éå°±å¥½äº† 5ç”¨ GTDB-tk è¿›è¡Œåˆ†ç±»é¦–å…ˆè®©æˆ‘ä»¬ä» metWRAP é‡ç»„è¾“å‡ºä¸­æå–æˆ‘ä»¬çš„ DNA bins: 1bash metaGEM.sh -t extractDnaBins è¿è¡Œ GTDB-tk è¿›è¡Œåˆ†ç±»å­¦åˆ†ç±»: 1bash metaGEM.sh -t gtdbtk -j 2 -c 24 -m 80 -h 12 åœ¨è®¡ç®—ç›¸å¯¹ä¸°åº¦ä¹‹åï¼Œæˆ‘ä»¬å°†å¯è§†åŒ–åˆ†ç±»æ³¨é‡Šã€‚ æŠ¥é”™ï¼Œæ²¡æœ‰æ•°æ®åº“12345678910conda uninstall gtdbtkconda install -c conda-forge -c bioconda gtdbtk -ydownload-db.sh#æ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸgtdbtk check_install#å¦‚æœæŠ¥é”™The GTDB-Tk reference data does not exist or is corrupted#åˆ™åœ¨Snakefileçš„1204è¡Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œå¹¶å»æ‰æ³¨é‡Š#å®‰è£…çš„æ•°æ®åº“åœ¨ä»¥ä¸‹è·¯å¾„gcä¸ºä½ ç”µè„‘çš„åå­—/home/gc/metaGEM/workflow/envs/metagem/share/gtdbtk-1.7.0/dbexport GTDBTK_DATA_PATH=/home/gc/metaGEM/workflow/envs/metagem/share/gtdbtk-1.7.0/db æŠ¥é”™prodigal is not on the system path.å®‰è£…prodigal 12345wget https://github.com/hyattpd/Prodigal/releases/download/v2.6.3/prodigal.linuxwget https://github.com/hyattpd/Prodigal/archive/v2.6.3.tar.gztar -zxvf v2.6.3.tar.gzcd Prodigal-2.6.3sudo make install æŠ¥é”™hmmalign is not on the system path.åé¢è¿˜æœ‰ä¸€äº›æ²¡æœ‰å®‰è£…ä¸€å—å®‰è£…äº† 12345sudo apt install hmmerconda install -c bioconda pplacer#å¦‚æœä¾èµ–æŠ¥é”™åˆ™æ›´æ”¹ä¸‹åˆ—è¯­å¥#conda install python=3.6 #å®‰è£…fastANIéœ€è¦python3.6è¿™é‡Œé™ä¸€ä¸‹ç‰ˆæœ¬conda install -c conda-forge -c bioconda r-base=4 fastani æŠ¥é”™fastANI: error while loading shared libraries: libgsl.so.25 ç»è¿‡ç ”ç©¶å‘ç°fastANIå¦‚æœé€šè¿‡condaå®‰è£…çš„è¯ä¼šæŠ¥å¾ˆå¤šç¯å¢ƒä¾èµ–çš„é—®é¢˜ï¼Œå› ä¸ºåœ¨å…ˆå‰ä½¿ç”¨çš„æ˜¯python3.10ï¼Œç½‘ä¸Šæœ‰äººè¯´ç”¨python3.6æ‰å¯ä»¥å®‰è£…ï¼Œäºæ˜¯æˆ‘é€€å›3.6å‘ç°ä¾æ—§æ˜¯æœ‰ä¾èµ–é—®é¢˜æ— æ³•å®‰è£…ï¼Œäºæ˜¯æˆ‘å¯»æ±‚äº†æ‰‹åŠ¨ç¼–è¯‘å®‰è£…çš„æ–¹æ³•ï¼Œå¦‚æœæœ‰äººconda install -c bioconda fastani ä½¿ç”¨äº†ä¸Šè¿°è¯­å¥æˆåŠŸå®‰è£…ï¼Œåˆ™ä¸éœ€è¦ç»è¿‡ä»¥ä¸‹é€”å¾„å®‰è£…ã€‚ å®‰è£…fastANIéœ€è¦gslä¾èµ–ï¼Œåœ¨åé¢çš„å®‰è£…ä¸­åˆå‡ºç°äº†zlibåº“ç¼ºå¤±çš„æƒ…å†µï¼Œæˆ‘åœ¨è¿™é‡Œå°±ä¸€å—å®‰è£…äº† fastANIæ•™ç¨‹æ¥è‡ª å¥‡æ€ªçš„æ˜¯.so.25æŒ‰é“ç†æ¥è¯´åº”è¯¥ç”¨2.5ç‰ˆæœ¬çš„ï¼Œä½†æ˜¯2.5ç‰ˆæœ¬ç¼–è¯‘ä»¥åå‡ºæ¥çš„æ˜¯.so.23ï¼Œä¸‹é¢æœ‰ä¸€ä¸ªæµ‹è¯•è„šæœ¬,å¹¶æ— æ³•è¿è¡Œï¼ŒçŒœæµ‹åº”è¯¥æ˜¯è¦ç”¨.so.25çš„æ–‡ä»¶ï¼Œäºæ˜¯æˆ‘åˆå®‰è£…äº†gsl2.7ï¼Œå®‰è£…åå‡ºç°äº†.so.25æ–‡ä»¶ï¼Œå¹¶ä¸”ç¼–è¯‘æ²¡æœ‰å‡ºç°é—®é¢˜(æ€ª) å…ˆå®‰è£…gslå’Œzlibå†å®‰è£…fastani 123456789101112131415161718192021222324252627282930313233343536#å®‰è£…gslwget https://ftp.gnu.org/gnu/gsl/gsl-2.7.tar.gztar -zxvf gsl-2.7.tar.gzcd gsl-2.7./configuremakesudo make installvim /home/username/.bashrch#åœ¨æœ«å°¾æ·»åŠ export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/libexport CFLAGS=&quot;-I/usr/local/include&quot;export LDFLAGS=&quot;-L/usr/local/lib&quot;#(éªŒè¯)gslæ˜¯å¦å®‰è£…æˆåŠŸä½¿ç”¨åé¢çš„æµ‹è¯•è„šæœ¬#å®‰è£…zlibwget https://www.zlib.net/zlib-1.3.1.tar.gztar -zxvf zlib-1.3.1.tar.gz cd zlib-1.3.1./configuremakemake checksudo make install#zlibçš„éªŒè¯ zlibæä¾›äº†æµ‹è¯•æ ·ä¾‹ï¼Œåœ¨examplesé‡Œé¢cd zlib-1.3.1/examplesgcc -c enough.cgcc enough.o./a.out #æˆåŠŸè¿è¡Œæˆªå›¾åœ¨åé¢#å®‰è£…fastaniwget https://github.com/ParBLiSS/FastANI/archive/master.zipunzip master.zipcd FastANI-master/autoconf./configure #--with-gsl=/usr/ å› ä¸ºæˆ‘ä»¬å·²ç»æŠŠgslåŠ å…¥åˆ°ç¯å¢ƒå˜é‡é‡Œå»äº†ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬æŠŠåé¢çš„è¯­å¥æ³¨é‡Šæ‰make#éªŒè¯fastaniæ˜¯å¦å®‰è£…æˆåŠŸfastANI#è¿”å›Provide reference file (s) æµ‹è¯•è„šæœ¬ 123456789101112//test.c#include &lt;stdio.h&gt;#include &lt;gsl/gsl_sf_bessel.h&gt; intmain (void)&#123; double x = 5.0; double y = gsl_sf_bessel_J0 (x); printf (&quot;J0(%g) = %.18e/n&quot;, x, y); return 0;&#125; 123gcc -c test.cgcc test.o -lgsl -lgslcblas -lm./a.out zlibçš„éªŒè¯ 6 bwa å’Œ samtools è®¡ç®—ç›¸å¯¹ä¸°åº¦1bash metaGEM.sh -t abundance -j 2 -c 24 -m 80 -h 12 å¯è§†åŒ–åˆ†ç±»å’Œç›¸å¯¹ä¸°å¯Œåº¦: 1bash metaGEM.sh -t compositionVis æŠ¥é”™Error in library(tidytext) : there is no package called â€˜tidytextâ€™å‘ç°è¿™ä¸ªtidytextæ˜¯ä¸€ä¸ªRåŒ…ï¼Œå®‰è£…RåŒ…ç¯å¢ƒ å…ˆå®‰è£…RåŒ…ç¯å¢ƒ 1234567wget https://cran.r-project.org/src/base/R-4/R-4.3.2.tar.gztar -zxvf R-4.3.2.tar.gzcd R-4.3.2#! ç¼–è¯‘ï¼ŒæŒ‡å®šå®‰è£…ç›®å½•./configure --prefix=&#x27;/home/gc/R/R-4.2.2/&#x27; --enable-R-shlib=yes --with-readline=yes --with-libpng=yes --with-x=yes --with-blas --with-tcltk --with-pcrel#! å®‰è£…make&amp;&amp;make install åœ¨å®‰è£…å…¶ä¸­çš„ä¾èµ– 123R#è¿›å…¥Rç¯å¢ƒç„¶åè¾“å…¥ä¸‹åˆ—è¯­å¥install.packages(c(&quot;mnormt&quot;, &quot;psych&quot;, &quot;SnowballC&quot;, &quot;hunspell&quot;, &quot;broom&quot;, &quot;tokenizers&quot;, &quot;janeaustenr&quot;))install.packages(&quot;tidytext&quot;) ä»¥ä¸‹æ˜¯æ–‡ä»¶æ ‘ 1tree -I &#x27;env|.snakemake|temp&#x27; &gt; file-tree.txt","categories":[{"name":"MAGsäº‘åˆ†æ","slug":"MAGsäº‘åˆ†æ","permalink":"https://snowman12137.github.io/categories/MAGs%E4%BA%91%E5%88%86%E6%9E%90/"},{"name":"ç”Ÿç‰©è®¡ç®—æœºç§‘å­¦","slug":"MAGsäº‘åˆ†æ/ç”Ÿç‰©è®¡ç®—æœºç§‘å­¦","permalink":"https://snowman12137.github.io/categories/MAGs%E4%BA%91%E5%88%86%E6%9E%90/%E7%94%9F%E7%89%A9%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/"}],"tags":[{"name":"metaGEM","slug":"metaGEM","permalink":"https://snowman12137.github.io/tags/metaGEM/"}],"author":"Sn0wma1n"},{"title":"å¦‚ä½•è®©è‡ªå·±çš„ç½‘ç«™è¢«æœç´¢åˆ°","slug":"å¦‚ä½•è®©è‡ªå·±çš„ç½‘ç«™è¢«æœç´¢åˆ°-d747f3b050f940cc990c4249dc251430","date":"2024-02-04T16:00:00.000Z","updated":"2024-02-06T18:24:56.056Z","comments":true,"path":"2024/02/05/å¦‚ä½•è®©è‡ªå·±çš„ç½‘ç«™è¢«æœç´¢åˆ°-d747f3b050f940cc990c4249dc251430/","link":"","permalink":"https://snowman12137.github.io/2024/02/05/%E5%A6%82%E4%BD%95%E8%AE%A9%E8%87%AA%E5%B7%B1%E7%9A%84%E7%BD%91%E7%AB%99%E8%A2%AB%E6%90%9C%E7%B4%A2%E5%88%B0-d747f3b050f940cc990c4249dc251430/","excerpt":"","text":"å¦‚ä½•è®©è‡ªå·±çš„ç½‘ç«™è¢«æœç´¢åˆ° åœ¨æœ‰äº†ä¸ªäººç½‘ç«™ä»¥åï¼Œæ€»å¸Œæœ›æ›´å¤šçš„äººæ¥è¸©ä¸€è¸©çœ‹ä¸€çœ‹ã€‚ä¹Ÿå¸Œæœ›è‡ªå·±å†™çš„åšå®¢èƒ½å¤ŸçœŸçš„åˆ†äº«è¢«åˆ«äººæœç´¢åˆ°ï¼Œè¾¾åˆ°åšå®¢åº”æœ‰çš„åˆ†äº«åŠŸèƒ½ã€‚ä½†æ˜¯äº†è§£ä»¥åæ‰å‘ç°ï¼šç½‘ç«™èƒ½å¤Ÿè¢«æœç´¢å¼•æ“æœç´¢åˆ°éœ€è¦è‡ªå·±çš„ç½‘ç«™è¢«æœç´¢å¼•æ“æ”¶å½•ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œèƒ½è¢«æœç´¢å¼•æ“æ‰€æ”¶å½•æœ‰ä¸‰ç§é€”å¾„ï¼š äº¤é’±ï¼šä¸€æ¬¡ç‚¹å‡» $0.05 USDï¼Œ é€‚ç”¨äºå•†ä¸šæ¨å¹¿ï¼Œå¹¶ä¼šç°å®åœ¨å³æ ï¼ˆå¹¿å‘Šæ ï¼‰ã€‚ ç½‘ç«™æœ¬èº«çŸ¥ååº¦é«˜ï¼Œå½±å“åŠ›é«˜ï¼šGoogle å¯¹æœç´¢ç»“æœçš„æ’åç›®å‰ä½¿ç”¨page rankç®—æ³•ï¼Œç®€å•æ¥è¯´è¶Šå¤šå½±å“åŠ›å¤§çš„çŸ¥åç½‘ç«™èƒ½å¤Ÿå¯¼å‘ä½ çš„ç½‘ç«™ï¼Œä½ çš„ç½‘ç«™çš„å¾—åˆ†å°±è¶Šé«˜ï¼Œå°±ä¼šæ’åœ¨å‰é¢ã€‚å¦‚æœä½ çš„ç½‘ç«™çš„å½±å“åŠ›å·²ç»å¾ˆå¤§ï¼Œæœç´¢å¼•æ“ä¼šä¸»åŠ¨å»æ·»åŠ ç´¢å¼•ã€‚ ç”³è¯·ï¼šè‡ªå·±ä¸»åŠ¨å‘æœç´¢å¼•æ“æ·»åŠ è‡ªå·±çš„é“¾æ¥ï¼Œè¯·æ±‚æœç´¢å¼•æ“ä½¿ç”¨çˆ¬è™«æ£€ç´¢ä½ çš„ç½‘ç«™ã€‚ æ­¥éª¤ æŸ¥çœ‹ç½‘ç«™æ˜¯å¦è¢«Googleæ”¶å½• ï¼ˆåº”è¯¥æ²¡æœ‰ï¼‰ æäº¤URLå¹¶éªŒè¯æ‰€æœ‰æƒ æ·»åŠ Sitemapsç»™çˆ¬è™«åŠ ä¸ªé€Ÿ æ‰‹åŠ¨è¯·æ±‚ï¼ˆé‡æ–°ç´¢å¼•ï¼‰ ç™¾åº¦æœç´¢æ·»åŠ  1.æŸ¥çœ‹ç½‘ç«™æ˜¯å¦è¢«googleæ”¶å½•æŸ¥çœ‹ç½‘ç«™æ˜¯å¦è¢« Google æ”¶å½•å¾ˆç®€å•ï¼šæ‰“å¼€Googleæœç´¢ï¼Œåœ¨æœç´¢æ¡†å†…è¾“å…¥ 1site:your-websit-url&gt; å¦‚æœæ²¡æœ‰è¢«æ”¶å½•è¿›è¡Œä»¥ä¸‹æ“ä½œï¼Œä¸ç”¨å¤šä¹…å°±ä¼šè¢«æœç´¢åˆ°äº† 2.æäº¤URLå¹¶éªŒè¯æ‰€æœ‰æƒå¯èƒ½ä½ å·²ç»è§‚å¯Ÿåˆ°äº†ï¼Œæ— è®ºæœ‰æ²¡æœ‰è¢«Googleæ”¶å½•ï¼ŒGoogleéƒ½ä¼šåœ¨ç¬¬ä¸€æ¡æ˜¾ç¤ºGoogle Search Consoleã€‚ä¸ªäººçŒœæµ‹ï¼Œè¿™æ˜¯å‡ºäºå®‰å…¨ä¸éšç§æ–¹é¢çš„è€ƒè™‘ã€‚GoogleæŠŠæ˜¯å¦å…è®¸æ”¶å½•ç½‘ç«™çš„æƒåˆ©äº¤ç»™çœŸæ­£çš„ç«™ä¸»ã€‚ a.ç‚¹å‡»æ·»åŠ èµ„æº b.ç‚¹å‡»å³è¾¹æ·»åŠ ç½‘å€å‰ç¼€ c. å»ºè®®é€‰æ‹©HTMLæ–‡ä»¶éªŒè¯æ–¹æ³•ä¸€å…±æœ‰5ç§éªŒè¯æ–¹æ³•ï¼š HTML æ–‡ä»¶ï¼šé€šè¿‡åœ¨ç½‘å€æ ¹ç›®å½•æ·»åŠ ä¸€ä¸ªéšæœºç”Ÿæˆçš„.htmlæ–‡ä»¶éªŒè¯ã€‚ä¼˜ç‚¹ï¼šä¸éœ€è¦æ”¹åŠ¨åŸæœ‰ä»£ç ã€‚ HTML æ ‡è®°ï¼šé€šè¿‡å‘é¦–é¡µæ·»åŠ å…ƒæ ‡è®°ï¼Œå°†å…ƒæ ‡è®°å¤åˆ¶åˆ°ç¬¬ä¸€ä¸ª&lt;head&gt;ä¸­éªŒè¯ã€‚ç¼ºç‚¹ï¼šéœ€è¦æ”¹åŠ¨åŸæœ‰index.html Google Analyticsï¼šæ³¨å†ŒGoogle Analyticsè´¦å·åå°†analytics.jsæˆ–gtag.jsä»£ç æ®µæ·»åŠ åˆ°&lt;head&gt;ä¸­ã€‚ç¼ºç‚¹ï¼šéº»çƒ¦ï¼Œå¹¶éœ€è¦æ”¹åŠ¨åŸæœ‰ä»£ç ã€‚ä¼˜ç‚¹ï¼šå¯ä»¥æœ‰æ–°çš„featureã€‚ Google Tag Managerï¼šåŒä¸Šã€‚ DNS è®¾ç½®ï¼šå°†TXTè®°å½•å¤åˆ¶åˆ°DNSé…ç½®ä¸­ã€‚ç¼ºç‚¹ï¼šéº»çƒ¦ï¼Œå“åº”æ…¢ï¼ˆæœ€é•¿1å¤©ï¼‰ï¼Œæœ‰çš„æœåŠ¡å•†å¾ˆéš¾æ‰¾åˆ°DNSé…ç½®å…¥å£ã€‚ ä»¥ä¸‹æ“ä½œHTMLæ–‡ä»¶éªŒè¯åœ¨åæ–‡æ“ä½œ 3.æ·»åŠ Sitemapsç»™çˆ¬è™«åŠ ä¸ªé€ŸSitemapsæ˜¯ä»€ä¹ˆï¼Ÿç«™ç‚¹åœ°å›¾(Site Map)æ˜¯ç”¨æ¥æ³¨æ˜ç½‘ç«™ç»“æ„çš„æ–‡ä»¶ï¼Œå¯ä»¥è®©æœç´¢å¼•æ“çš„çˆ¬è™«äº†è§£ä½ çš„ç½‘ç«™ç»“æ„ï¼Œä»¥ä¾¿äºé«˜æ•ˆçˆ¬å–å†…å®¹ï¼Œå¿«é€Ÿå»ºç«‹ç´¢å¼•ã€‚Google ç­‰æœç´¢å¼•æ“ä¼šè¯»å–æ­¤æ–‡ä»¶ï¼Œä»¥ä¾¿æ›´åŠ æ™ºèƒ½åœ°æŠ“å–ä½ çš„ç½‘ç«™ã€‚ç«™ç‚¹åœ°å›¾ä¼šå‘Šè¯‰ Google ä½ è®¤ä¸ºç½‘ç«™ä¸­çš„å“ªäº›ç½‘é¡µå’Œæ–‡ä»¶æ¯”è¾ƒé‡è¦ï¼Œè¿˜ä¼šæä¾›ä¸è¿™äº›æ–‡ä»¶æœ‰å…³çš„é‡è¦ä¿¡æ¯ï¼šä»¥ç½‘é¡µä¸ºä¾‹ï¼Œè¿™äº›ä¿¡æ¯åŒ…æ‹¬ç½‘é¡µä¸Šæ¬¡æ›´æ–°çš„æ—¶é—´ã€ç½‘é¡µæ›´æ”¹çš„é¢‘ç‡ï¼Œä»¥åŠç½‘é¡µæ˜¯å¦æœ‰å…¶ä»–è¯­è¨€ç‰ˆæœ¬ã€‚ å¦‚æœä½ çš„ç½‘ç«™ä¸Šçš„ç½‘é¡µé“¾æ¥å¾—å½“ï¼Œé‚£ä¹ˆ Google é€šå¸¸èƒ½å¤Ÿå‘ç°å…¶ä¸­çš„å¤§å¤šæ•°ç½‘é¡µã€‚å³ä¾¿å¦‚æ­¤ï¼Œç«™ç‚¹åœ°å›¾ä»æœ‰åŠ©äºæˆ‘ä»¬æ›´åŠ é«˜æ•ˆåœ°æŠ“å–è§„æ¨¡æ›´å¤§ã€æ›´å¤æ‚çš„ç½‘ç«™æˆ–æ›´ç‰¹æ®Šçš„æ–‡ä»¶ã€‚ åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦ç«™ç‚¹åœ°å›¾ï¼š ç½‘ç«™è§„æ¨¡å¾ˆå¤§ã€‚ ç½‘ç«™æœ‰å¤§é‡å†…å®¹é¡µå½’æ¡£ï¼Œè¿™äº›å†…å®¹é¡µä¹‹é—´äº’ä¸å…³è”æˆ–ç¼ºå°‘æœ‰æ•ˆé“¾æ¥ã€‚ ç½‘ç«™ä¸ºæ–°ç½‘ç«™ä¸”æŒ‡å‘è¯¥ç½‘ç«™çš„å¤–éƒ¨é“¾æ¥ä¸å¤šã€‚ ç½‘ç«™åŒ…å«å¤§é‡å¯Œåª’ä½“å†…å®¹ï¼ˆè§†é¢‘ã€å›¾ç‰‡ï¼‰æˆ–æ˜¾ç¤ºåœ¨ Google æ–°é—»ä¸­ã€‚ åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¸éœ€è¦ç«™ç‚¹åœ°å›¾ï¼š ç½‘ç«™è§„æ¨¡â€œè¾ƒå°â€ã€‚è§„æ¨¡è¾ƒå°æ˜¯æŒ‡ç½‘ç«™ä¸Šçš„ç½‘é¡µæ•°ä¸è¶…è¿‡ 500 ä¸ªã€‚ ä½¿ç”¨äº†ç®€å•ç½‘ç«™æ‰˜ç®¡æœåŠ¡ï¼Œä¾‹å¦‚ Blogger æˆ– Wixã€‚ ç½‘ç«™å·²åœ¨å†…éƒ¨å…¨é¢å»ºç«‹é“¾æ¥ã€‚è¿™æ„å‘³ç€ï¼ŒGoogle å¯ä»¥æ²¿ç€é¦–é¡µçš„é“¾æ¥æ‰¾åˆ°ç½‘ç«™ä¸Šçš„æ‰€æœ‰é‡è¦ç½‘é¡µã€‚ åœ¨ç´¢å¼•ä¸­éœ€è¦å‡ºç°çš„åª’ä½“æ–‡ä»¶ï¼ˆè§†é¢‘ã€å›¾ç‰‡ï¼‰æˆ–æ–°é—»é¡µé¢ä¸å¤šã€‚ é€šè¿‡XML-Sitemaps.comç”Ÿæˆ a.ç‚¹å‡»è¿›å…¥XML-Sitemaps.comï¼Œè¾“å…¥ä¸ªäººç½‘ç«™åœ°å€ï¼Œç‚¹å‡»startã€‚ b.ç­‰å¾…æœç´¢å®Œæˆ é¢„è§ˆä¸€ä¸‹ c.ä¸‹è½½sitemap.xmlæ–‡ä»¶å¹¶ä¸Šä¼ åˆ°ç½‘ç«™æ ¹ç›®å½•ä¸‹ d.åœ¨Google Search Consoleæäº¤ç«™ç‚¹åœ°å›¾ 4.æ‰‹åŠ¨è¯·æ±‚æ£€æŸ¥æˆ‘è¿™é‡Œæ£€æŸ¥åçœ‹åˆ°å¹¶æ²¡æœ‰æ”¶å½•ï¼Œç‚¹å‡»è¯·æ±‚ç¼–å…¥ç´¢å¼• ç­‰å¾…ä¸€ä¸¤åˆ†é’Ÿåï¼ŒæŠ“å–æˆåŠŸ åˆšæäº¤è¿˜æ²¡æœ‰åˆ·æ–°å‡ºæ¥ï¼Œç­‰ä¸€æ®µæ—¶é—´çœ‹çœ‹ 5.ç™¾åº¦æ‰“å¼€ç™¾åº¦æœç´¢èµ„æºå¹³å° ä¸‹è½½éªŒè¯æ–‡ä»¶ï¼ŒæŠŠä¸‹è½½çš„æ–‡ä»¶æ·»åŠ åˆ°suorceæ–‡ä»¶å¤¹ä¸­ï¼Œæ¯ä¸€æ¬¡æäº¤æ—¶ä¼šåˆ·æ–°sourceçš„å†…å®¹ ä½†æ˜¯è¿™æ˜¯è¿™ä¸ªHTMLæ–‡ä»¶ï¼Œæˆ‘ä»¬çš„ä¸»é¢˜ä¼šè‡ªåŠ¨æŠŠå®ƒç»™æ¸²æŸ“å¯¼è‡´éªŒè¯å¤±è´¥ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°ä¸»é¢˜çš„é…ç½®æ–‡ä»¶æœç´¢skipï¼Œä¼šæœ‰è·³è¿‡æ¸²æŸ“çš„é€‰é¡¹ï¼ŒæŠŠæ–‡ä»¶æ·»åŠ åˆ°é‡Œé¢å³å¯(æ³¨æ„ä¸€å®šè¦hexo clean æ‰ä¼šæ›´æ–°é…ç½®æ–‡ä»¶) ç„¶åç‚¹å‡»éªŒè¯å°±æˆåŠŸè¾£ï¼Œè¿‡ä¸€æ®µæ—¶é—´åä½ å¯ä»¥é€šè¿‡è°·æ­Œæ”¶å½•ç½‘ç«™æˆ–è€…æœç´¢æ¡†è¾“å…¥site:xxx.com æ¥æŸ¥çœ‹æ”¶å½•æƒ…å†µå’Œæµé‡æƒ…å†µ æ™šä¸Šçªç„¶æƒ³èµ·æ¥æœç´¢äº†ä¸€ä¸‹ï¼Œå¯ä»¥è¢«æœç´¢åˆ°äº†","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://snowman12137.github.io/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"åšå®¢é—®é¢˜","slug":"åšå®¢é—®é¢˜","permalink":"https://snowman12137.github.io/tags/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98/"}],"author":"Sn0wma1n"},{"title":"VUEå­¦ä¹ (äºŒ)","slug":"VUEå­¦ä¹ -äºŒ-dc56c04481d44b9f9da3d52db4606175","date":"2024-02-03T16:00:00.000Z","updated":"2024-02-06T18:23:46.892Z","comments":true,"path":"2024/02/04/VUEå­¦ä¹ -äºŒ-dc56c04481d44b9f9da3d52db4606175/","link":"","permalink":"https://snowman12137.github.io/2024/02/04/VUE%E5%AD%A6%E4%B9%A0-%E4%BA%8C-dc56c04481d44b9f9da3d52db4606175/","excerpt":"","text":"VUEå­¦ä¹ (äºŒ)1.å¿«é€Ÿä¸Šæ‰‹å®‰è£… 1npm create vue@latest ç”¨æœ€æœ´ç´ çš„é…ç½® 123456789101112âœ” Project name: â€¦ &lt;your-project-name&gt;âœ” Add TypeScript? â€¦ No / Yesâœ” Add JSX Support? â€¦ No / Yesâœ” Add Vue Router for Single Page Application development? â€¦ No / Yesâœ” Add Pinia for state management? â€¦ No / Yesâœ” Add Vitest for Unit testing? â€¦ No / Yesâœ” Add an End-to-End Testing Solution? â€¦ No / Cypress / Playwrightâœ” Add ESLint for code quality? â€¦ No / Yesâœ” Add Prettier for code formatting? â€¦ No / YesScaffolding project in ./&lt;your-project-name&gt;...Done. å¯åŠ¨ 123cd &lt;your-project-name&gt;npm installnpm run dev 2 åˆ›å»ºä¸€ä¸ªåº”ç”¨æ¯ä¸ª Vue åº”ç”¨éƒ½æ˜¯é€šè¿‡ [createApp](https://cn.vuejs.org/api/application.html#createapp) å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„ åº”ç”¨å®ä¾‹ï¼š 12345import &#123; createApp &#125; from &#x27;vue&#x27;const app = createApp(&#123; /* æ ¹ç»„ä»¶é€‰é¡¹ */&#125;) æ ¹ç»„ä»¶æˆ‘ä»¬ä¼ å…¥ createApp çš„å¯¹è±¡å®é™…ä¸Šæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œæ¯ä¸ªåº”ç”¨éƒ½éœ€è¦ä¸€ä¸ªâ€œæ ¹ç»„ä»¶â€ï¼Œå…¶ä»–ç»„ä»¶å°†ä½œä¸ºå…¶å­ç»„ä»¶ã€‚ å¦‚æœä½ ä½¿ç”¨çš„æ˜¯å•æ–‡ä»¶ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä»å¦ä¸€ä¸ªæ–‡ä»¶ä¸­å¯¼å…¥æ ¹ç»„ä»¶ã€‚ 12345import &#123; createApp &#125; from &#x27;vue&#x27;// ä»ä¸€ä¸ªå•æ–‡ä»¶ç»„ä»¶ä¸­å¯¼å…¥æ ¹ç»„ä»¶import App from &#x27;./App.vue&#x27;const app = createApp(App) æŒ‚åœ¨åº”ç”¨åº”ç”¨å®ä¾‹å¿…é¡»åœ¨è°ƒç”¨äº† .mount() æ–¹æ³•åæ‰ä¼šæ¸²æŸ“å‡ºæ¥ã€‚è¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªâ€œå®¹å™¨â€å‚æ•°ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå®é™…çš„ DOM å…ƒç´ æˆ–æ˜¯ä¸€ä¸ª CSS é€‰æ‹©å™¨å­—ç¬¦ä¸²ï¼š 1&lt;div id=&quot;app&quot;&gt;&lt;/div&gt; 1app.mount(&#x27;#app&#x27;) åº”ç”¨æ ¹ç»„ä»¶çš„å†…å®¹å°†ä¼šè¢«æ¸²æŸ“åœ¨å®¹å™¨å…ƒç´ é‡Œé¢ã€‚å®¹å™¨å…ƒç´ è‡ªå·±å°†ä¸ä¼šè¢«è§†ä¸ºåº”ç”¨çš„ä¸€éƒ¨åˆ†ã€‚ .mount() æ–¹æ³•åº”è¯¥å§‹ç»ˆåœ¨æ•´ä¸ªåº”ç”¨é…ç½®å’Œèµ„æºæ³¨å†Œå®Œæˆåè¢«è°ƒç”¨ã€‚åŒæ—¶è¯·æ³¨æ„ï¼Œä¸åŒäºå…¶ä»–èµ„æºæ³¨å†Œæ–¹æ³•ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯æ ¹ç»„ä»¶å®ä¾‹è€Œéåº”ç”¨å®ä¾‹ã€‚ DOM ä¸­çš„æ ¹ç»„ä»¶æ¨¡æ¿æ ¹ç»„ä»¶çš„æ¨¡æ¿é€šå¸¸æ˜¯ç»„ä»¶æœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼Œä½†ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡åœ¨æŒ‚è½½å®¹å™¨å†…ç¼–å†™æ¨¡æ¿æ¥å•ç‹¬æä¾›ï¼š 123&lt;div id=&quot;app&quot;&gt; &lt;button @click=&quot;count++&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt;&lt;/div&gt; 1234567891011import &#123; createApp &#125; from &#x27;vue&#x27;const app = createApp(&#123; data() &#123; return &#123; count: 0 &#125; &#125;&#125;)app.mount(&#x27;#app&#x27;) å½“æ ¹ç»„ä»¶æ²¡æœ‰è®¾ç½® template é€‰é¡¹æ—¶ï¼ŒVue å°†è‡ªåŠ¨ä½¿ç”¨å®¹å™¨çš„ innerHTML ä½œä¸ºæ¨¡æ¿ã€‚ DOM å†…æ¨¡æ¿é€šå¸¸ç”¨äºæ— æ„å»ºæ­¥éª¤çš„ Vue åº”ç”¨ç¨‹åºã€‚å®ƒä»¬ä¹Ÿå¯ä»¥ä¸æœåŠ¡å™¨ç«¯æ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼Œå…¶ä¸­æ ¹æ¨¡æ¿å¯èƒ½æ˜¯ç”±æœåŠ¡å™¨åŠ¨æ€ç”Ÿæˆçš„ã€‚ å›åˆ°æˆ‘ä»¬åˆ›å»ºçš„å®ä¾‹æ‰¾åˆ°src&#x2F;main.jsæ–‡ä»¶ æºä»£ç æ˜¯è¿™æ ·çš„ 1createApp(App).mount(&#x27;#app&#x27;) æˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä¸Šé¢çš„å½¢å¼æ”¹æˆè¿™æ · 123456789//æ ¹ç»„ä»¶const app = createApp(App,&#123; data() &#123; return &#123; count: 0 &#125; &#125; &#125;) app.mount(&#x27;#app&#x27;)//æŒ‚è½½ 3 æ¨¡æ¿è¯­æ³•Vue ä½¿ç”¨ä¸€ç§åŸºäº HTML çš„æ¨¡æ¿è¯­æ³•ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿå£°æ˜å¼åœ°å°†å…¶ç»„ä»¶å®ä¾‹çš„æ•°æ®ç»‘å®šåˆ°å‘ˆç°çš„ DOM ä¸Šã€‚æ‰€æœ‰çš„ Vue æ¨¡æ¿éƒ½æ˜¯è¯­æ³•å±‚é¢åˆæ³•çš„ HTMLï¼Œå¯ä»¥è¢«ç¬¦åˆè§„èŒƒçš„æµè§ˆå™¨å’Œ HTML è§£æå™¨è§£æã€‚ åœ¨åº•å±‚æœºåˆ¶ä¸­ï¼ŒVue ä¼šå°†æ¨¡æ¿ç¼–è¯‘æˆé«˜åº¦ä¼˜åŒ–çš„ JavaScript ä»£ç ã€‚ç»“åˆå“åº”å¼ç³»ç»Ÿï¼Œå½“åº”ç”¨çŠ¶æ€å˜æ›´æ—¶ï¼ŒVue èƒ½å¤Ÿæ™ºèƒ½åœ°æ¨å¯¼å‡ºéœ€è¦é‡æ–°æ¸²æŸ“çš„ç»„ä»¶çš„æœ€å°‘æ•°é‡ï¼Œå¹¶åº”ç”¨æœ€å°‘çš„ DOM æ“ä½œã€‚ å¦‚æœä½ å¯¹è™šæ‹Ÿ DOM çš„æ¦‚å¿µæ¯”è¾ƒç†Ÿæ‚‰ï¼Œå¹¶ä¸”åå¥½ç›´æ¥ä½¿ç”¨ JavaScriptï¼Œä½ ä¹Ÿå¯ä»¥ç»“åˆå¯é€‰çš„ JSX æ”¯æŒç›´æ¥æ‰‹å†™æ¸²æŸ“å‡½æ•°è€Œä¸é‡‡ç”¨æ¨¡æ¿ã€‚ä½†è¯·æ³¨æ„ï¼Œè¿™å°†ä¸ä¼šäº«å—åˆ°å’Œæ¨¡æ¿åŒç­‰çº§åˆ«çš„ç¼–è¯‘æ—¶ä¼˜åŒ–ã€‚ a.Attribute ç»‘å®šåŒå¤§æ‹¬å·ä¸èƒ½åœ¨ HTML attributes ä¸­ä½¿ç”¨ã€‚æƒ³è¦å“åº”å¼åœ°ç»‘å®šä¸€ä¸ª attributeï¼Œåº”è¯¥ä½¿ç”¨ v-bind æŒ‡ä»¤ï¼š 1&lt;div v-bind:id=&quot;dynamicId&quot;&gt;&lt;/div&gt; v-bind æŒ‡ä»¤æŒ‡ç¤º Vue å°†å…ƒç´ çš„ id attribute ä¸ç»„ä»¶çš„ dynamicId å±æ€§ä¿æŒä¸€è‡´ã€‚å¦‚æœç»‘å®šçš„å€¼æ˜¯ null æˆ–è€… undefinedï¼Œé‚£ä¹ˆè¯¥ attribute å°†ä¼šä»æ¸²æŸ“çš„å…ƒç´ ä¸Šç§»é™¤ã€‚ å› ä¸º v-bind éå¸¸å¸¸ç”¨ï¼Œæˆ‘ä»¬æä¾›äº†ç‰¹å®šçš„ç®€å†™è¯­æ³• 1&lt;div :id=&quot;dynamicId&quot;&gt;&lt;/div&gt; åŠ¨æ€ç»‘å®šå¤šä¸ªå€¼ å¦‚æœä½ æœ‰åƒè¿™æ ·çš„ä¸€ä¸ªåŒ…å«å¤šä¸ª attribute çš„ JavaScript å¯¹è±¡ï¼š 1234const objectOfAttrs = &#123; id: &#x27;container&#x27;, class: &#x27;wrapper&#x27;&#125; é€šè¿‡ä¸å¸¦å‚æ•°çš„ v-bindï¼Œä½ å¯ä»¥å°†å®ƒä»¬ç»‘å®šåˆ°å•ä¸ªå…ƒç´ ä¸Šï¼š 1&lt;div v-bind=&quot;objectOfAttrs&quot;&gt;&lt;/div&gt; b ä½¿ç”¨ JavaScript è¡¨è¾¾å¼è‡³æ­¤ï¼Œæˆ‘ä»¬ä»…åœ¨æ¨¡æ¿ä¸­ç»‘å®šäº†ä¸€äº›ç®€å•çš„å±æ€§åã€‚ä½†æ˜¯ Vue å®é™…ä¸Šåœ¨æ‰€æœ‰çš„æ•°æ®ç»‘å®šä¸­éƒ½æ”¯æŒå®Œæ•´çš„ JavaScript è¡¨è¾¾å¼ï¼š 1234567&#123;&#123; number + 1 &#125;&#125;&#123;&#123; ok ? &#x27;YES&#x27; : &#x27;NO&#x27; &#125;&#125;&#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;&lt;div :id=&quot;`list-$&#123;id&#125;`&quot;&gt;&lt;/div&gt; åœ¨ Vue æ¨¡æ¿å†…ï¼ŒJavaScript è¡¨è¾¾å¼å¯ä»¥è¢«ä½¿ç”¨åœ¨å¦‚ä¸‹åœºæ™¯ä¸Šï¼š åœ¨æ–‡æœ¬æ’å€¼ä¸­ (åŒå¤§æ‹¬å·) åœ¨ä»»ä½• Vue æŒ‡ä»¤ (ä»¥ v- å¼€å¤´çš„ç‰¹æ®Š attribute) attribute çš„å€¼ä¸­ c.æŒ‡ä»¤ DirectivesæŒ‡ä»¤æ˜¯å¸¦æœ‰ v- å‰ç¼€çš„ç‰¹æ®Š attributeã€‚Vue æä¾›äº†è®¸å¤š**å†…ç½®æŒ‡ä»¤**ï¼ŒåŒ…æ‹¬ä¸Šé¢æˆ‘ä»¬æ‰€ä»‹ç»çš„ v-bind å’Œ v-htmlã€‚ æŒ‡ä»¤ attribute çš„æœŸæœ›å€¼ä¸ºä¸€ä¸ª JavaScript è¡¨è¾¾å¼ (é™¤äº†å°‘æ•°å‡ ä¸ªä¾‹å¤–ï¼Œå³ä¹‹åè¦è®¨è®ºåˆ°çš„ v-forã€v-on å’Œ v-slot)ã€‚ä¸€ä¸ªæŒ‡ä»¤çš„ä»»åŠ¡æ˜¯åœ¨å…¶è¡¨è¾¾å¼çš„å€¼å˜åŒ–æ—¶å“åº”å¼åœ°æ›´æ–° DOMã€‚ä»¥ [v-if](https://cn.vuejs.org/api/built-in-directives.html#v-if) ä¸ºä¾‹ï¼š 1&lt;p v-if=&quot;seen&quot;&gt;Now you see me&lt;/p&gt; è¿™é‡Œï¼Œv-if æŒ‡ä»¤ä¼šåŸºäºè¡¨è¾¾å¼ seen çš„å€¼çš„çœŸå‡æ¥ç§»é™¤&#x2F;æ’å…¥è¯¥ &lt;p&gt; å…ƒç´ ã€‚ å¦ä¸€ä¸ªä¾‹å­æ˜¯ v-on æŒ‡ä»¤ï¼Œå®ƒå°†ç›‘å¬ DOM äº‹ä»¶ï¼š 1234&lt;a v-on:click=&quot;doSomething&quot;&gt; ... &lt;/a&gt;&lt;!-- ç®€å†™ --&gt;&lt;a @click=&quot;doSomething&quot;&gt; ... &lt;/a&gt; è¿™é‡Œçš„å‚æ•°æ˜¯è¦ç›‘å¬çš„äº‹ä»¶åç§°ï¼šclickã€‚v-on æœ‰ä¸€ä¸ªç›¸åº”çš„ç¼©å†™ï¼Œå³ @ å­—ç¬¦ã€‚æˆ‘ä»¬ä¹‹åä¹Ÿä¼šè®¨è®ºå…³äºäº‹ä»¶å¤„ç†çš„æ›´å¤šç»†èŠ‚ã€‚ d.åŠ¨æ€å‚æ•°åŒæ ·åœ¨æŒ‡ä»¤å‚æ•°ä¸Šä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ª JavaScript è¡¨è¾¾å¼ï¼Œéœ€è¦åŒ…å«åœ¨ä¸€å¯¹æ–¹æ‹¬å·å†…ï¼š 12345678&lt;!--æ³¨æ„ï¼Œå‚æ•°è¡¨è¾¾å¼æœ‰ä¸€äº›çº¦æŸï¼Œå‚è§ä¸‹é¢â€œåŠ¨æ€å‚æ•°å€¼çš„é™åˆ¶â€ä¸â€œåŠ¨æ€å‚æ•°è¯­æ³•çš„é™åˆ¶â€ç« èŠ‚çš„è§£é‡Š--&gt;&lt;a v-bind:[attributeName]=&quot;url&quot;&gt; ... &lt;/a&gt;&lt;!-- ç®€å†™ --&gt;&lt;a :[attributeName]=&quot;url&quot;&gt; ... &lt;/a&gt; è¿™é‡Œçš„ attributeName ä¼šä½œä¸ºä¸€ä¸ª JavaScript è¡¨è¾¾å¼è¢«åŠ¨æ€æ‰§è¡Œï¼Œè®¡ç®—å¾—åˆ°çš„å€¼ä¼šè¢«ç”¨ä½œæœ€ç»ˆçš„å‚æ•°ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ çš„ç»„ä»¶å®ä¾‹æœ‰ä¸€ä¸ªæ•°æ®å±æ€§ attributeNameï¼Œå…¶å€¼ä¸º &quot;href&quot;ï¼Œé‚£ä¹ˆè¿™ä¸ªç»‘å®šå°±ç­‰ä»·äº v-bind:hrefã€‚ ç›¸ä¼¼åœ°ï¼Œä½ è¿˜å¯ä»¥å°†ä¸€ä¸ªå‡½æ•°ç»‘å®šåˆ°åŠ¨æ€çš„äº‹ä»¶åç§°ä¸Šï¼š 1234&lt;a v-on:[eventName]=&quot;doSomething&quot;&gt; ... &lt;/a&gt;&lt;!-- ç®€å†™ --&gt;&lt;a @[eventName]=&quot;doSomething&quot;&gt; ... &lt;/a&gt; e.ä¿®é¥°ç¬¦ Modifiersä¿®é¥°ç¬¦æ˜¯ä»¥ç‚¹å¼€å¤´çš„ç‰¹æ®Šåç¼€ï¼Œè¡¨æ˜æŒ‡ä»¤éœ€è¦ä»¥ä¸€äº›ç‰¹æ®Šçš„æ–¹å¼è¢«ç»‘å®šã€‚ä¾‹å¦‚ .prevent ä¿®é¥°ç¬¦ä¼šå‘ŠçŸ¥ v-on æŒ‡ä»¤å¯¹è§¦å‘çš„äº‹ä»¶è°ƒç”¨ event.preventDefault()ï¼š 1&lt;form @submit.prevent=&quot;onSubmit&quot;&gt;...&lt;/form&gt; ä¹‹ååœ¨è®²åˆ° [v-on](https://cn.vuejs.org/guide/essentials/event-handling.html#event-modifiers) å’Œ [v-model](https://cn.vuejs.org/guide/essentials/forms.html#modifiers) çš„åŠŸèƒ½æ—¶ï¼Œä½ å°†ä¼šçœ‹åˆ°å…¶ä»–ä¿®é¥°ç¬¦çš„ä¾‹å­ã€‚ æœ€åï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°å®Œæ•´çš„æŒ‡ä»¤è¯­æ³•ï¼š 4.å£°æ˜å“åº”å¼çŠ¶æ€a.ref()åœ¨ç»„åˆå¼ API ä¸­ï¼Œæ¨èä½¿ç”¨ [ref()](https://cn.vuejs.org/api/reactivity-core.html#ref) å‡½æ•°æ¥å£°æ˜å“åº”å¼çŠ¶æ€ï¼š 12import &#123; ref &#125; from &#x27;vue&#x27;const count = ref(0) ref() æ¥æ”¶å‚æ•°ï¼Œå¹¶å°†å…¶åŒ…è£¹åœ¨ä¸€ä¸ªå¸¦æœ‰ .value å±æ€§çš„ ref å¯¹è±¡ä¸­è¿”å›ï¼š 12345const count = ref(0)console.log(count) // &#123; value: 0 &#125;console.log(count.value) // 0count.value++console.log(count.value) // 1 è¦åœ¨ç»„ä»¶æ¨¡æ¿ä¸­è®¿é—® refï¼Œè¯·ä»ç»„ä»¶çš„ setup() å‡½æ•°ä¸­å£°æ˜å¹¶è¿”å›å®ƒä»¬ï¼š 1234567891011import &#123; ref &#125; from &#x27;vue&#x27;export default &#123; // `setup` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„é’©å­ï¼Œä¸“é—¨ç”¨äºç»„åˆå¼ APIã€‚ setup() &#123; const count = ref(0) // å°† ref æš´éœ²ç»™æ¨¡æ¿ return &#123; count &#125; &#125;&#125; 1&lt;div&gt;&#123;&#123; count &#125;&#125;&lt;/div&gt; æ³¨æ„ï¼Œåœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ ref æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦é™„åŠ  .valueã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå½“åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ—¶ï¼Œref ä¼šè‡ªåŠ¨è§£åŒ… (æœ‰ä¸€äº›**æ³¨æ„äº‹é¡¹**)ã€‚ ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨äº‹ä»¶ç›‘å¬å™¨ä¸­æ”¹å˜ä¸€ä¸ª refï¼š 123&lt;button @click=&quot;count++&quot;&gt; &#123;&#123; count &#125;&#125;&lt;/button&gt; å¯¹äºæ›´å¤æ‚çš„é€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŒä¸€ä½œç”¨åŸŸå†…å£°æ˜æ›´æ”¹ ref çš„å‡½æ•°ï¼Œå¹¶å°†å®ƒä»¬ä½œä¸ºæ–¹æ³•ä¸çŠ¶æ€ä¸€èµ·å…¬å¼€ï¼š 123456789101112131415161718import &#123; ref &#125; from &#x27;vue&#x27;export default &#123; setup() &#123; const count = ref(0) function increment() &#123; // åœ¨ JavaScript ä¸­éœ€è¦ .value count.value++ &#125; // ä¸è¦å¿˜è®°åŒæ—¶æš´éœ² increment å‡½æ•° return &#123; count, increment &#125; &#125;&#125; ç„¶åï¼Œæš´éœ²çš„æ–¹æ³•å¯ä»¥è¢«ç”¨ä½œäº‹ä»¶ç›‘å¬å™¨ï¼š 123&lt;button @click=&quot;increment&quot;&gt; &#123;&#123; count &#125;&#125;&lt;/button&gt; b**&lt;script setup&gt;**åœ¨ setup() å‡½æ•°ä¸­æ‰‹åŠ¨æš´éœ²å¤§é‡çš„çŠ¶æ€å’Œæ–¹æ³•éå¸¸ç¹çã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶ (SFC) æ¥é¿å…è¿™ç§æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;script setup&gt; æ¥å¤§å¹…åº¦åœ°ç®€åŒ–ä»£ç ï¼š 123456789101112131415&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;const count = ref(0)function increment() &#123; count.value++&#125;&lt;/script&gt;&lt;template&gt; &lt;button @click=&quot;increment&quot;&gt; &#123;&#123; count &#125;&#125; &lt;/button&gt;&lt;/template&gt; &lt;script setup&gt; ä¸­çš„é¡¶å±‚çš„å¯¼å…¥ã€å£°æ˜çš„å˜é‡å’Œå‡½æ•°å¯åœ¨åŒä¸€ç»„ä»¶çš„æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨ã€‚ä½ å¯ä»¥ç†è§£ä¸ºæ¨¡æ¿æ˜¯åœ¨åŒä¸€ä½œç”¨åŸŸå†…å£°æ˜çš„ä¸€ä¸ª JavaScript å‡½æ•°â€”â€”å®ƒè‡ªç„¶å¯ä»¥è®¿é—®ä¸å®ƒä¸€èµ·å£°æ˜çš„æ‰€æœ‰å†…å®¹ã€‚ c**reactive()**è¿˜æœ‰å¦ä¸€ç§å£°æ˜å“åº”å¼çŠ¶æ€çš„æ–¹å¼ï¼Œå³ä½¿ç”¨ reactive() APIã€‚ä¸å°†å†…éƒ¨å€¼åŒ…è£…åœ¨ç‰¹æ®Šå¯¹è±¡ä¸­çš„ ref ä¸åŒï¼Œreactive() å°†ä½¿å¯¹è±¡æœ¬èº«å…·æœ‰å“åº”æ€§ï¼š 12import &#123; reactive &#125; from &#x27;vue&#x27;const state = reactive(&#123; count: 0 &#125;) åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼š 123&lt;button @click=&quot;state.count++&quot;&gt; &#123;&#123; state.count &#125;&#125;&lt;/button&gt; å“åº”å¼å¯¹è±¡æ˜¯ JavaScript ä»£ç†ï¼Œå…¶è¡Œä¸ºå°±å’Œæ™®é€šå¯¹è±¡ä¸€æ ·ã€‚ä¸åŒçš„æ˜¯ï¼ŒVue èƒ½å¤Ÿæ‹¦æˆªå¯¹å“åº”å¼å¯¹è±¡æ‰€æœ‰å±æ€§çš„è®¿é—®å’Œä¿®æ”¹ï¼Œä»¥ä¾¿è¿›è¡Œä¾èµ–è¿½è¸ªå’Œè§¦å‘æ›´æ–°ã€‚ reactive() å°†æ·±å±‚åœ°è½¬æ¢å¯¹è±¡ï¼šå½“è®¿é—®åµŒå¥—å¯¹è±¡æ—¶ï¼Œå®ƒä»¬ä¹Ÿä¼šè¢« reactive() åŒ…è£…ã€‚å½“ ref çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œref() ä¹Ÿä¼šåœ¨å†…éƒ¨è°ƒç”¨å®ƒã€‚ä¸æµ…å±‚ ref ç±»ä¼¼ï¼Œè¿™é‡Œä¹Ÿæœ‰ä¸€ä¸ª shallowReactive() API å¯ä»¥é€‰æ‹©é€€å‡ºæ·±å±‚å“åº”æ€§ã€‚ Reactive Proxy vs. Original å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œreactive() è¿”å›çš„æ˜¯ä¸€ä¸ªåŸå§‹å¯¹è±¡çš„ **Proxy**ï¼Œå®ƒå’ŒåŸå§‹å¯¹è±¡æ˜¯ä¸ç›¸ç­‰çš„ï¼šï¼ˆå› ä¸ºä¸€ä¸ªæ˜¯å¯¹è±¡ä¸€ä¸ªæ˜¯{}ï¼‰ 1234const raw = &#123;&#125;const proxy = reactive(raw)// ä»£ç†å¯¹è±¡å’ŒåŸå§‹å¯¹è±¡ä¸æ˜¯å…¨ç­‰çš„console.log(proxy === raw) // false reactive() çš„å±€é™æ€§ æœ‰é™çš„å€¼ç±»å‹ï¼šå®ƒåªèƒ½ç”¨äºå¯¹è±¡ç±»å‹ (å¯¹è±¡ã€æ•°ç»„å’Œå¦‚ Mapã€Set è¿™æ ·çš„**é›†åˆç±»å‹)ã€‚å®ƒä¸èƒ½æŒæœ‰å¦‚ stringã€number æˆ– boolean è¿™æ ·çš„åŸå§‹ç±»å‹**ã€‚ ä¸èƒ½æ›¿æ¢æ•´ä¸ªå¯¹è±¡ï¼šç”±äº Vue çš„å“åº”å¼è·Ÿè¸ªæ˜¯é€šè¿‡å±æ€§è®¿é—®å®ç°çš„ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»å§‹ç»ˆä¿æŒå¯¹å“åº”å¼å¯¹è±¡çš„ç›¸åŒå¼•ç”¨ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½è½»æ˜“åœ°â€œæ›¿æ¢â€å“åº”å¼å¯¹è±¡ï¼Œå› ä¸ºè¿™æ ·çš„è¯ä¸ç¬¬ä¸€ä¸ªå¼•ç”¨çš„å“åº”æ€§è¿æ¥å°†ä¸¢å¤±ï¼š 12345let state = reactive(&#123; count: 0 &#125;)// ä¸Šé¢çš„ (&#123; count: 0 &#125;) å¼•ç”¨å°†ä¸å†è¢«è¿½è¸ª// (å“åº”æ€§è¿æ¥å·²ä¸¢å¤±ï¼)state = reactive(&#123; count: 1 &#125;) å¯¹è§£æ„æ“ä½œä¸å‹å¥½ï¼šå½“æˆ‘ä»¬å°†å“åº”å¼å¯¹è±¡çš„åŸå§‹ç±»å‹å±æ€§è§£æ„ä¸ºæœ¬åœ°å˜é‡æ—¶ï¼Œæˆ–è€…å°†è¯¥å±æ€§ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å°†ä¸¢å¤±å“åº”æ€§è¿æ¥ï¼š 1234567891011const state = reactive(&#123; count: 0 &#125;)// å½“è§£æ„æ—¶ï¼Œcount å·²ç»ä¸ state.count æ–­å¼€è¿æ¥let &#123; count &#125; = state// ä¸ä¼šå½±å“åŸå§‹çš„ statecount++// è¯¥å‡½æ•°æ¥æ”¶åˆ°çš„æ˜¯ä¸€ä¸ªæ™®é€šçš„æ•°å­—// å¹¶ä¸”æ— æ³•è¿½è¸ª state.count çš„å˜åŒ–// æˆ‘ä»¬å¿…é¡»ä¼ å…¥æ•´ä¸ªå¯¹è±¡ä»¥ä¿æŒå“åº”æ€§callSomeFunction(state.count) ç”±äºè¿™äº›é™åˆ¶ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨ ref() ä½œä¸ºå£°æ˜å“åº”å¼çŠ¶æ€çš„ä¸»è¦ APIã€‚ 5.è®¡ç®—å±æ€§a.åŸºç¡€ç¤ºä¾‹æ¨¡æ¿ä¸­çš„è¡¨è¾¾å¼è™½ç„¶æ–¹ä¾¿ï¼Œä½†ä¹Ÿåªèƒ½ç”¨æ¥åšç®€å•çš„æ“ä½œã€‚å¦‚æœåœ¨æ¨¡æ¿ä¸­å†™å¤ªå¤šé€»è¾‘ï¼Œä¼šè®©æ¨¡æ¿å˜å¾—è‡ƒè‚¿ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªåŒ…å«åµŒå¥—æ•°ç»„çš„å¯¹è±¡ï¼š 12345678const author = reactive(&#123; name: &#x27;John Doe&#x27;, books: [ &#x27;Vue 2 - Advanced Guide&#x27;, &#x27;Vue 3 - Basic Guide&#x27;, &#x27;Vue 4 - The Mystery&#x27; ]&#125;) æˆ‘ä»¬æƒ³æ ¹æ® author æ˜¯å¦å·²æœ‰ä¸€äº›ä¹¦ç±æ¥å±•ç¤ºä¸åŒçš„ä¿¡æ¯ï¼š 12&lt;p&gt;Has published books:&lt;/p&gt;&lt;span&gt;&#123;&#123; author.books.length &gt; 0 ? &#x27;Yes&#x27; : &#x27;No&#x27; &#125;&#125;&lt;/span&gt; è¿™é‡Œçš„æ¨¡æ¿çœ‹èµ·æ¥æœ‰äº›å¤æ‚ã€‚æˆ‘ä»¬å¿…é¡»è®¤çœŸçœ‹å¥½ä¸€ä¼šå„¿æ‰èƒ½æ˜ç™½å®ƒçš„è®¡ç®—ä¾èµ–äº author.booksã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœåœ¨æ¨¡æ¿ä¸­éœ€è¦ä¸æ­¢ä¸€æ¬¡è¿™æ ·çš„è®¡ç®—ï¼Œæˆ‘ä»¬å¯ä¸æƒ³å°†è¿™æ ·çš„ä»£ç åœ¨æ¨¡æ¿é‡Œé‡å¤å¥½å¤šéã€‚ å› æ­¤æˆ‘ä»¬æ¨èä½¿ç”¨è®¡ç®—å±æ€§æ¥æè¿°ä¾èµ–å“åº”å¼çŠ¶æ€çš„å¤æ‚é€»è¾‘ã€‚è¿™æ˜¯é‡æ„åçš„ç¤ºä¾‹ï¼š 12345678910111213141516171819202122&lt;script setup&gt;import &#123; reactive, computed &#125; from &#x27;vue&#x27;const author = reactive(&#123; name: &#x27;John Doe&#x27;, books: [ &#x27;Vue 2 - Advanced Guide&#x27;, &#x27;Vue 3 - Basic Guide&#x27;, &#x27;Vue 4 - The Mystery&#x27; ]&#125;)// ä¸€ä¸ªè®¡ç®—å±æ€§ refconst publishedBooksMessage = computed(() =&gt; &#123; return author.books.length &gt; 0 ? &#x27;Yes&#x27; : &#x27;No&#x27;&#125;)&lt;/script&gt;&lt;template&gt; &lt;p&gt;Has published books:&lt;/p&gt; &lt;span&gt;&#123;&#123; publishedBooksMessage &#125;&#125;&lt;/span&gt;&lt;/template&gt; æˆ‘ä»¬åœ¨è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªè®¡ç®—å±æ€§ publishedBooksMessageã€‚computed() æ–¹æ³•æœŸæœ›æ¥æ”¶ä¸€ä¸ª getter å‡½æ•°ï¼Œè¿”å›å€¼ä¸ºä¸€ä¸ªè®¡ç®—å±æ€§ refã€‚å’Œå…¶ä»–ä¸€èˆ¬çš„ ref ç±»ä¼¼ï¼Œä½ å¯ä»¥é€šè¿‡ publishedBooksMessage.value è®¿é—®è®¡ç®—ç»“æœã€‚è®¡ç®—å±æ€§ ref ä¹Ÿä¼šåœ¨æ¨¡æ¿ä¸­è‡ªåŠ¨è§£åŒ…ï¼Œå› æ­¤åœ¨æ¨¡æ¿è¡¨è¾¾å¼ä¸­å¼•ç”¨æ—¶æ— éœ€æ·»åŠ  .valueã€‚ Vue çš„è®¡ç®—å±æ€§ä¼šè‡ªåŠ¨è¿½è¸ªå“åº”å¼ä¾èµ–ã€‚å®ƒä¼šæ£€æµ‹åˆ° publishedBooksMessage ä¾èµ–äº author.booksï¼Œæ‰€ä»¥å½“ author.books æ”¹å˜æ—¶ï¼Œä»»ä½•ä¾èµ–äº publishedBooksMessage çš„ç»‘å®šéƒ½ä¼šåŒæ—¶æ›´æ–°ã€‚ b.è®¡ç®—å±æ€§ç¼“å­˜ vs æ–¹æ³•ä½ å¯èƒ½æ³¨æ„åˆ°æˆ‘ä»¬åœ¨è¡¨è¾¾å¼ä¸­åƒè¿™æ ·è°ƒç”¨ä¸€ä¸ªå‡½æ•°ä¹Ÿä¼šè·å¾—å’Œè®¡ç®—å±æ€§ç›¸åŒçš„ç»“æœï¼š 1&lt;p&gt;&#123;&#123; calculateBooksMessage() &#125;&#125;&lt;/p&gt; 1234// ç»„ä»¶ä¸­function calculateBooksMessage() &#123; return author.books.length &gt; 0 ? &#x27;Yes&#x27; : &#x27;No&#x27;&#125; è‹¥æˆ‘ä»¬å°†åŒæ ·çš„å‡½æ•°å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•è€Œä¸æ˜¯è®¡ç®—å±æ€§ï¼Œä¸¤ç§æ–¹å¼åœ¨ç»“æœä¸Šç¡®å®æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œç„¶è€Œï¼Œä¸åŒä¹‹å¤„åœ¨äºè®¡ç®—å±æ€§å€¼ä¼šåŸºäºå…¶å“åº”å¼ä¾èµ–è¢«ç¼“å­˜ã€‚ä¸€ä¸ªè®¡ç®—å±æ€§ä»…ä¼šåœ¨å…¶å“åº”å¼ä¾èµ–æ›´æ–°æ—¶æ‰é‡æ–°è®¡ç®—ã€‚è¿™æ„å‘³ç€åªè¦ author.books ä¸æ”¹å˜ï¼Œæ— è®ºå¤šå°‘æ¬¡è®¿é—® publishedBooksMessage éƒ½ä¼šç«‹å³è¿”å›å…ˆå‰çš„è®¡ç®—ç»“æœï¼Œè€Œä¸ç”¨é‡å¤æ‰§è¡Œ getter å‡½æ•°ã€‚ è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆä¸‹é¢çš„è®¡ç®—å±æ€§æ°¸è¿œä¸ä¼šæ›´æ–°ï¼Œå› ä¸º Date.now() å¹¶ä¸æ˜¯ä¸€ä¸ªå“åº”å¼ä¾èµ–ï¼š 1const now = computed(() =&gt; Date.now()) ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ–¹æ³•è°ƒç”¨æ€»æ˜¯ä¼šåœ¨é‡æ¸²æŸ“å‘ç”Ÿæ—¶å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚ ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜å‘¢ï¼Ÿæƒ³è±¡ä¸€ä¸‹æˆ‘ä»¬æœ‰ä¸€ä¸ªéå¸¸è€—æ€§èƒ½çš„è®¡ç®—å±æ€§ listï¼Œéœ€è¦å¾ªç¯ä¸€ä¸ªå·¨å¤§çš„æ•°ç»„å¹¶åšè®¸å¤šè®¡ç®—é€»è¾‘ï¼Œå¹¶ä¸”å¯èƒ½ä¹Ÿæœ‰å…¶ä»–è®¡ç®—å±æ€§ä¾èµ–äº listã€‚æ²¡æœ‰ç¼“å­˜çš„è¯ï¼Œæˆ‘ä»¬ä¼šé‡å¤æ‰§è¡Œéå¸¸å¤šæ¬¡ list çš„ getterï¼Œç„¶è€Œè¿™å®é™…ä¸Šæ²¡æœ‰å¿…è¦ï¼å¦‚æœä½ ç¡®å®šä¸éœ€è¦ç¼“å­˜ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨æ–¹æ³•è°ƒç”¨ã€‚ c.å¯å†™è®¡ç®—å±æ€§è®¡ç®—å±æ€§é»˜è®¤æ˜¯åªè¯»çš„ã€‚å½“ä½ å°è¯•ä¿®æ”¹ä¸€ä¸ªè®¡ç®—å±æ€§æ—¶ï¼Œä½ ä¼šæ”¶åˆ°ä¸€ä¸ªè¿è¡Œæ—¶è­¦å‘Šã€‚åªåœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸­ä½ å¯èƒ½æ‰éœ€è¦ç”¨åˆ°â€œå¯å†™â€çš„å±æ€§ï¼Œä½ å¯ä»¥é€šè¿‡åŒæ—¶æä¾› getter å’Œ setter æ¥åˆ›å»ºï¼š 123456789101112131415161718&lt;script setup&gt;import &#123; ref, computed &#125; from &#x27;vue&#x27;const firstName = ref(&#x27;John&#x27;)const lastName = ref(&#x27;Doe&#x27;)const fullName = computed(&#123; // getter get() &#123; return firstName.value + &#x27; &#x27; + lastName.value &#125;, // setter set(newValue) &#123; // æ³¨æ„ï¼šæˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯è§£æ„èµ‹å€¼è¯­æ³• [firstName.value, lastName.value] = newValue.split(&#x27; &#x27;) &#125;&#125;)&lt;/script&gt; ç°åœ¨å½“ä½ å†è¿è¡Œ fullName.value = &#39;John Doe&#39; æ—¶ï¼Œsetter ä¼šè¢«è°ƒç”¨è€Œ firstName å’Œ lastName ä¼šéšä¹‹æ›´æ–°ã€‚ sogaå¥½ç¥å¥‡ ä»Šå¤©å­¦åˆ°è¿™é‡Œï¼Œä¸‹è¯¾ï¼","categories":[{"name":"å‰ç«¯å­¦ä¹ ","slug":"å‰ç«¯å­¦ä¹ ","permalink":"https://snowman12137.github.io/categories/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"å‰ç«¯å­¦ä¹ ,VUE","slug":"å‰ç«¯å­¦ä¹ -VUE","permalink":"https://snowman12137.github.io/tags/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0-VUE/"}],"author":"Sn0wma1n"},{"title":"VUEå­¦ä¹ (ä¸€)","slug":"VUEå­¦ä¹ -ä¸€-62f62110128e4885b6e51feca4bc7f6e","date":"2024-02-02T16:00:00.000Z","updated":"2024-02-06T18:24:04.967Z","comments":true,"path":"2024/02/03/VUEå­¦ä¹ -ä¸€-62f62110128e4885b6e51feca4bc7f6e/","link":"","permalink":"https://snowman12137.github.io/2024/02/03/VUE%E5%AD%A6%E4%B9%A0-%E4%B8%80-62f62110128e4885b6e51feca4bc7f6e/","excerpt":"","text":"VUEå­¦ä¹ (ä¸€)æ•™ç¨‹æ¥è‡ªhttps://cn.vuejs.org/tutorial https://cn.vuejs.org/guide/essentials/application.html 1.åˆ›å»ºä¸€ä¸ªVUEåº”ç”¨1npm create vue@latest ç„¶åå®‰è£…ä¾èµ–å¹¶å¯åŠ¨æœåŠ¡å™¨ 123cd &lt;your-project-name&gt;npm installnpm run dev installé¡µé¢å¡äº†å¾ˆä¹…ï¼Œåº”è¯¥æ˜¯æ²¡æ¢æº 123456// é…ç½®nmpä»£ç†æ¥æé«˜é€Ÿåº¦ï¼Œå¦‚è®¾ç½®æ·˜å®é•œåƒnpm config set registry https://registry.npm.taobao.org // æŸ¥çœ‹é…ç½®æ˜¯å¦æˆåŠŸnpm config get registry // æˆåŠŸåé‡æ–°npm installå®‰è£…npm install 2.å£°æ˜å¼æ¸²æŸ“ä½ åœ¨ç¼–è¾‘å™¨ä¸­çœ‹åˆ°çš„æ˜¯ä¸€ä¸ª Vue å•æ–‡ä»¶ç»„ä»¶ (Single-File Componentï¼Œç¼©å†™ä¸º SFC)ã€‚SFC æ˜¯ä¸€ç§å¯å¤ç”¨çš„ä»£ç ç»„ç»‡å½¢å¼ï¼Œå®ƒå°†ä»å±äºåŒä¸€ä¸ªç»„ä»¶çš„ HTMLã€CSS å’Œ JavaScript å°è£…åœ¨ä½¿ç”¨ .vue åç¼€çš„æ–‡ä»¶ä¸­ã€‚ Vue çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯å£°æ˜å¼æ¸²æŸ“ï¼šé€šè¿‡æ‰©å±•äºæ ‡å‡† HTML çš„æ¨¡æ¿è¯­æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ® JavaScript çš„çŠ¶æ€æ¥æè¿° HTML åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚å½“çŠ¶æ€æ”¹å˜æ—¶ï¼ŒHTML ä¼šè‡ªåŠ¨æ›´æ–°ã€‚ èƒ½åœ¨æ”¹å˜æ—¶è§¦å‘æ›´æ–°çš„çŠ¶æ€è¢«ç§°ä½œæ˜¯å“åº”å¼çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Vue çš„ reactive() API æ¥å£°æ˜å“åº”å¼çŠ¶æ€ã€‚ç”± reactive() åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯ JavaScript **Proxy**ï¼Œå…¶è¡Œä¸ºä¸æ™®é€šå¯¹è±¡ä¸€æ ·ï¼š 123456import &#123; reactive &#125; from &#x27;vue&#x27;const counter = reactive(&#123; count: 0&#125;)console.log(counter.count) // 0counter.count++ reactive() åªé€‚ç”¨äºå¯¹è±¡ (åŒ…æ‹¬æ•°ç»„å’Œå†…ç½®ç±»å‹ï¼Œå¦‚ Map å’Œ Set)ã€‚è€Œå¦ä¸€ä¸ª API ref() åˆ™å¯ä»¥æ¥å—ä»»ä½•å€¼ç±»å‹ã€‚ref ä¼šè¿”å›ä¸€ä¸ªåŒ…è£¹å¯¹è±¡ï¼Œå¹¶åœ¨ .value å±æ€§ä¸‹æš´éœ²å†…éƒ¨å€¼ã€‚ 1234import &#123; ref &#125; from &#x27;vue&#x27;const message = ref(&#x27;Hello World!&#x27;)console.log(message.value) // &quot;Hello World!&quot;message.value = &#x27;Changed&#x27; 3.Attributeç»‘å®šåœ¨ Vue ä¸­ï¼Œmustache è¯­æ³• (å³åŒå¤§æ‹¬å·) åªèƒ½ç”¨äºæ–‡æœ¬æ’å€¼ã€‚ä¸ºäº†ç»™ attribute ç»‘å®šä¸€ä¸ªåŠ¨æ€å€¼ï¼Œéœ€è¦ä½¿ç”¨ v-bind æŒ‡ä»¤ï¼š 1&lt;div v-bind:id=&quot;dynamicId&quot;&gt;&lt;/div&gt; å…¶æ˜¯ç”± v- å¼€å¤´çš„ä¸€ç§ç‰¹æ®Š attributeã€‚å®ƒä»¬æ˜¯ Vue æ¨¡æ¿è¯­æ³•çš„ä¸€éƒ¨åˆ†ã€‚å’Œæ–‡æœ¬æ’å€¼ç±»ä¼¼ï¼ŒæŒ‡ä»¤çš„å€¼æ˜¯å¯ä»¥è®¿é—®ç»„ä»¶çŠ¶æ€çš„ JavaScript è¡¨è¾¾å¼ã€‚ å†’å·åé¢çš„éƒ¨åˆ† (:id) æ˜¯æŒ‡ä»¤çš„â€œå‚æ•°â€ã€‚æ­¤å¤„ï¼Œå…ƒç´ çš„ id attribute å°†ä¸ç»„ä»¶çŠ¶æ€é‡Œçš„ dynamicId å±æ€§ä¿æŒåŒæ­¥ã€‚ ç”±äº v-bind ä½¿ç”¨åœ°éå¸¸é¢‘ç¹ï¼Œå®ƒæœ‰ä¸€ä¸ªä¸“é—¨çš„ç®€å†™è¯­æ³•ï¼š 1&lt;div :id=&quot;dynamicId&quot;&gt;&lt;/div&gt; 4.äº‹ä»¶ç›‘å¬æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ v-on æŒ‡ä»¤ç›‘å¬ DOM äº‹ä»¶ï¼š 1&lt;button v-on:click=&quot;increment&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt; å› ä¸ºå…¶ç»å¸¸ä½¿ç”¨ï¼Œv-on ä¹Ÿæœ‰ä¸€ä¸ªç®€å†™è¯­æ³•ï¼š 1&lt;button @click=&quot;increment&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/button&gt; æ­¤å¤„ï¼Œincrement å¼•ç”¨äº†ä¸€ä¸ªåœ¨ &lt;script setup&gt; ä¸­å£°æ˜çš„å‡½æ•°ï¼š 12345678&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;const count = ref(0)function increment() &#123; // æ›´æ–°ç»„ä»¶çŠ¶æ€ count.value++&#125;&lt;/script&gt; åœ¨å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ ref æ¥æ›´æ–°ç»„ä»¶çŠ¶æ€ã€‚ 5.è¡¨å•ç»‘å®šæˆ‘ä»¬å¯ä»¥åŒæ—¶ä½¿ç”¨ v-bind å’Œ v-on æ¥åœ¨è¡¨å•çš„è¾“å…¥å…ƒç´ ä¸Šåˆ›å»ºåŒå‘ç»‘å®šï¼š 1&lt;input :value=&quot;text&quot; @input=&quot;onInput&quot;&gt; 12345function onInput(e) &#123; // v-on å¤„ç†å‡½æ•°ä¼šæ¥æ”¶åŸç”Ÿ DOM äº‹ä»¶ // ä½œä¸ºå…¶å‚æ•°ã€‚ text.value = e.target.value&#125; è¯•ç€åœ¨æ–‡æœ¬æ¡†é‡Œè¾“å…¥â€”â€”ä½ ä¼šçœ‹åˆ° &lt;p&gt; é‡Œçš„æ–‡æœ¬ä¹Ÿéšç€ä½ çš„è¾“å…¥æ›´æ–°äº†ã€‚ ä¸ºäº†ç®€åŒ–åŒå‘ç»‘å®šï¼ŒVue æä¾›äº†ä¸€ä¸ª v-model æŒ‡ä»¤ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸Šè¿°æ“ä½œçš„è¯­æ³•ç³–ï¼š 1&lt;input v-model=&quot;text&quot;&gt; v-model ä¼šå°†è¢«ç»‘å®šçš„å€¼ä¸ &lt;input&gt; çš„å€¼è‡ªåŠ¨åŒæ­¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸å¿…å†ä½¿ç”¨äº‹ä»¶å¤„ç†å‡½æ•°äº†ã€‚ 6.æ¡ä»¶æ¸²æŸ“æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ v-if æŒ‡ä»¤æ¥æœ‰æ¡ä»¶åœ°æ¸²æŸ“å…ƒç´ ï¼š 1&lt;h1 v-if=&quot;awesome&quot;&gt;Vue is awesome!&lt;/h1&gt; è¿™ä¸ª &lt;h1&gt; æ ‡ç­¾åªä¼šåœ¨ awesome çš„å€¼ä¸ºçœŸå€¼ (Truthy) æ—¶æ¸²æŸ“ã€‚è‹¥ awesome æ›´æ”¹ä¸º**å‡å€¼ (Falsy)**ï¼Œå®ƒå°†è¢«ä» DOM ä¸­ç§»é™¤ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ v-else å’Œ v-else-if æ¥è¡¨ç¤ºå…¶ä»–çš„æ¡ä»¶åˆ†æ”¯ï¼š 12&lt;h1 v-if=&quot;awesome&quot;&gt;Vue is awesome!&lt;/h1&gt;&lt;h1 v-else&gt;Oh no ğŸ˜¢&lt;/h1&gt; ç°åœ¨ï¼Œç¤ºä¾‹ç¨‹åºåŒæ—¶å±•ç¤ºäº†ä¸¤ä¸ª &lt;h1&gt; æ ‡ç­¾ï¼Œå¹¶ä¸”æŒ‰é’®ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚å°è¯•ç»™å®ƒä»¬æ·»åŠ  v-if å’Œ v-else æŒ‡ä»¤ï¼Œå¹¶å®ç° toggle() æ–¹æ³•ï¼Œè®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æŒ‰é’®åœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ã€‚ 7.åˆ—è¡¨æ¸²æŸ“æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ v-for æŒ‡ä»¤æ¥æ¸²æŸ“ä¸€ä¸ªåŸºäºæºæ•°ç»„çš„åˆ—è¡¨ï¼š 12345&lt;ul&gt; &lt;li v-for=&quot;todo in todos&quot; :key=&quot;todo.id&quot;&gt; &#123;&#123; todo.text &#125;&#125; &lt;/li&gt;&lt;/ul&gt; è¿™é‡Œçš„ todo æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œè¡¨ç¤ºå½“å‰æ­£åœ¨è¿­ä»£çš„æ•°ç»„å…ƒç´ ã€‚å®ƒåªèƒ½åœ¨ v-for æ‰€ç»‘å®šçš„å…ƒç´ ä¸Šæˆ–æ˜¯å…¶å†…éƒ¨è®¿é—®ï¼Œå°±åƒå‡½æ•°çš„ä½œç”¨åŸŸä¸€æ ·ã€‚ æ³¨æ„ï¼Œæˆ‘ä»¬è¿˜ç»™æ¯ä¸ª todo å¯¹è±¡è®¾ç½®äº†å”¯ä¸€çš„ idï¼Œå¹¶ä¸”å°†å®ƒä½œä¸ºç‰¹æ®Šçš„ [key attribute](https://cn.vuejs.org/api/built-in-special-attributes.html#key) ç»‘å®šåˆ°æ¯ä¸ª &lt;li&gt;ã€‚key ä½¿å¾— Vue èƒ½å¤Ÿç²¾ç¡®çš„ç§»åŠ¨æ¯ä¸ª &lt;li&gt;ï¼Œä»¥åŒ¹é…å¯¹åº”çš„å¯¹è±¡åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚ æ›´æ–°åˆ—è¡¨æœ‰ä¸¤ç§æ–¹å¼ï¼š åœ¨æºæ•°ç»„ä¸Šè°ƒç”¨å˜æ›´æ–¹æ³•ï¼š 1todos.value.push(newTodo) 2.ä½¿ç”¨æ–°çš„æ•°ç»„æ›¿ä»£åŸæ•°ç»„ï¼š 1todos.value = todos.value.filter(/* ... */) å¯¹ä»¥ä¸‹å‡½æ•°è¿›è¡Œè§£æ v-modle-&gt;:+@è¡¨å•ç»‘å®š v-on-&gt;@äº‹ä»¶ç›‘å¬ 1234567891011121314151617181920212223242526272829303132&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;// ç»™æ¯ä¸ª todo å¯¹è±¡ä¸€ä¸ªå”¯ä¸€çš„ idlet id = 0const newTodo = ref(&#x27;&#x27;) //åˆ›å»ºå¯¹è±¡const todos = ref([ //åˆ›å»ºæ•°ç»„ &#123; id: id++, text: &#x27;Learn HTML&#x27; &#125;, &#123; id: id++, text: &#x27;Learn JavaScript&#x27; &#125;, &#123; id: id++, text: &#x27;Learn Vue&#x27; &#125;])function addTodo() &#123;//æ·»åŠ å‡½æ•° todos.value.push(&#123; id: id++, text: newTodo.value &#125;) newTodo.value = &#x27;&#x27;&#125;function removeTodo(todo) &#123;//ç§»é™¤å‡½æ•°//filteræ˜¯JavaScriptæ•°ç»„ä¸­è‡ªå¸¦çš„æ–¹æ³•ï¼Œå½“è¿”å›å€¼ä¸ºçœŸæ˜¯ï¼Œè¿”å›ï¼›å¹¶ä¸”ä¸æ”¹å˜åŸæ•°ç»„//()=&gt;æ˜¯ç®­å¤´å‡½æ•°ï¼Œè¿™æ˜¯æ‰€ç”¨çš„å½¢å¼æ˜¯(param) =&gt; expression todos.value = todos.value.filter((t) =&gt; t !== todo)&#125;&lt;/script&gt;&lt;template&gt; &lt;form @submit.prevent=&quot;addTodo&quot;&gt;//å¯¹addTodoè¿›è¡Œç»‘å®šï¼Œ.preventè¡¨ç¤ºé˜»æ­¢è¡¨å•çš„é»˜è®¤æäº¤è¡Œä¸º &lt;input v-model=&quot;newTodo&quot;&gt; //ç»‘å®šè¡¨å•newTodo &lt;button&gt;Add Todo&lt;/button&gt; &lt;/form&gt; &lt;ul&gt; &lt;li v-for=&quot;todo in todos&quot; :key=&quot;todo.id&quot;&gt;//è¿›è¡Œåˆ—è¡¨æ¸²æŸ“ &#123;&#123; todo.text &#125;&#125; &lt;button @click=&quot;removeTodo(todo)&quot;&gt;X&lt;/button&gt;//æ¸…é™¤åŠ¨ä½œ &lt;/li&gt; &lt;/ul&gt;&lt;/template&gt; 8.è®¡ç®—å±æ€§è®©æˆ‘ä»¬åœ¨ä¸Šä¸€æ­¥çš„ todo åˆ—è¡¨åŸºç¡€ä¸Šç»§ç»­ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»ç»™æ¯ä¸€ä¸ª todo æ·»åŠ äº†åˆ‡æ¢åŠŸèƒ½ã€‚è¿™æ˜¯é€šè¿‡ç»™æ¯ä¸€ä¸ª todo å¯¹è±¡æ·»åŠ  done å±æ€§æ¥å®ç°çš„ï¼Œå¹¶ä¸”ä½¿ç”¨äº† v-model å°†å…¶ç»‘å®šåˆ°å¤é€‰æ¡†ä¸Šï¼š 1234&lt;li v-for=&quot;todo in todos&quot;&gt; &lt;input type=&quot;checkbox&quot; v-model=&quot;todo.done&quot;&gt; ...&lt;/li&gt; ä¸‹ä¸€ä¸ªå¯ä»¥æ·»åŠ çš„æ”¹è¿›æ˜¯éšè—å·²ç»å®Œæˆçš„ todoã€‚æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªèƒ½å¤Ÿåˆ‡æ¢ hideCompleted çŠ¶æ€çš„æŒ‰é’®ã€‚ä½†æ˜¯åº”è¯¥å¦‚ä½•åŸºäºçŠ¶æ€æ¸²æŸ“ä¸åŒçš„åˆ—è¡¨é¡¹å‘¢ï¼Ÿ ä»‹ç»ä¸€ä¸ªæ–° APIï¼š**[computed()](https://cn.vuejs.org/guide/essentials/computed.html)**ã€‚å®ƒå¯ä»¥è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè®¡ç®—å±æ€§ refï¼Œè¿™ä¸ª ref ä¼šåŠ¨æ€åœ°æ ¹æ®å…¶ä»–å“åº”å¼æ•°æ®æºæ¥è®¡ç®—å…¶ .valueï¼š 123456789101112131415161718192021222324252627282930313233343536373839&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;let id = 0const newTodo = ref(&#x27;&#x27;)const hideCompleted = ref(false)const todos = ref([ &#123; id: id++, text: &#x27;Learn HTML&#x27;, done: true &#125;, &#123; id: id++, text: &#x27;Learn JavaScript&#x27;, done: true &#125;, &#123; id: id++, text: &#x27;Learn Vue&#x27;, done: false &#125;])function addTodo() &#123; todos.value.push(&#123; id: id++, text: newTodo.value, done: false &#125;) newTodo.value = &#x27;&#x27;&#125;function removeTodo(todo) &#123; todos.value = todos.value.filter((t) =&gt; t !== todo)&#125;&lt;/script&gt;&lt;template&gt; &lt;form @submit.prevent=&quot;addTodo&quot;&gt; &lt;input v-model=&quot;newTodo&quot;&gt; &lt;button&gt;Add Todo&lt;/button&gt; &lt;/form&gt; &lt;ul&gt; &lt;li v-for=&quot;todo in todos&quot; :key=&quot;todo.id&quot;&gt; &lt;input type=&quot;checkbox&quot; v-model=&quot;todo.done&quot;&gt; &lt;span :class=&quot;&#123; done: todo.done &#125;&quot;&gt;&#123;&#123; todo.text &#125;&#125;&lt;/span&gt; &lt;button @click=&quot;removeTodo(todo)&quot;&gt;X&lt;/button&gt; &lt;/li&gt; &lt;/ul&gt; &lt;button @click=&quot;hideCompleted = !hideCompleted&quot;&gt; &#123;&#123; hideCompleted ? &#x27;Show all&#x27; : &#x27;Hide completed&#x27; &#125;&#125; &lt;/button&gt;&lt;/template&gt;&lt;style&gt;.done &#123; text-decoration: line-through;&#125;&lt;/style&gt; è®¡ç®—å±æ€§ä¼šè‡ªåŠ¨è·Ÿè¸ªå…¶è®¡ç®—ä¸­æ‰€ä½¿ç”¨çš„åˆ°çš„å…¶ä»–å“åº”å¼çŠ¶æ€ï¼Œå¹¶å°†å®ƒä»¬æ”¶é›†ä¸ºè‡ªå·±çš„ä¾èµ–ã€‚è®¡ç®—ç»“æœä¼šè¢«ç¼“å­˜ï¼Œå¹¶åªæœ‰åœ¨å…¶ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šè¢«è‡ªåŠ¨æ›´æ–°ã€‚ 9.ç”Ÿå‘½å‘¨æœŸå’Œæ¨¡æ¿å¼•ç”¨ç›®å‰ä¸ºæ­¢ï¼ŒVue ä¸ºæˆ‘ä»¬å¤„ç†äº†æ‰€æœ‰çš„ DOM æ›´æ–°ï¼Œè¿™è¦å½’åŠŸäºå“åº”æ€§å’Œå£°æ˜å¼æ¸²æŸ“ã€‚ç„¶è€Œï¼Œæœ‰æ—¶æˆ‘ä»¬ä¹Ÿä¼šä¸å¯é¿å…åœ°éœ€è¦æ‰‹åŠ¨æ“ä½œ DOMã€‚ è¿™æ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¨¡æ¿å¼•ç”¨â€”â€”ä¹Ÿå°±æ˜¯æŒ‡å‘æ¨¡æ¿ä¸­ä¸€ä¸ª DOM å…ƒç´ çš„ refã€‚æˆ‘ä»¬éœ€è¦é€šè¿‡è¿™ä¸ªç‰¹æ®Šçš„ [ref](https://cn.vuejs.org/api/built-in-special-attributes.html#ref) attribute æ¥å®ç°æ¨¡æ¿å¼•ç”¨ï¼š 1&lt;p ref=&quot;pElementRef&quot;&gt;hello&lt;/p&gt; è¦è®¿é—®è¯¥å¼•ç”¨ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ä¸€ä¸ªåŒåçš„ refï¼š 1const pElementRef = ref(null) æ³¨æ„è¿™ä¸ª ref ä½¿ç”¨ null å€¼æ¥åˆå§‹åŒ–ã€‚è¿™æ˜¯å› ä¸ºå½“ &lt;script setup&gt; æ‰§è¡Œæ—¶ï¼ŒDOM å…ƒç´ è¿˜ä¸å­˜åœ¨ã€‚æ¨¡æ¿å¼•ç”¨ ref åªèƒ½åœ¨ç»„ä»¶æŒ‚è½½åè®¿é—®ã€‚ è¦åœ¨æŒ‚è½½ä¹‹åæ‰§è¡Œä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ onMounted() å‡½æ•°ï¼š 12345import &#123; onMounted &#125; from &#x27;vue&#x27;onMounted(() =&gt; &#123; // æ­¤æ—¶ç»„ä»¶å·²ç»æŒ‚è½½ã€‚&#125;) è¿™è¢«ç§°ä¸ºç”Ÿå‘½å‘¨æœŸé’©å­â€”â€”å®ƒå…è®¸æˆ‘ä»¬æ³¨å†Œä¸€ä¸ªåœ¨ç»„ä»¶çš„ç‰¹å®šç”Ÿå‘½å‘¨æœŸè°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚è¿˜æœ‰ä¸€äº›å…¶ä»–çš„é’©å­å¦‚ onUpdated å’Œ onUnmountedã€‚ 10ä¾¦å¬å™¨æœ‰æ—¶æˆ‘ä»¬éœ€è¦å“åº”æ€§åœ°æ‰§è¡Œä¸€äº›â€œå‰¯ä½œç”¨â€â€”â€”ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªæ•°å­—æ”¹å˜æ—¶å°†å…¶è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¾¦å¬å™¨æ¥å®ç°å®ƒï¼š 12345678import &#123; ref, watch &#125; from &#x27;vue&#x27;const count = ref(0)watch(count, (newCount) =&gt; &#123; // æ²¡é”™ï¼Œconsole.log() æ˜¯ä¸€ä¸ªå‰¯ä½œç”¨ console.log(`new count is: $&#123;newCount&#125;`)&#125;) watch() å¯ä»¥ç›´æ¥ä¾¦å¬ä¸€ä¸ª refï¼Œå¹¶ä¸”åªè¦ count çš„å€¼æ”¹å˜å°±ä¼šè§¦å‘å›è°ƒã€‚watch() ä¹Ÿå¯ä»¥ä¾¦å¬å…¶ä»–ç±»å‹çš„æ•°æ®æºã€‚ ä¸€ä¸ªæ¯”åœ¨æ§åˆ¶å°è¾“å‡ºæ›´åŠ å®é™…çš„ä¾‹å­æ˜¯å½“ ID æ”¹å˜æ—¶æŠ“å–æ–°çš„æ•°æ®ã€‚åœ¨å³è¾¹çš„ä¾‹å­ä¸­å°±æ˜¯è¿™æ ·ä¸€ä¸ªç»„ä»¶ã€‚è¯¥ç»„ä»¶è¢«æŒ‚è½½æ—¶ï¼Œä¼šä»æ¨¡æ‹Ÿ API ä¸­æŠ“å– todo æ•°æ®ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªæŒ‰é’®å¯ä»¥æ”¹å˜è¦æŠ“å–çš„ todo çš„ IDã€‚ç°åœ¨ï¼Œå°è¯•å®ç°ä¸€ä¸ªä¾¦å¬å™¨ï¼Œä½¿å¾—ç»„ä»¶èƒ½å¤Ÿåœ¨æŒ‰é’®è¢«ç‚¹å‡»æ—¶æŠ“å–æ–°çš„ todo é¡¹ç›®ã€‚ 1234567891011121314151617181920212223&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;const todoId = ref(1)const todoData = ref(null)async function fetchData() &#123; todoData.value = null const res = await fetch( `https://jsonplaceholder.typicode.com/todos/$&#123;todoId.value&#125;` ) todoData.value = await res.json()&#125;fetchData()&lt;/script&gt;&lt;template&gt; &lt;p&gt;Todo id: &#123;&#123; todoId &#125;&#125;&lt;/p&gt; &lt;button @click=&quot;todoId++&quot; :disabled=&quot;!todoData&quot;&gt;Fetch next todo&lt;/button&gt; &lt;p v-if=&quot;!todoData&quot;&gt;Loading...&lt;/p&gt; &lt;pre v-else&gt;&#123;&#123; todoData &#125;&#125;&lt;/pre&gt;&lt;/template&gt; 11ç»„ä»¶ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†å•ä¸ªç»„ä»¶ã€‚çœŸæ­£çš„ Vue åº”ç”¨å¾€å¾€æ˜¯ç”±åµŒå¥—ç»„ä»¶åˆ›å»ºçš„ã€‚ çˆ¶ç»„ä»¶å¯ä»¥åœ¨æ¨¡æ¿ä¸­æ¸²æŸ“å¦ä¸€ä¸ªç»„ä»¶ä½œä¸ºå­ç»„ä»¶ã€‚è¦ä½¿ç”¨å­ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¯¼å…¥å®ƒï¼š 1import ChildComp from &#x27;./ChildComp.vue&#x27; ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ç»„ä»¶ï¼Œå°±åƒè¿™æ ·ï¼š 1&lt;ChildComp /&gt; 12 Propså­ç»„ä»¶å¯ä»¥é€šè¿‡ props ä»çˆ¶ç»„ä»¶æ¥å—åŠ¨æ€æ•°æ®ã€‚é¦–å…ˆï¼Œéœ€è¦å£°æ˜å®ƒæ‰€æ¥å—çš„ propsï¼š 123456&lt;!-- ChildComp.vue --&gt;&lt;script setup&gt;const props = defineProps(&#123; msg: String&#125;)&lt;/script&gt; æ³¨æ„ defineProps() æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å®ï¼Œå¹¶ä¸éœ€è¦å¯¼å…¥ã€‚ä¸€æ—¦å£°æ˜ï¼Œmsg prop å°±å¯ä»¥åœ¨å­ç»„ä»¶çš„æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚å®ƒä¹Ÿå¯ä»¥é€šè¿‡ defineProps() æ‰€è¿”å›çš„å¯¹è±¡åœ¨ JavaScript ä¸­è®¿é—®ã€‚ çˆ¶ç»„ä»¶å¯ä»¥åƒå£°æ˜ HTML attributes ä¸€æ ·ä¼ é€’ propsã€‚è‹¥è¦ä¼ é€’åŠ¨æ€å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ v-bind è¯­æ³•ï¼š 1&lt;ChildComp :msg=&quot;greeting&quot; /&gt; 12345678910&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;import ChildComp from &#x27;./ChildComp.vue&#x27;const greeting = ref(&#x27;Hello from parent&#x27;)&lt;/script&gt;&lt;template&gt; &lt;ChildComp :msg=&quot;greeting&quot; /&gt;&lt;/template&gt; 13 Emitsé™¤äº†æ¥æ”¶ propsï¼Œå­ç»„ä»¶è¿˜å¯ä»¥å‘çˆ¶ç»„ä»¶è§¦å‘äº‹ä»¶ï¼š 1234567&lt;script setup&gt;// å£°æ˜è§¦å‘çš„äº‹ä»¶const emit = defineEmits([&#x27;response&#x27;])// å¸¦å‚æ•°è§¦å‘emit(&#x27;response&#x27;, &#x27;hello from child&#x27;)&lt;/script&gt; emit() çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶çš„åç§°ã€‚å…¶ä»–æ‰€æœ‰å‚æ•°éƒ½å°†ä¼ é€’ç»™äº‹ä»¶ç›‘å¬å™¨ã€‚ çˆ¶ç»„ä»¶å¯ä»¥ä½¿ç”¨ v-on ç›‘å¬å­ç»„ä»¶è§¦å‘çš„äº‹ä»¶â€”â€”è¿™é‡Œçš„å¤„ç†å‡½æ•°æ¥æ”¶äº†å­ç»„ä»¶è§¦å‘äº‹ä»¶æ—¶çš„é¢å¤–å‚æ•°å¹¶å°†å®ƒèµ‹å€¼ç»™äº†æœ¬åœ°çŠ¶æ€ï¼š 1&lt;ChildComp @response=&quot;(msg) =&gt; childMsg = msg&quot; /&gt; 1234567891011&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;import ChildComp from &#x27;./ChildComp.vue&#x27;const childMsg = ref(&#x27;No child msg yet&#x27;)&lt;/script&gt;&lt;template&gt; &lt;ChildComp @response=&quot;(msg) =&gt; childMsg = msg&quot; /&gt; &lt;p&gt;&#123;&#123; childMsg &#125;&#125;&lt;/p&gt;&lt;/template&gt; 14 æ’æ§½é™¤äº†é€šè¿‡ props ä¼ é€’æ•°æ®å¤–ï¼Œçˆ¶ç»„ä»¶è¿˜å¯ä»¥é€šè¿‡æ’æ§½ (slots) å°†æ¨¡æ¿ç‰‡æ®µä¼ é€’ç»™å­ç»„ä»¶ï¼š 123&lt;ChildComp&gt; This is some slot content!&lt;/ChildComp&gt; åœ¨å­ç»„ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ &lt;slot&gt; å…ƒç´ ä½œä¸ºæ’æ§½å‡ºå£ (slot outlet) æ¸²æŸ“çˆ¶ç»„ä»¶ä¸­çš„æ’æ§½å†…å®¹ (slot content)ï¼š 12&lt;!-- åœ¨å­ç»„ä»¶çš„æ¨¡æ¿ä¸­ --&gt;&lt;slot/&gt; &lt;slot&gt; æ’å£ä¸­çš„å†…å®¹å°†è¢«å½“ä½œâ€œé»˜è®¤â€å†…å®¹ï¼šå®ƒä¼šåœ¨çˆ¶ç»„ä»¶æ²¡æœ‰ä¼ é€’ä»»ä½•æ’æ§½å†…å®¹æ—¶æ˜¾ç¤ºï¼š 1&lt;slot&gt;Fallback content&lt;/slot&gt; ç°åœ¨æˆ‘ä»¬æ²¡æœ‰ç»™ &lt;ChildComp&gt; ä¼ é€’ä»»ä½•æ’æ§½å†…å®¹ï¼Œæ‰€ä»¥ä½ å°†çœ‹åˆ°é»˜è®¤å†…å®¹ã€‚è®©æˆ‘ä»¬åˆ©ç”¨çˆ¶ç»„ä»¶çš„ msg çŠ¶æ€ä¸ºå­ç»„ä»¶æä¾›ä¸€äº›æ’æ§½å†…å®¹å§ã€‚","categories":[{"name":"å‰ç«¯å­¦ä¹ ","slug":"å‰ç«¯å­¦ä¹ ","permalink":"https://snowman12137.github.io/categories/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"å‰ç«¯å­¦ä¹ ,VUE","slug":"å‰ç«¯å­¦ä¹ -VUE","permalink":"https://snowman12137.github.io/tags/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0-VUE/"}],"author":"Sn0wma1n"},{"title":"Node.jså­¦ä¹ ï¼ˆä¸‰ï¼‰","slug":"Node-jså­¦ä¹ ï¼ˆä¸‰ï¼‰","date":"2024-02-01T16:00:00.000Z","updated":"2024-02-03T17:04:09.455Z","comments":true,"path":"2024/02/02/Node-jså­¦ä¹ ï¼ˆä¸‰ï¼‰/","link":"","permalink":"https://snowman12137.github.io/2024/02/02/Node-js%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89/","excerpt":"","text":"Node.jså­¦ä¹ ï¼ˆä¸‰ï¼‰1.å·¥å…·æ¨¡å—a.OSæ¨¡å—12345678910111213141516var os = require(&quot;os&quot;);//å¼•å…¥// CPU çš„å­—èŠ‚åºconsole.log(&#x27;endianness : &#x27; + os.endianness());// æ“ä½œç³»ç»Ÿåconsole.log(&#x27;type : &#x27; + os.type());// æ“ä½œç³»ç»Ÿåconsole.log(&#x27;platform : &#x27; + os.platform());// ç³»ç»Ÿå†…å­˜æ€»é‡console.log(&#x27;total memory : &#x27; + os.totalmem() + &quot; bytes.&quot;);// æ“ä½œç³»ç»Ÿç©ºé—²å†…å­˜é‡console.log(&#x27;free memory : &#x27; + os.freemem() + &quot; bytes.&quot;); b.Pathæ¨¡å—123456789var path = require(&quot;path&quot;);// æ ¼å¼åŒ–è·¯å¾„console.log(&#x27;normalization : &#x27; + path.normalize(&#x27;/test/test1//2slashes/1slash/tab/..&#x27;));// è¿æ¥è·¯å¾„console.log(&#x27;joint path : &#x27; + path.join(&#x27;/test&#x27;, &#x27;test1&#x27;, &#x27;2slashes/1slash&#x27;, &#x27;tab&#x27;, &#x27;..&#x27;));// è½¬æ¢ä¸ºç»å¯¹è·¯å¾„console.log(&#x27;resolve : &#x27; + path.resolve(&#x27;main.js&#x27;));// è·¯å¾„ä¸­æ–‡ä»¶çš„åç¼€åconsole.log(&#x27;ext name : &#x27; + path.extname(&#x27;main.js&#x27;)); c.Netæ¨¡å—(Socket)server.jsæœåŠ¡ç«¯ 123456789101112var net = require(&#x27;net&#x27;);var server = net.createServer(function(connection) &#123; console.log(&#x27;client connected&#x27;); connection.on(&#x27;end&#x27;, function() &#123; console.log(&#x27;å®¢æˆ·ç«¯å…³é—­è¿æ¥&#x27;); &#125;); connection.write(&#x27;Hello World!\\r\\n&#x27;); connection.pipe(connection);&#125;);server.listen(8080, function() &#123; console.log(&#x27;server is listening&#x27;);&#125;); client.jså®¢æˆ·ç«¯ 1234567891011var net = require(&#x27;net&#x27;);var client = net.connect(&#123;port: 8080&#125;, function() &#123; console.log(&#x27;è¿æ¥åˆ°æœåŠ¡å™¨ï¼&#x27;); &#125;);client.on(&#x27;data&#x27;, function(data) &#123; console.log(data.toString()); client.end();&#125;);client.on(&#x27;end&#x27;, function() &#123; console.log(&#x27;æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥&#x27;);&#125;); d.DNSæ¨¡å—123456789101112var dns = require(&#x27;dns&#x27;);dns.lookup(&#x27;www.github.com&#x27;, function onLookup(err, address, family) &#123; console.log(&#x27;ip åœ°å€:&#x27;, address); dns.reverse(address, function (err, hostnames) &#123; if (err) &#123; console.log(err.stack); &#125; console.log(&#x27;åå‘è§£æ &#x27; + address + &#x27;: &#x27; + JSON.stringify(hostnames));&#125;); &#125;); æ‰§è¡Œç»“æœ 12address: 192.30.252.130reverse for 192.30.252.130: [&quot;github.com&quot;] 2.Webæ¨¡å—webåº”ç”¨æ¶æ„ Client - å®¢æˆ·ç«¯ï¼Œä¸€èˆ¬æŒ‡æµè§ˆå™¨ï¼Œæµè§ˆå™¨å¯ä»¥é€šè¿‡ HTTP åè®®å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ã€‚ Server - æœåŠ¡ç«¯ï¼Œä¸€èˆ¬æŒ‡ Web æœåŠ¡å™¨ï¼Œå¯ä»¥æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¹¶å‘å®¢æˆ·ç«¯å‘é€å“åº”æ•°æ®ã€‚ Business - ä¸šåŠ¡å±‚ï¼Œ é€šè¿‡ Web æœåŠ¡å™¨å¤„ç†åº”ç”¨ç¨‹åºï¼Œå¦‚ä¸æ•°æ®åº“äº¤äº’ï¼Œé€»è¾‘è¿ç®—ï¼Œè°ƒç”¨å¤–éƒ¨ç¨‹åºç­‰ã€‚ Data - æ•°æ®å±‚ï¼Œä¸€èˆ¬ç”±æ•°æ®åº“ç»„æˆã€‚ a.åˆ›å»ºWebæœåŠ¡å™¨ä»¥ä¸‹æ˜¯æ¼”ç¤ºä¸€ä¸ªæœ€åŸºæœ¬çš„ HTTP æœåŠ¡å™¨æ¶æ„(ä½¿ç”¨ 8080 ç«¯å£)ï¼Œåˆ›å»º server.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920212223242526272829303132333435var http = require(&#x27;http&#x27;);var fs = require(&#x27;fs&#x27;);var url = require(&#x27;url&#x27;); // åˆ›å»ºæœåŠ¡å™¨http.createServer( function (request, response) &#123; // è§£æè¯·æ±‚ï¼ŒåŒ…æ‹¬æ–‡ä»¶å var pathname = url.parse(request.url).pathname; // è¾“å‡ºè¯·æ±‚çš„æ–‡ä»¶å console.log(&quot;Request for &quot; + pathname + &quot; received.&quot;); // ä»æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–è¯·æ±‚çš„æ–‡ä»¶å†…å®¹ fs.readFile(pathname.substr(1), function (err, data) &#123; if (err) &#123; console.log(err); // HTTP çŠ¶æ€ç : 404 : NOT FOUND // Content Type: text/html response.writeHead(404, &#123;&#x27;Content-Type&#x27;: &#x27;text/html&#x27;&#125;); &#125;else&#123; // HTTP çŠ¶æ€ç : 200 : OK // Content Type: text/html response.writeHead(200, &#123;&#x27;Content-Type&#x27;: &#x27;text/html&#x27;&#125;); // å“åº”æ–‡ä»¶å†…å®¹ response.write(data.toString()); &#125; // å‘é€å“åº”æ•°æ® response.end(); &#125;); &#125;).listen(8080); // æ§åˆ¶å°ä¼šè¾“å‡ºä»¥ä¸‹ä¿¡æ¯console.log(&#x27;Server running at http://127.0.0.1:8080/&#x27;); index.html 1234567891011&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;èœé¸Ÿæ•™ç¨‹(runoob.com)&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;æˆ‘çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜&lt;/h1&gt; &lt;p&gt;æˆ‘çš„ç¬¬ä¸€ä¸ªæ®µè½ã€‚&lt;/p&gt;&lt;/body&gt;&lt;/html&gt; båˆ›å»ºWebå®¢æˆ·ç«¯åˆ›å»º 12345678910111213141516171819202122232425var http = require(&#x27;http&#x27;); // ç”¨äºè¯·æ±‚çš„é€‰é¡¹var options = &#123; host: &#x27;localhost&#x27;, port: &#x27;8080&#x27;, path: &#x27;/index.html&#x27; &#125;; // å¤„ç†å“åº”çš„å›è°ƒå‡½æ•°var callback = function(response)&#123; // ä¸æ–­æ›´æ–°æ•°æ® var body = &#x27;&#x27;; response.on(&#x27;data&#x27;, function(data) &#123; body += data; &#125;); response.on(&#x27;end&#x27;, function() &#123; // æ•°æ®æ¥æ”¶å®Œæˆ console.log(body); &#125;);&#125;// å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚var req = http.request(options, callback);req.end(); 3.Expressæ¡†æ¶Express æ˜¯ä¸€ä¸ªç®€æ´è€Œçµæ´»çš„ node.js Webåº”ç”¨æ¡†æ¶, æä¾›äº†ä¸€ç³»åˆ—å¼ºå¤§ç‰¹æ€§å¸®åŠ©ä½ åˆ›å»ºå„ç§ Web åº”ç”¨ï¼Œå’Œä¸°å¯Œçš„ HTTP å·¥å…·ã€‚ ä½¿ç”¨ Express å¯ä»¥å¿«é€Ÿåœ°æ­å»ºä¸€ä¸ªå®Œæ•´åŠŸèƒ½çš„ç½‘ç«™ã€‚ Express æ¡†æ¶æ ¸å¿ƒç‰¹æ€§ï¼š å¯ä»¥è®¾ç½®ä¸­é—´ä»¶æ¥å“åº” HTTP è¯·æ±‚ã€‚ å®šä¹‰äº†è·¯ç”±è¡¨ç”¨äºæ‰§è¡Œä¸åŒçš„ HTTP è¯·æ±‚åŠ¨ä½œã€‚ å¯ä»¥é€šè¿‡å‘æ¨¡æ¿ä¼ é€’å‚æ•°æ¥åŠ¨æ€æ¸²æŸ“ HTML é¡µé¢ã€‚ a.å®‰è£…å®‰è£… Express å¹¶å°†å…¶ä¿å­˜åˆ°ä¾èµ–åˆ—è¡¨ä¸­ï¼š 1cnpm install express --save ä»¥ä¸Šå‘½ä»¤ä¼šå°† Express æ¡†æ¶å®‰è£…åœ¨å½“å‰ç›®å½•çš„ node_modules ç›®å½•ä¸­ï¼Œ node_modules ç›®å½•ä¸‹ä¼šè‡ªåŠ¨åˆ›å»º express ç›®å½•ã€‚ä»¥ä¸‹å‡ ä¸ªé‡è¦çš„æ¨¡å—æ˜¯éœ€è¦ä¸ express æ¡†æ¶ä¸€èµ·å®‰è£…çš„ï¼š body-parser - node.js ä¸­é—´ä»¶ï¼Œç”¨äºå¤„ç† JSON, Raw, Text å’Œ URL ç¼–ç çš„æ•°æ®ã€‚ cookie-parser - è¿™å°±æ˜¯ä¸€ä¸ªè§£æCookieçš„å·¥å…·ã€‚é€šè¿‡req.cookieså¯ä»¥å–åˆ°ä¼ è¿‡æ¥çš„cookieï¼Œå¹¶æŠŠå®ƒä»¬è½¬æˆå¯¹è±¡ã€‚ multer - node.js ä¸­é—´ä»¶ï¼Œç”¨äºå¤„ç† enctype&#x3D;â€multipart&#x2F;form-dataâ€ï¼ˆè®¾ç½®è¡¨å•çš„MIMEç¼–ç ï¼‰çš„è¡¨å•æ•°æ®ã€‚ 123cnpm install body-parser --savecnpm install cookie-parser --savecnpm install multer --save b.è¯·æ±‚å’Œå“åº”Express åº”ç”¨ä½¿ç”¨å›è°ƒå‡½æ•°çš„å‚æ•°ï¼š request å’Œ response å¯¹è±¡æ¥å¤„ç†è¯·æ±‚å’Œå“åº”çš„æ•°æ®ã€‚ request å’Œ response å¯¹è±¡çš„å…·ä½“ä»‹ç»ï¼š Request å¯¹è±¡ - request å¯¹è±¡è¡¨ç¤º HTTP è¯·æ±‚ï¼ŒåŒ…å«äº†è¯·æ±‚æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå‚æ•°ï¼Œå†…å®¹ï¼ŒHTTP å¤´éƒ¨ç­‰å±æ€§ã€‚å¸¸è§å±æ€§æœ‰ï¼š req.appï¼šå½“callbackä¸ºå¤–éƒ¨æ–‡ä»¶æ—¶ï¼Œç”¨req.appè®¿é—®expressçš„å®ä¾‹ req.baseUrlï¼šè·å–è·¯ç”±å½“å‰å®‰è£…çš„URLè·¯å¾„ req.body &#x2F; req.cookiesï¼šè·å¾—ã€Œè¯·æ±‚ä¸»ä½“ã€&#x2F; Cookies req.hostname &#x2F; req.ipï¼šè·å–ä¸»æœºåå’ŒIPåœ°å€ req.originalUrlï¼šè·å–åŸå§‹è¯·æ±‚URL req.paramsï¼šè·å–è·¯ç”±çš„parameters req.pathï¼šè·å–è¯·æ±‚è·¯å¾„ req.protocolï¼šè·å–åè®®ç±»å‹ req.queryï¼šè·å–URLçš„æŸ¥è¯¢å‚æ•°ä¸² req.routeï¼šè·å–å½“å‰åŒ¹é…çš„è·¯ç”± req.subdomainsï¼šè·å–å­åŸŸå req.accepts()ï¼šæ£€æŸ¥å¯æ¥å—çš„è¯·æ±‚çš„æ–‡æ¡£ç±»å‹ req.get()ï¼šè·å–æŒ‡å®šçš„HTTPè¯·æ±‚å¤´ Response å¯¹è±¡ - response å¯¹è±¡è¡¨ç¤º HTTP å“åº”ï¼Œå³åœ¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶å‘å®¢æˆ·ç«¯å‘é€çš„ HTTP å“åº”æ•°æ®ã€‚å¸¸è§å±æ€§æœ‰ï¼š res.appï¼šåŒreq.appä¸€æ · res.append()ï¼šè¿½åŠ æŒ‡å®šHTTPå¤´ res.set()åœ¨res.append()åå°†é‡ç½®ä¹‹å‰è®¾ç½®çš„å¤´ res.cookie(nameï¼Œvalue [ï¼Œoption])ï¼šè®¾ç½®Cookie res.clearCookie()ï¼šæ¸…é™¤Cookie res.download()ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ res.get()ï¼šè¿”å›æŒ‡å®šçš„HTTPå¤´ res.json()ï¼šä¼ é€JSONå“åº” res.jsonp()ï¼šä¼ é€JSONPå“åº” res.location()ï¼šåªè®¾ç½®å“åº”çš„Location HTTPå¤´ï¼Œä¸è®¾ç½®çŠ¶æ€ç æˆ–è€…close response res.render(view,[locals],callback)ï¼šæ¸²æŸ“ä¸€ä¸ªviewï¼ŒåŒæ—¶å‘callbackä¼ é€’æ¸²æŸ“åçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æœ‰é”™è¯¯å‘ç”Ÿnext(err)å°†ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚callbackå°†ä¼šè¢«ä¼ å…¥ä¸€ä¸ªå¯èƒ½å‘ç”Ÿçš„é”™è¯¯ä»¥åŠæ¸²æŸ“åçš„é¡µé¢ï¼Œè¿™æ ·å°±ä¸ä¼šè‡ªåŠ¨è¾“å‡ºäº†ã€‚ res.send()ï¼šä¼ é€HTTPå“åº” res.sendFile(path [ï¼Œoptions] [ï¼Œfn])ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ -ä¼šè‡ªåŠ¨æ ¹æ®æ–‡ä»¶extensionè®¾å®šContent-Type res.set()ï¼šè®¾ç½®HTTPå¤´ï¼Œä¼ å…¥objectå¯ä»¥ä¸€æ¬¡è®¾ç½®å¤šä¸ªå¤´ c.è·¯ç”±æˆ‘ä»¬å·²ç»äº†è§£äº† HTTP è¯·æ±‚çš„åŸºæœ¬åº”ç”¨ï¼Œè€Œè·¯ç”±å†³å®šäº†ç”±è°(æŒ‡å®šè„šæœ¬)å»å“åº”å®¢æˆ·ç«¯è¯·æ±‚ã€‚åœ¨HTTPè¯·æ±‚ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è·¯ç”±æå–å‡ºè¯·æ±‚çš„URLä»¥åŠGET&#x2F;POSTå‚æ•°ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ‰©å±• Hello Worldï¼Œæ·»åŠ ä¸€äº›åŠŸèƒ½æ¥å¤„ç†æ›´å¤šç±»å‹çš„ HTTP è¯·æ±‚ã€‚åˆ›å»º express_demo2.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920212223242526272829303132var express = require(&#x27;express&#x27;);var app = express();// ä¸»é¡µè¾“å‡º &quot;Hello World&quot;app.get(&#x27;/&#x27;, function (req, res) &#123; console.log(&quot;ä¸»é¡µ GET è¯·æ±‚&quot;); res.send(&#x27;Hello GET&#x27;);&#125;)// POST è¯·æ±‚app.post(&#x27;/&#x27;, function (req, res) &#123; console.log(&quot;ä¸»é¡µ POST è¯·æ±‚&quot;); res.send(&#x27;Hello POST&#x27;);&#125;)// /del_user é¡µé¢å“åº”app.get(&#x27;/del_user&#x27;, function (req, res) &#123; console.log(&quot;/del_user å“åº” DELETE è¯·æ±‚&quot;); res.send(&#x27;åˆ é™¤é¡µé¢&#x27;);&#125;)// /list_user é¡µé¢ GET è¯·æ±‚app.get(&#x27;/list_user&#x27;, function (req, res) &#123; console.log(&quot;/list_user GET è¯·æ±‚&quot;); res.send(&#x27;ç”¨æˆ·åˆ—è¡¨é¡µé¢&#x27;);&#125;)// å¯¹é¡µé¢ abcd, abxcd, ab123cd, ç­‰å“åº” GET è¯·æ±‚app.get(&#x27;/ab*cd&#x27;, function(req, res) &#123; console.log(&quot;/ab*cd GET è¯·æ±‚&quot;); res.send(&#x27;æ­£åˆ™åŒ¹é…&#x27;);&#125;)var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port)&#125;) d.é™æ€æ–‡ä»¶Express æä¾›äº†å†…ç½®çš„ä¸­é—´ä»¶ express.static æ¥è®¾ç½®é™æ€æ–‡ä»¶å¦‚ï¼šå›¾ç‰‡ï¼Œ CSS, JavaScript ç­‰ã€‚ ä½ å¯ä»¥ä½¿ç”¨ express.static ä¸­é—´ä»¶æ¥è®¾ç½®é™æ€æ–‡ä»¶è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ å°†å›¾ç‰‡ï¼Œ CSS, JavaScript æ–‡ä»¶æ”¾åœ¨ public ç›®å½•ä¸‹ï¼Œä½ å¯ä»¥è¿™ä¹ˆå†™ï¼š 1app.use(&#x27;/public&#x27;, express.static(&#x27;public&#x27;)); æˆ‘ä»¬å¯ä»¥åˆ° public&#x2F;images ç›®å½•ä¸‹æ”¾äº›å›¾ç‰‡,å¦‚ä¸‹æ‰€ç¤ºï¼š 12345node_modulesserver.jspublic/public/imagespublic/images/logo.png è®©æˆ‘ä»¬å†ä¿®æ”¹ä¸‹ â€œHello Worldâ€ åº”ç”¨æ·»åŠ å¤„ç†é™æ€æ–‡ä»¶çš„åŠŸèƒ½ã€‚ åˆ›å»º express_demo3.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011var express = require(&#x27;express&#x27;);var app = express();app.use(&#x27;/public&#x27;, express.static(&#x27;public&#x27;));app.get(&#x27;/&#x27;, function (req, res) &#123; res.send(&#x27;Hello World&#x27;);&#125;)var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port)&#125;) e.GETæ–¹æ³•ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº†åœ¨è¡¨å•ä¸­é€šè¿‡ GET æ–¹æ³•æäº¤ä¸¤ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ server.js æ–‡ä»¶å†…çš„ process_get è·¯ç”±å™¨æ¥å¤„ç†è¾“å…¥ï¼š idnex.html 12345678910&lt;html&gt;&lt;body&gt;&lt;form action=&quot;http://127.0.0.1:8081/process_get&quot; method=&quot;GET&quot;&gt;First Name: &lt;input type=&quot;text&quot; name=&quot;first_name&quot;&gt; &lt;br&gt; Last Name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot;&gt;&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; server.js 123456789101112131415161718192021var express = require(&#x27;express&#x27;);var app = express();app.use(&#x27;/public&#x27;, express.static(&#x27;public&#x27;));app.get(&#x27;/index.html&#x27;, function (req, res) &#123; res.sendFile( __dirname + &quot;/&quot; + &quot;index.html&quot; );&#125;)app.get(&#x27;/process_get&#x27;, function (req, res) &#123; // è¾“å‡º JSON æ ¼å¼ var response = &#123; &quot;first_name&quot;:req.query.first_name, &quot;last_name&quot;:req.query.last_name &#125;; console.log(response); res.end(JSON.stringify(response));&#125;)var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port) &#125;) f.æ–‡ä»¶ä¸Šä¼ ä»¥ä¸‹æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç”¨äºä¸Šä¼ æ–‡ä»¶çš„è¡¨å•ï¼Œä½¿ç”¨ POST æ–¹æ³•ï¼Œè¡¨å• enctype å±æ€§è®¾ç½®ä¸º multipart&#x2F;form-dataã€‚ 1234567891011121314&lt;html&gt;&lt;head&gt;&lt;title&gt;æ–‡ä»¶ä¸Šä¼ è¡¨å•&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h3&gt;æ–‡ä»¶ä¸Šä¼ ï¼š&lt;/h3&gt;é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ : &lt;br /&gt;&lt;form action=&quot;/file_upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;&lt;input type=&quot;file&quot; name=&quot;image&quot; size=&quot;50&quot; /&gt;&lt;br /&gt;&lt;input type=&quot;submit&quot; value=&quot;ä¸Šä¼ æ–‡ä»¶&quot; /&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; server.js 1234567891011121314151617181920212223242526272829303132333435var express = require(&#x27;express&#x27;);var app = express();var fs = require(&quot;fs&quot;);var bodyParser = require(&#x27;body-parser&#x27;);var multer = require(&#x27;multer&#x27;);app.use(&#x27;/public&#x27;, express.static(&#x27;public&#x27;));app.use(bodyParser.urlencoded(&#123; extended: false &#125;));app.use(multer(&#123; dest: &#x27;/tmp/&#x27;&#125;).array(&#x27;image&#x27;));app.get(&#x27;/index.html&#x27;, function (req, res) &#123; res.sendFile( __dirname + &quot;/&quot; + &quot;index.html&quot; );&#125;)app.post(&#x27;/file_upload&#x27;, function (req, res) &#123; console.log(req.files[0]); // ä¸Šä¼ çš„æ–‡ä»¶ä¿¡æ¯ var des_file = __dirname + &quot;/&quot; + req.files[0].originalname; fs.readFile( req.files[0].path, function (err, data) &#123; fs.writeFile(des_file, data, function (err) &#123; if( err )&#123; console.log( err ); &#125;else&#123; response = &#123; message:&#x27;File uploaded successfully&#x27;, filename:req.files[0].originalname &#125;; &#125; console.log( response ); res.end( JSON.stringify( response ) ); &#125;); &#125;);&#125;) var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port)&#125;) g.Cookieç®¡ç†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸­é—´ä»¶å‘ Node.js æœåŠ¡å™¨å‘é€ cookie ä¿¡æ¯ï¼Œä»¥ä¸‹ä»£ç è¾“å‡ºäº†å®¢æˆ·ç«¯å‘é€çš„ cookie ä¿¡æ¯ï¼š 12345678910// express_cookie.js æ–‡ä»¶var express = require(&#x27;express&#x27;)var cookieParser = require(&#x27;cookie-parser&#x27;)var util = require(&#x27;util&#x27;);var app = express()app.use(cookieParser())app.get(&#x27;/&#x27;, function(req, res) &#123; console.log(&quot;Cookies: &quot; + util.inspect(req.cookies));&#125;)app.listen(8081) 4.RESTful APIRESTå³è¡¨è¿°æ€§çŠ¶æ€ä¼ é€’ï¼ˆè‹±æ–‡ï¼šRepresentational State Transferï¼Œç®€ç§°RESTï¼‰æ˜¯Roy Fieldingåšå£«åœ¨2000å¹´ä»–çš„åšå£«è®ºæ–‡ä¸­æå‡ºæ¥çš„ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ã€‚ è¡¨è¿°æ€§çŠ¶æ€è½¬ç§»æ˜¯ä¸€ç»„æ¶æ„çº¦æŸæ¡ä»¶å’ŒåŸåˆ™ã€‚æ»¡è¶³è¿™äº›çº¦æŸæ¡ä»¶å’ŒåŸåˆ™çš„åº”ç”¨ç¨‹åºæˆ–è®¾è®¡å°±æ˜¯RESTfulã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRESTæ˜¯è®¾è®¡é£æ ¼è€Œä¸æ˜¯æ ‡å‡†ã€‚RESTé€šå¸¸åŸºäºä½¿ç”¨HTTPï¼ŒURIï¼Œå’ŒXMLï¼ˆæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„ä¸€ä¸ªå­é›†ï¼‰ä»¥åŠHTMLï¼ˆæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„ä¸€ä¸ªåº”ç”¨ï¼‰è¿™äº›ç°æœ‰çš„å¹¿æ³›æµè¡Œçš„åè®®å’Œæ ‡å‡†ã€‚REST é€šå¸¸ä½¿ç”¨ JSON æ•°æ®æ ¼å¼ã€‚ a.RESTful Web ServicesWeb serviceæ˜¯ä¸€ä¸ªå¹³å°ç‹¬ç«‹çš„ï¼Œä½è€¦åˆçš„ï¼Œè‡ªåŒ…å«çš„ã€åŸºäºå¯ç¼–ç¨‹çš„webçš„åº”ç”¨ç¨‹åºï¼Œå¯ä½¿ç”¨å¼€æ”¾çš„XMLï¼ˆæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„ä¸€ä¸ªå­é›†ï¼‰æ ‡å‡†æ¥æè¿°ã€å‘å¸ƒã€å‘ç°ã€åè°ƒå’Œé…ç½®è¿™äº›åº”ç”¨ç¨‹åºï¼Œç”¨äºå¼€å‘åˆ†å¸ƒå¼çš„äº’æ“ä½œçš„åº”ç”¨ç¨‹åºã€‚ åŸºäº REST æ¶æ„çš„ Web Services å³æ˜¯ RESTfulã€‚ ç”±äºè½»é‡çº§ä»¥åŠé€šè¿‡ HTTP ç›´æ¥ä¼ è¾“æ•°æ®çš„ç‰¹æ€§ï¼ŒWeb æœåŠ¡çš„ RESTful æ–¹æ³•å·²ç»æˆä¸ºæœ€å¸¸è§çš„æ›¿ä»£æ–¹æ³•ã€‚å¯ä»¥ä½¿ç”¨å„ç§è¯­è¨€ï¼ˆæ¯”å¦‚ Java ç¨‹åºã€Perlã€Rubyã€Pythonã€PHP å’Œ Javascript[åŒ…æ‹¬ Ajax]ï¼‰å®ç°å®¢æˆ·ç«¯ã€‚ RESTful Web æœåŠ¡é€šå¸¸å¯ä»¥é€šè¿‡è‡ªåŠ¨å®¢æˆ·ç«¯æˆ–ä»£è¡¨ç”¨æˆ·çš„åº”ç”¨ç¨‹åºè®¿é—®ã€‚ä½†æ˜¯ï¼Œè¿™ç§æœåŠ¡çš„ç®€ä¾¿æ€§è®©ç”¨æˆ·èƒ½å¤Ÿä¸ä¹‹ç›´æ¥äº¤äº’ï¼Œä½¿ç”¨å®ƒä»¬çš„ Web æµè§ˆå™¨æ„å»ºä¸€ä¸ª GET URL å¹¶è¯»å–è¿”å›çš„å†…å®¹ã€‚ b.åˆ›å»º RESTfuluser.json 1234567891011121314151617181920&#123; &quot;user1&quot; : &#123; &quot;name&quot; : &quot;mahesh&quot;, &quot;password&quot; : &quot;password1&quot;, &quot;profession&quot; : &quot;teacher&quot;, &quot;id&quot;: 1 &#125;, &quot;user2&quot; : &#123; &quot;name&quot; : &quot;suresh&quot;, &quot;password&quot; : &quot;password2&quot;, &quot;profession&quot; : &quot;librarian&quot;, &quot;id&quot;: 2 &#125;, &quot;user3&quot; : &#123; &quot;name&quot; : &quot;ramesh&quot;, &quot;password&quot; : &quot;password3&quot;, &quot;profession&quot; : &quot;clerk&quot;, &quot;id&quot;: 3 &#125;&#125; åŸºäºä»¥ä¸Šæ•°æ®ï¼Œæˆ‘ä»¬åˆ›å»ºä»¥ä¸‹ RESTful APIï¼š åºå· URI HTTP æ–¹æ³• å‘é€å†…å®¹ ç»“æœ 1 listUsers GET ç©º æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·åˆ—è¡¨ 2 addUser POST JSON å­—ç¬¦ä¸² æ·»åŠ æ–°ç”¨æˆ· 3 deleteUser DELETE JSON å­—ç¬¦ä¸² åˆ é™¤ç”¨æˆ· 4 :id GET ç©º æ˜¾ç¤ºç”¨æˆ·è¯¦ç»†ä¿¡æ¯ c.è·å–ç”¨æˆ·åˆ—è¡¨ï¼šä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬åˆ›å»ºäº† RESTful API listUsersï¼Œç”¨äºè¯»å–ç”¨æˆ·çš„ä¿¡æ¯åˆ—è¡¨ï¼Œ server.js æ–‡ä»¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415var express = require(&#x27;express&#x27;);var app = express();var fs = require(&quot;fs&quot;);app.get(&#x27;/listUsers&#x27;, function (req, res) &#123; fs.readFile( __dirname + &quot;/&quot; + &quot;users.json&quot;, &#x27;utf8&#x27;, function (err, data) &#123; console.log( data ); res.end( data ); &#125;);&#125;)var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port)&#125;) dæ·»åŠ ç”¨æˆ·ä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬åˆ›å»ºäº† RESTful API addUserï¼Œ ç”¨äºæ·»åŠ æ–°çš„ç”¨æˆ·æ•°æ®ï¼Œserver.js æ–‡ä»¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920212223242526var express = require(&#x27;express&#x27;);var app = express();var fs = require(&quot;fs&quot;);//æ·»åŠ çš„æ–°ç”¨æˆ·æ•°æ®var user = &#123; &quot;user4&quot; : &#123; &quot;name&quot; : &quot;mohit&quot;, &quot;password&quot; : &quot;password4&quot;, &quot;profession&quot; : &quot;teacher&quot;, &quot;id&quot;: 4 &#125;&#125;app.get(&#x27;/addUser&#x27;, function (req, res) &#123; // è¯»å–å·²å­˜åœ¨çš„æ•°æ® fs.readFile( __dirname + &quot;/&quot; + &quot;users.json&quot;, &#x27;utf8&#x27;, function (err, data) &#123; data = JSON.parse( data ); data[&quot;user4&quot;] = user[&quot;user4&quot;]; console.log( data ); res.end( JSON.stringify(data)); &#125;);&#125;)var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port)&#125;) æ˜¾ç¤ºç”¨æˆ·è¯¦æƒ…ä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬åˆ›å»ºäº† RESTful API :idï¼ˆç”¨æˆ·idï¼‰ï¼Œ ç”¨äºè¯»å–æŒ‡å®šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼Œserver.js æ–‡ä»¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617var express = require(&#x27;express&#x27;);var app = express();var fs = require(&quot;fs&quot;);app.get(&#x27;/:id&#x27;, function (req, res) &#123; // é¦–å…ˆæˆ‘ä»¬è¯»å–å·²å­˜åœ¨çš„ç”¨æˆ· fs.readFile( __dirname + &quot;/&quot; + &quot;users.json&quot;, &#x27;utf8&#x27;, function (err, data) &#123; data = JSON.parse( data ); var user = data[&quot;user&quot; + req.params.id] console.log( user ); res.end( JSON.stringify(user)); &#125;);&#125;)var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port)&#125;) åˆ é™¤ç”¨æˆ·ä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬åˆ›å»ºäº† RESTful API deleteUserï¼Œ ç”¨äºåˆ é™¤æŒ‡å®šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼Œä»¥ä¸‹å®ä¾‹ä¸­ï¼Œç”¨æˆ· id ä¸º 2ï¼Œserver.js æ–‡ä»¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415161718var express = require(&#x27;express&#x27;);var app = express();var fs = require(&quot;fs&quot;);var id = 2;app.get(&#x27;/deleteUser&#x27;, function (req, res) &#123; // First read existing users. fs.readFile( __dirname + &quot;/&quot; + &quot;users.json&quot;, &#x27;utf8&#x27;, function (err, data) &#123; data = JSON.parse( data ); delete data[&quot;user&quot; + id]; console.log( data ); res.end( JSON.stringify(data)); &#125;);&#125;)var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port)&#125;) 5.Node.js å¤šè¿›ç¨‹æˆ‘ä»¬éƒ½çŸ¥é“ Node.js æ˜¯ä»¥å•çº¿ç¨‹çš„æ¨¡å¼è¿è¡Œçš„ï¼Œä½†å®ƒä½¿ç”¨çš„æ˜¯äº‹ä»¶é©±åŠ¨æ¥å¤„ç†å¹¶å‘ï¼Œè¿™æ ·æœ‰åŠ©äºæˆ‘ä»¬åœ¨å¤šæ ¸ cpu çš„ç³»ç»Ÿä¸Šåˆ›å»ºå¤šä¸ªå­è¿›ç¨‹ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚ æ¯ä¸ªå­è¿›ç¨‹æ€»æ˜¯å¸¦æœ‰ä¸‰ä¸ªæµå¯¹è±¡ï¼šchild.stdin, child.stdout å’Œchild.stderrã€‚ä»–ä»¬å¯èƒ½ä¼šå…±äº«çˆ¶è¿›ç¨‹çš„ stdio æµï¼Œæˆ–è€…ä¹Ÿå¯ä»¥æ˜¯ç‹¬ç«‹çš„è¢«å¯¼æµçš„æµå¯¹è±¡ã€‚ Node æä¾›äº† child_process æ¨¡å—æ¥åˆ›å»ºå­è¿›ç¨‹ï¼Œæ–¹æ³•æœ‰ï¼š exec - child_process.exec ä½¿ç”¨å­è¿›ç¨‹æ‰§è¡Œå‘½ä»¤ï¼Œç¼“å­˜å­è¿›ç¨‹çš„è¾“å‡ºï¼Œå¹¶å°†å­è¿›ç¨‹çš„è¾“å‡ºä»¥å›è°ƒå‡½æ•°å‚æ•°çš„å½¢å¼è¿”å›ã€‚ spawn - child_process.spawn ä½¿ç”¨æŒ‡å®šçš„å‘½ä»¤è¡Œå‚æ•°åˆ›å»ºæ–°è¿›ç¨‹ã€‚ fork - child_process.fork æ˜¯ spawn()çš„ç‰¹æ®Šå½¢å¼ï¼Œç”¨äºåœ¨å­è¿›ç¨‹ä¸­è¿è¡Œçš„æ¨¡å—ï¼Œå¦‚ fork(â€˜.&#x2F;son.jsâ€™) ç›¸å½“äº spawn(â€˜nodeâ€™, [â€˜.&#x2F;son.jsâ€™]) ã€‚ä¸spawnæ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œforkä¼šåœ¨çˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹ä¹‹é—´ï¼Œå»ºç«‹ä¸€ä¸ªé€šä¿¡ç®¡é“ï¼Œç”¨äºè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚ ç•¥ï¼ˆç”¨ä¸Šå†çœ‹ï¼‰","categories":[{"name":"Electron-Vue-WebRTCå®¢æˆ·ç«¯å­¦ä¹ ","slug":"Electron-Vue-WebRTCå®¢æˆ·ç«¯å­¦ä¹ ","permalink":"https://snowman12137.github.io/categories/Electron-Vue-WebRTC%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"Nodejså­¦ä¹ ","slug":"Nodejså­¦ä¹ ","permalink":"https://snowman12137.github.io/tags/Nodejs%E5%AD%A6%E4%B9%A0/"}],"author":"Sn0wma1n"},{"title":"Node.jså­¦ä¹ ï¼ˆäºŒï¼‰","slug":"Node-jså­¦ä¹ ï¼ˆäºŒï¼‰","date":"2024-01-31T16:00:00.000Z","updated":"2024-02-03T17:04:20.106Z","comments":true,"path":"2024/02/01/Node-jså­¦ä¹ ï¼ˆäºŒï¼‰/","link":"","permalink":"https://snowman12137.github.io/2024/02/01/Node-js%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/","excerpt":"","text":"Node.jså­¦ä¹ ï¼ˆäºŒï¼‰1.æ–‡ä»¶ç³»ç»ŸNode.js æä¾›ä¸€ç»„ç±»ä¼¼ UNIXï¼ˆPOSIXï¼‰æ ‡å‡†çš„æ–‡ä»¶æ“ä½œAPIã€‚ Node å¯¼å…¥æ–‡ä»¶ç³»ç»Ÿæ¨¡å—(fs)è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š 1var fs = require(&quot;fs&quot;) a.å¼‚æ­¥å’ŒåŒæ­¥Node.js æ–‡ä»¶ç³»ç»Ÿï¼ˆfs æ¨¡å—ï¼‰æ¨¡å—ä¸­çš„æ–¹æ³•å‡æœ‰å¼‚æ­¥å’ŒåŒæ­¥ç‰ˆæœ¬ï¼Œä¾‹å¦‚è¯»å–æ–‡ä»¶å†…å®¹çš„å‡½æ•°æœ‰å¼‚æ­¥çš„ fs.readFile() å’ŒåŒæ­¥çš„ fs.readFileSync()ã€‚ å¼‚æ­¥çš„æ–¹æ³•å‡½æ•°æœ€åä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°åŒ…å«äº†é”™è¯¯ä¿¡æ¯(error)ã€‚ å»ºè®®å¤§å®¶ä½¿ç”¨å¼‚æ­¥æ–¹æ³•ï¼Œæ¯”èµ·åŒæ­¥ï¼Œå¼‚æ­¥æ–¹æ³•æ€§èƒ½æ›´é«˜ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œè€Œä¸”æ²¡æœ‰é˜»å¡ã€‚ input.txtæ–‡ä»¶å†…å®¹å¦‚ä¸‹: 12èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.comæ–‡ä»¶è¯»å–å®ä¾‹ file.js 123456789101112var fs = require(&quot;fs&quot;);// å¼‚æ­¥è¯»å–fs.readFile(&#x27;input.txt&#x27;, function (err, data) &#123; if (err) &#123; return console.error(err); &#125; console.log(&quot;å¼‚æ­¥è¯»å–: &quot; + data.toString());&#125;);// åŒæ­¥è¯»å–var data = fs.readFileSync(&#x27;input.txt&#x27;);console.log(&quot;åŒæ­¥è¯»å–: &quot; + data.toString());console.log(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;); 1234567$ node file.js åŒæ­¥è¯»å–: èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.comæ–‡ä»¶è¯»å–å®ä¾‹ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚å¼‚æ­¥è¯»å–: èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.comæ–‡ä»¶è¯»å–å®ä¾‹ b.æ‰“å¼€æ–‡ä»¶ä»¥ä¸‹ä¸ºåœ¨å¼‚æ­¥æ¨¡å¼ä¸‹æ‰“å¼€æ–‡ä»¶çš„è¯­æ³•æ ¼å¼ï¼š 1fs.open(path, flags[, mode], callback) å‚æ•°ä½¿ç”¨è¯´æ˜å¦‚ä¸‹ï¼š path - æ–‡ä»¶çš„è·¯å¾„ã€‚ flags - æ–‡ä»¶æ‰“å¼€çš„è¡Œä¸ºã€‚å…·ä½“å€¼è¯¦è§ä¸‹æ–‡ã€‚ mode - è®¾ç½®æ–‡ä»¶æ¨¡å¼(æƒé™)ï¼Œæ–‡ä»¶åˆ›å»ºé»˜è®¤æƒé™ä¸º 0666(å¯è¯»ï¼Œå¯å†™)ã€‚ callback - å›è°ƒå‡½æ•°ï¼Œå¸¦æœ‰ä¸¤ä¸ªå‚æ•°å¦‚ï¼šcallback(err, fd)ã€‚ 12345678910var fs = require(&quot;fs&quot;);// å¼‚æ­¥æ‰“å¼€æ–‡ä»¶console.log(&quot;å‡†å¤‡æ‰“å¼€æ–‡ä»¶ï¼&quot;);fs.open(&#x27;input.txt&#x27;, &#x27;r+&#x27;, function(err, fd) &#123; if (err) &#123; return console.error(err); &#125; console.log(&quot;æ–‡ä»¶æ‰“å¼€æˆåŠŸï¼&quot;); &#125;); 2.GET&#x2F;POSTè¯·æ±‚a.è·å–GETè¯·æ±‚å†…å®¹ç”±äºGETè¯·æ±‚ç›´æ¥è¢«åµŒå…¥åœ¨è·¯å¾„ä¸­ï¼ŒURLæ˜¯å®Œæ•´çš„è¯·æ±‚è·¯å¾„ï¼ŒåŒ…æ‹¬äº†?åé¢çš„éƒ¨åˆ†ï¼Œå› æ­¤ä½ å¯ä»¥æ‰‹åŠ¨è§£æåé¢çš„å†…å®¹ä½œä¸ºGETè¯·æ±‚çš„å‚æ•°ã€‚ node.js ä¸­ url æ¨¡å—ä¸­çš„ parse å‡½æ•°æä¾›äº†è¿™ä¸ªåŠŸèƒ½ã€‚ 12345678var http = require(&#x27;http&#x27;);var url = require(&#x27;url&#x27;);var util = require(&#x27;util&#x27;); http.createServer(function(req, res)&#123; res.writeHead(200, &#123;&#x27;Content-Type&#x27;: &#x27;text/plain; charset=utf-8&#x27;&#125;); res.end(util.inspect(url.parse(req.url, true)));&#125;).listen(3000); æµè§ˆå™¨ä¸­è®¿é—®http://localhost:3000/user?name=Sn0wm1an&amp;url=xiaowublog.top b.è·å–URLå‚æ•°æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ url.parse æ–¹æ³•æ¥è§£æ URL ä¸­çš„å‚æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314var http = require(&#x27;http&#x27;);var url = require(&#x27;url&#x27;);var util = require(&#x27;util&#x27;); http.createServer(function(req, res)&#123; res.setHeader(&#x27;Content-Type&#x27;,&#x27;text/html; charset=utf-8&#x27;); // è§£æ url å‚æ•° var params = url.parse(req.url, true).query; res.write(&quot;ç½‘ç«™åï¼š&quot; + params.name); res.write(&quot;\\n&quot;); res.write(&quot;ç½‘ç«™ URLï¼š&quot; + params.url); res.end(); &#125;).listen(3000); c.è·å– POST è¯·æ±‚å†…å®¹POST è¯·æ±‚çš„å†…å®¹å…¨éƒ¨çš„éƒ½åœ¨è¯·æ±‚ä½“ä¸­ï¼Œhttp.ServerRequest å¹¶æ²¡æœ‰ä¸€ä¸ªå±æ€§å†…å®¹ä¸ºè¯·æ±‚ä½“ï¼ŒåŸå› æ˜¯ç­‰å¾…è¯·æ±‚ä½“ä¼ è¾“å¯èƒ½æ˜¯ä¸€ä»¶è€—æ—¶çš„å·¥ä½œã€‚ æ¯”å¦‚ä¸Šä¼ æ–‡ä»¶ï¼Œè€Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¯èƒ½å¹¶ä¸éœ€è¦ç†ä¼šè¯·æ±‚ä½“çš„å†…å®¹ï¼Œæ¶æ„çš„POSTè¯·æ±‚ä¼šå¤§å¤§æ¶ˆè€—æœåŠ¡å™¨çš„èµ„æºï¼Œæ‰€ä»¥ node.js é»˜è®¤æ˜¯ä¸ä¼šè§£æè¯·æ±‚ä½“çš„ï¼Œå½“ä½ éœ€è¦çš„æ—¶å€™ï¼Œéœ€è¦æ‰‹åŠ¨æ¥åšã€‚ 12345678910111213141516var http = require(&#x27;http&#x27;);var querystring = require(&#x27;querystring&#x27;);var util = require(&#x27;util&#x27;);http.createServer(function(req, res)&#123; // å®šä¹‰äº†ä¸€ä¸ªpostå˜é‡ï¼Œç”¨äºæš‚å­˜è¯·æ±‚ä½“çš„ä¿¡æ¯ var post = &#x27;&#x27;; // é€šè¿‡reqçš„dataäº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œæ¯å½“æ¥å—åˆ°è¯·æ±‚ä½“çš„æ•°æ®ï¼Œå°±ç´¯åŠ åˆ°postå˜é‡ä¸­ req.on(&#x27;data&#x27;, function(chunk)&#123; post += chunk; &#125;); // åœ¨endäº‹ä»¶è§¦å‘åï¼Œé€šè¿‡querystring.parseå°†postè§£æä¸ºçœŸæ­£çš„POSTè¯·æ±‚æ ¼å¼ï¼Œç„¶åå‘å®¢æˆ·ç«¯è¿”å›ã€‚ req.on(&#x27;end&#x27;, function()&#123; post = querystring.parse(post); res.end(util.inspect(post)); &#125;);&#125;).listen(3000); ä»¥ä¸‹å®ä¾‹è¡¨å•é€šè¿‡ POST æäº¤å¹¶è¾“å‡ºæ•°æ®ï¼š 12345678910111213141516171819202122232425262728293031323334var http = require(&#x27;http&#x27;);var querystring = require(&#x27;querystring&#x27;); var postHTML = &#x27;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;èœé¸Ÿæ•™ç¨‹ Node.js å®ä¾‹&lt;/title&gt;&lt;/head&gt;&#x27; + &#x27;&lt;body&gt;&#x27; + &#x27;&lt;form method=&quot;post&quot;&gt;&#x27; + &#x27;ç½‘ç«™åï¼š &lt;input name=&quot;name&quot;&gt;&lt;br&gt;&#x27; + &#x27;ç½‘ç«™ URLï¼š &lt;input name=&quot;url&quot;&gt;&lt;br&gt;&#x27; + &#x27;&lt;input type=&quot;submit&quot;&gt;&#x27; + &#x27;&lt;/form&gt;&#x27; + &#x27;&lt;/body&gt;&lt;/html&gt;&#x27;; http.createServer(function (req, res) &#123; var body = &quot;&quot;; req.on(&#x27;data&#x27;, function (chunk) &#123; body += chunk; &#125;); req.on(&#x27;end&#x27;, function () &#123; // è§£æå‚æ•° body = querystring.parse(body); // è®¾ç½®å“åº”å¤´éƒ¨ä¿¡æ¯åŠç¼–ç  res.writeHead(200, &#123;&#x27;Content-Type&#x27;: &#x27;text/html; charset=utf8&#x27;&#125;); if(body.name &amp;&amp; body.url) &#123; // è¾“å‡ºæäº¤çš„æ•°æ® res.write(&quot;ç½‘ç«™åï¼š&quot; + body.name); res.write(&quot;&lt;br&gt;&quot;); res.write(&quot;ç½‘ç«™ URLï¼š&quot; + body.url); &#125; else &#123; // è¾“å‡ºè¡¨å• res.write(postHTML); &#125; res.end(); &#125;);&#125;).listen(3000);","categories":[{"name":"Electron-Vue-WebRTCå®¢æˆ·ç«¯å­¦ä¹ ","slug":"Electron-Vue-WebRTCå®¢æˆ·ç«¯å­¦ä¹ ","permalink":"https://snowman12137.github.io/categories/Electron-Vue-WebRTC%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"Nodejså­¦ä¹ ","slug":"Nodejså­¦ä¹ ","permalink":"https://snowman12137.github.io/tags/Nodejs%E5%AD%A6%E4%B9%A0/"}],"author":"Sn0wma1n"},{"title":"Node.jså­¦ä¹ ï¼ˆä¸€ï¼‰","slug":"Node-jså­¦ä¹ ï¼ˆä¸€ï¼‰","date":"2024-01-29T16:00:00.000Z","updated":"2024-02-03T17:04:03.796Z","comments":true,"path":"2024/01/30/Node-jså­¦ä¹ ï¼ˆä¸€ï¼‰/","link":"","permalink":"https://snowman12137.github.io/2024/01/30/Node-js%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/","excerpt":"","text":"Node.jså­¦ä¹ ï¼ˆä¸€ï¼‰1.Node.jsçš„å¼‚æ­¥åœ¨äº†è§£Node.jså¼‚æ­¥ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€çœ‹å…¶å‰èº«JavaScriptçš„å¼‚æ­¥ç¼–ç¨‹æŠ€å·§ã€‚ ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹çš„æ‰§è¡Œå°†ä¸å†ä¸åŸæœ‰çš„åºåˆ—æœ‰é¡ºåºå…³ç³»ã€‚ç®€å•æ¥ç†è§£å°±æ˜¯ï¼šåŒæ­¥æŒ‰ä½ çš„ä»£ç é¡ºåºæ‰§è¡Œï¼Œå¼‚æ­¥ä¸æŒ‰ç…§ä»£ç é¡ºåºæ‰§è¡Œï¼Œå¼‚æ­¥çš„æ‰§è¡Œæ•ˆç‡æ›´é«˜ã€‚ ä»€ä¹ˆæ—¶å€™ç”¨å¼‚æ­¥ç¼–ç¨‹ åœ¨å‰ç«¯ç¼–ç¨‹ä¸­ï¼ˆç”šè‡³åç«¯æœ‰æ—¶ä¹Ÿæ˜¯è¿™æ ·ï¼‰ï¼Œæˆ‘ä»¬åœ¨å¤„ç†ä¸€äº›ç®€çŸ­ã€å¿«é€Ÿçš„æ“ä½œæ—¶ï¼Œä¾‹å¦‚è®¡ç®— 1 + 1 çš„ç»“æœï¼Œå¾€å¾€åœ¨ä¸»çº¿ç¨‹ä¸­å°±å¯ä»¥å®Œæˆã€‚ä¸»çº¿ç¨‹ä½œä¸ºä¸€ä¸ªçº¿ç¨‹ï¼Œä¸èƒ½å¤ŸåŒæ—¶æ¥å—å¤šæ–¹é¢çš„è¯·æ±‚ã€‚æ‰€ä»¥ï¼Œå½“ä¸€ä¸ªäº‹ä»¶æ²¡æœ‰ç»“æŸæ—¶ï¼Œç•Œé¢å°†æ— æ³•å¤„ç†å…¶ä»–è¯·æ±‚ã€‚ ç°åœ¨æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®å®ƒçš„ onclick äº‹ä»¶ä¸ºä¸€ä¸ªæ­»å¾ªç¯ï¼Œé‚£ä¹ˆå½“è¿™ä¸ªæŒ‰é’®æŒ‰ä¸‹ï¼Œæ•´ä¸ªç½‘é¡µå°†å¤±å»å“åº”ã€‚ ä¸ºäº†é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œæˆ‘ä»¬å¸¸å¸¸ç”¨å­çº¿ç¨‹æ¥å®Œæˆä¸€äº›å¯èƒ½æ¶ˆè€—æ—¶é—´è¶³å¤Ÿé•¿ä»¥è‡³äºè¢«ç”¨æˆ·å¯Ÿè§‰çš„äº‹æƒ…ï¼Œæ¯”å¦‚è¯»å–ä¸€ä¸ªå¤§æ–‡ä»¶æˆ–è€…å‘å‡ºä¸€ä¸ªç½‘ç»œè¯·æ±‚ã€‚å› ä¸ºå­çº¿ç¨‹ç‹¬ç«‹äºä¸»çº¿ç¨‹ï¼Œæ‰€ä»¥å³ä½¿å‡ºç°é˜»å¡ä¹Ÿä¸ä¼šå½±å“ä¸»çº¿ç¨‹çš„è¿è¡Œã€‚ä½†æ˜¯å­çº¿ç¨‹æœ‰ä¸€ä¸ªå±€é™ï¼šä¸€æ—¦å‘å°„äº†ä»¥åå°±ä¼šä¸ä¸»çº¿ç¨‹å¤±å»åŒæ­¥ï¼Œæˆ‘ä»¬æ— æ³•ç¡®å®šå®ƒçš„ç»“æŸï¼Œå¦‚æœç»“æŸä¹‹åéœ€è¦å¤„ç†ä¸€äº›äº‹æƒ…ï¼Œæ¯”å¦‚å¤„ç†æ¥è‡ªæœåŠ¡å™¨çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•å°†å®ƒåˆå¹¶åˆ°ä¸»çº¿ç¨‹ä¸­å»çš„ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJavaScript ä¸­çš„å¼‚æ­¥æ“ä½œå‡½æ•°å¾€å¾€é€šè¿‡å›è°ƒå‡½æ•°æ¥å®ç°å¼‚æ­¥ä»»åŠ¡çš„ç»“æœå¤„ç†ã€‚ a.JavaSriptå›è°ƒå‡½æ•°å›è°ƒå‡½æ•°å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ˜¯åœ¨æˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡çš„æ—¶å€™å°±å‘Šè¯‰å®ƒï¼šç­‰ä½ å®Œæˆäº†è¿™ä¸ªä»»åŠ¡ä¹‹åè¦å¹²ä»€ä¹ˆã€‚è¿™æ ·ä¸€æ¥ä¸»çº¿ç¨‹å‡ ä¹ä¸ç”¨å…³å¿ƒå¼‚æ­¥ä»»åŠ¡çš„çŠ¶æ€äº†ï¼Œä»–è‡ªå·±ä¼šå–„å§‹å–„ç»ˆã€‚ 1234function print() &#123; document.getElementById(&quot;demo&quot;).innerHTML=&quot;RUNOOB!&quot;;&#125;setTimeout(print, 3000); è¿™æ®µç¨‹åºä¸­çš„ setTimeout å°±æ˜¯ä¸€ä¸ªæ¶ˆè€—æ—¶é—´è¾ƒé•¿ï¼ˆ3 ç§’ï¼‰çš„è¿‡ç¨‹ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸ªå›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ¯«ç§’æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ‰§è¡Œä¹‹åä¼šäº§ç”Ÿä¸€ä¸ªå­çº¿ç¨‹ï¼Œå­çº¿ç¨‹ä¼šç­‰å¾… 3 ç§’ï¼Œç„¶åæ‰§è¡Œå›è°ƒå‡½æ•° â€œprintâ€ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å‡º â€œRUNOOB!â€ã€‚ è€Œä¸”æˆ‘ä»¬å¯ä»¥ä¸å£°æ˜å‡½æ•°ï¼Œç”¨åŒ¿åå‡½æ•°æ”¾åˆ°æ–¹æ³•é‡Œã€‚ 123setTimeout(function () &#123; document.getElementById(&quot;demo&quot;).innerHTML=&quot;RUNOOB!&quot;;&#125;, 3000); b.Nodejså›è°ƒå‡½æ•°åˆ›å»ºé˜»å¡ä»£ç main.js 123456var fs = require(&quot;fs&quot;);var data = fs.readFileSync(&#x27;input.txt&#x27;);console.log(data.toString());console.log(&quot;ç¨‹åºæ‰§è¡Œç»“æŸ!&quot;); éé˜»å¡å¼ä»£ç æ˜¯å°†æ–¹æ³•ä¸­æœ€åä¸€ä½æ’å…¥å›è°ƒå‡½æ•°ï¼Œå½¢å¼å¦‚ä¸‹ 12345678var fs = require(&quot;fs&quot;);fs.readFile(&#x27;input.txt&#x27;, function (err, data) &#123; if (err) return console.error(err); console.log(data.toString());&#125;);console.log(&quot;ç¨‹åºæ‰§è¡Œç»“æŸ!&quot;); 2.äº‹ä»¶å¾ªç¯a.äº‹ä»¶é©±åŠ¨ç¨‹åºï¼ŒNodeJSä½¿ç”¨çš„æ˜¯äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œå½“web serveræ¥æ”¶åˆ°è¯·æ±‚ï¼Œå°±æŠŠå®ƒå…³é—­ç„¶åè¿›è¡Œå¤„ç†ï¼Œç„¶åå»æœåŠ¡ä¸‹ä¸€ä¸ªwebè¯·æ±‚ã€‚ å½“è¿™ä¸ªè¯·æ±‚å®Œæˆï¼Œå®ƒè¢«æ”¾å›å¤„ç†é˜Ÿåˆ—ï¼Œå½“åˆ°è¾¾é˜Ÿåˆ—å¼€å¤´ï¼Œè¿™ä¸ªç»“æœè¢«è¿”å›ç»™ç”¨æˆ·ã€‚ è¿™ä¸ªæ¨¡å‹éå¸¸é«˜æ•ˆå¯æ‰©å±•æ€§éå¸¸å¼ºï¼Œå› ä¸º webserver ä¸€ç›´æ¥å—è¯·æ±‚è€Œä¸ç­‰å¾…ä»»ä½•è¯»å†™æ“ä½œã€‚ï¼ˆè¿™ä¹Ÿç§°ä¹‹ä¸ºéé˜»å¡å¼IOæˆ–è€…äº‹ä»¶é©±åŠ¨IOï¼‰ (å›¾æ¥æºèœé¸Ÿ) æ•´ä¸ªäº‹ä»¶é©±åŠ¨çš„æµç¨‹å°±æ˜¯è¿™ä¹ˆå®ç°çš„ï¼Œéå¸¸ç®€æ´ã€‚æœ‰ç‚¹ç±»ä¼¼äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œäº‹ä»¶ç›¸å½“äºä¸€ä¸ªä¸»é¢˜(Subject)ï¼Œè€Œæ‰€æœ‰æ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶ä¸Šçš„å¤„ç†å‡½æ•°ç›¸å½“äºè§‚å¯Ÿè€…(Observer)ã€‚ 123456789// å¼•å…¥ events æ¨¡å—var events = require(&#x27;events&#x27;);// åˆ›å»º eventEmitter å¯¹è±¡var eventEmitter = new events.EventEmitter();// ç»‘å®šäº‹ä»¶åŠäº‹ä»¶çš„å¤„ç†ç¨‹åº//eventHandleræ˜¯ç»‘å®šçš„å‡½æ•°eventEmitter.on(&#x27;eventName&#x27;, eventHandler);// è§¦å‘äº‹ä»¶eventEmitter.emit(&#x27;eventName&#x27;); ä¾‹å­ 12345678910111213141516171819202122232425// å¼•å…¥ events æ¨¡å—var events = require(&#x27;events&#x27;);// åˆ›å»º eventEmitter å¯¹è±¡var eventEmitter = new events.EventEmitter(); // åˆ›å»ºäº‹ä»¶å¤„ç†ç¨‹åºvar connectHandler = function connected() &#123; console.log(&#x27;è¿æ¥æˆåŠŸã€‚&#x27;); // è§¦å‘ data_received äº‹ä»¶ eventEmitter.emit(&#x27;data_received&#x27;);&#125; // ç»‘å®š connection äº‹ä»¶å¤„ç†ç¨‹åºeventEmitter.on(&#x27;connection&#x27;, connectHandler); // ä½¿ç”¨åŒ¿åå‡½æ•°ç»‘å®š data_received äº‹ä»¶eventEmitter.on(&#x27;data_received&#x27;, function()&#123; console.log(&#x27;æ•°æ®æ¥æ”¶æˆåŠŸã€‚&#x27;);&#125;); // è§¦å‘ connection äº‹ä»¶ eventEmitter.emit(&#x27;connection&#x27;); console.log(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;); b.EventEmitterç±»Node.js æ‰€æœ‰çš„å¼‚æ­¥ I&#x2F;O æ“ä½œåœ¨å®Œæˆæ—¶éƒ½ä¼šå‘é€ä¸€ä¸ªäº‹ä»¶åˆ°äº‹ä»¶é˜Ÿåˆ—ã€‚ Node.js é‡Œé¢çš„è®¸å¤šå¯¹è±¡éƒ½ä¼šåˆ†å‘äº‹ä»¶ï¼šä¸€ä¸ª net.Server å¯¹è±¡ä¼šåœ¨æ¯æ¬¡æœ‰æ–°è¿æ¥æ—¶è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ ä¸€ä¸ª fs.readStream å¯¹è±¡ä¼šåœ¨æ–‡ä»¶è¢«æ‰“å¼€çš„æ—¶å€™è§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚ æ‰€æœ‰è¿™äº›äº§ç”Ÿäº‹ä»¶çš„å¯¹è±¡éƒ½æ˜¯ events.EventEmitter çš„å®ä¾‹ã€‚ EventEmitter å¯¹è±¡å¦‚æœåœ¨å®ä¾‹åŒ–æ—¶å‘ç”Ÿé”™è¯¯ï¼Œä¼šè§¦å‘ error äº‹ä»¶ã€‚å½“æ·»åŠ æ–°çš„ç›‘å¬å™¨æ—¶ï¼ŒnewListener äº‹ä»¶ä¼šè§¦å‘ï¼Œå½“ç›‘å¬å™¨è¢«ç§»é™¤æ—¶ï¼ŒremoveListener äº‹ä»¶è¢«è§¦å‘ã€‚ ä¸‹é¢æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­è¯´æ˜ EventEmitter çš„ç”¨æ³•ï¼š 123456789//event.js æ–‡ä»¶var EventEmitter = require(&#x27;events&#x27;).EventEmitter; var event = new EventEmitter(); event.on(&#x27;some_event&#x27;, function() &#123; //ç»‘å®šè§¦å‘è¯­å¥ console.log(&#x27;some_event äº‹ä»¶è§¦å‘&#x27;); &#125;); setTimeout(function() &#123; event.emit(&#x27;some_event&#x27;); //è§¦å‘&#125;, 1000); å¯ä»¥ç»‘å®šå¤šä¸ªè§¦å‘è¯­å¥ 12345678910//event.js æ–‡ä»¶var events = require(&#x27;events&#x27;); var emitter = new events.EventEmitter(); emitter.on(&#x27;someEvent&#x27;, function(arg1, arg2) &#123; console.log(&#x27;listener1&#x27;, arg1, arg2); &#125;); emitter.on(&#x27;someEvent&#x27;, function(arg1, arg2) &#123; console.log(&#x27;listener2&#x27;, arg1, arg2); &#125;); emitter.emit(&#x27;someEvent&#x27;, &#x27;arg1 å‚æ•°&#x27;, &#x27;arg2 å‚æ•°&#x27;); 3.Bufferä¸Streama.BufferJavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚ ä½†åœ¨å¤„ç†åƒTCPæµæˆ–æ–‡ä»¶æµæ—¶ï¼Œå¿…é¡»ä½¿ç”¨åˆ°äºŒè¿›åˆ¶æ•°æ®ã€‚å› æ­¤åœ¨ Node.jsä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚ å­—ç¬¦ç¼–ç  Buffer å®ä¾‹ä¸€èˆ¬ç”¨äºè¡¨ç¤ºç¼–ç å­—ç¬¦çš„åºåˆ—ï¼Œæ¯”å¦‚ UTF-8 ã€ UCS2 ã€ Base64 ã€æˆ–åå…­è¿›åˆ¶ç¼–ç çš„æ•°æ®ã€‚ é€šè¿‡ä½¿ç”¨æ˜¾å¼çš„å­—ç¬¦ç¼–ç ï¼Œå°±å¯ä»¥åœ¨ Buffer å®ä¾‹ä¸æ™®é€šçš„ JavaScript å­—ç¬¦ä¸²ä¹‹é—´è¿›è¡Œç›¸äº’è½¬æ¢ã€‚ 12345const buf = Buffer.from(&#x27;runoob&#x27;, &#x27;ascii&#x27;);// è¾“å‡º 72756e6f6f62console.log(buf.toString(&#x27;hex&#x27;));// è¾“å‡º cnVub29iconsole.log(buf.toString(&#x27;base64&#x27;)); è¯»å†™æ•°æ® 12buf.write(string[, offset[, length]][, encoding])buf.toString([encoding[, start[, end]]]) è½¬æ¢æˆJSONå¯¹è±¡ å½“å­—ç¬¦ä¸²åŒ–ä¸€ä¸ª Buffer å®ä¾‹æ—¶ï¼ŒJSON.stringify()ä¼šéšå¼åœ°è°ƒç”¨è¯¥ **toJSON()**ã€‚ è¿”å›JSONå¯¹è±¡ 1buf.toJSON() ä¾‹å­ 1234567891011121314const buf = Buffer.from([0x1, 0x2, 0x3, 0x4, 0x5]);const json = JSON.stringify(buf);// è¾“å‡º: &#123;&quot;type&quot;:&quot;Buffer&quot;,&quot;data&quot;:[1,2,3,4,5]&#125;console.log(json);const copy = JSON.parse(json, (key, value) =&gt; &#123; return value &amp;&amp; value.type === &#x27;Buffer&#x27; ? Buffer.from(value.data) : value;&#125;);// è¾“å‡º: &lt;Buffer 01 02 03 04 05&gt;console.log(copy); è¾“å‡ºä¸º 12&#123;&quot;type&quot;:&quot;Buffer&quot;,&quot;data&quot;:[1,2,3,4,5]&#125;&lt;Buffer 01 02 03 04 05&gt; b.Streamè¯»å…¥æµ 1234567891011121314151617var fs = require(&quot;fs&quot;);var data = &#x27;&#x27;;// åˆ›å»ºå¯è¯»æµvar readerStream = fs.createReadStream(&#x27;input.txt&#x27;);// è®¾ç½®ç¼–ç ä¸º utf8ã€‚readerStream.setEncoding(&#x27;UTF8&#x27;);// å¤„ç†æµäº‹ä»¶ --&gt; data, end, and errorreaderStream.on(&#x27;data&#x27;, function(chunk) &#123; data += chunk;&#125;);readerStream.on(&#x27;end&#x27;,function()&#123; console.log(data);&#125;);readerStream.on(&#x27;error&#x27;, function(err)&#123; console.log(err.stack);&#125;);console.log(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•&quot;); å†™å…¥æµ 12345678910111213141516var fs = require(&quot;fs&quot;);var data = &#x27;èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.com&#x27;;// åˆ›å»ºä¸€ä¸ªå¯ä»¥å†™å…¥çš„æµï¼Œå†™å…¥åˆ°æ–‡ä»¶ output.txt ä¸­var writerStream = fs.createWriteStream(&#x27;output.txt&#x27;);// ä½¿ç”¨ utf8 ç¼–ç å†™å…¥æ•°æ®writerStream.write(data,&#x27;UTF8&#x27;);// æ ‡è®°æ–‡ä»¶æœ«å°¾writerStream.end();// å¤„ç†æµäº‹ä»¶ --&gt; finishã€errorwriterStream.on(&#x27;finish&#x27;, function() &#123; console.log(&quot;å†™å…¥å®Œæˆã€‚&quot;);&#125;);writerStream.on(&#x27;error&#x27;, function(err)&#123; console.log(err.stack);&#125;);console.log(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•&quot;); ç®¡é“æµ 123456789var fs = require(&quot;fs&quot;);// åˆ›å»ºä¸€ä¸ªå¯è¯»æµvar readerStream = fs.createReadStream(&#x27;input.txt&#x27;);// åˆ›å»ºä¸€ä¸ªå¯å†™æµvar writerStream = fs.createWriteStream(&#x27;output.txt&#x27;);// ç®¡é“è¯»å†™æ“ä½œ// è¯»å– input.txt æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†å†…å®¹å†™å…¥åˆ° output.txt æ–‡ä»¶ä¸­readerStream.pipe(writerStream);console.log(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•&quot;); é“¾å¼æµ é“¾å¼æ˜¯é€šè¿‡è¿æ¥è¾“å‡ºæµåˆ°å¦å¤–ä¸€ä¸ªæµå¹¶åˆ›å»ºå¤šä¸ªæµæ“ä½œé“¾çš„æœºåˆ¶ã€‚é“¾å¼æµä¸€èˆ¬ç”¨äºç®¡é“æ“ä½œã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ˜¯ç”¨ç®¡é“å’Œé“¾å¼æ¥å‹ç¼©å’Œè§£å‹æ–‡ä»¶ã€‚ 1234567var fs = require(&quot;fs&quot;);var zlib = require(&#x27;zlib&#x27;);// å‹ç¼© input.txt æ–‡ä»¶ä¸º input.txt.gzfs.createReadStream(&#x27;input.txt&#x27;) .pipe(zlib.createGzip()) .pipe(fs.createWriteStream(&#x27;input.txt.gz&#x27;));console.log(&quot;æ–‡ä»¶å‹ç¼©å®Œæˆã€‚&quot;); 4.æ¨¡å—ç³»ç»Ÿä¸ºäº†è®©Node.jsçš„æ–‡ä»¶å¯ä»¥ç›¸äº’è°ƒç”¨ï¼ŒNode.jsæä¾›äº†ä¸€ä¸ªç®€å•çš„æ¨¡å—ç³»ç»Ÿã€‚ æ¨¡å—æ˜¯Node.js åº”ç”¨ç¨‹åºçš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼Œæ–‡ä»¶å’Œæ¨¡å—æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚æ¢è¨€ä¹‹ï¼Œä¸€ä¸ª Node.js æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œè¿™ä¸ªæ–‡ä»¶å¯èƒ½æ˜¯JavaScript ä»£ç ã€JSON æˆ–è€…ç¼–è¯‘è¿‡çš„C&#x2F;C++ æ‰©å±•ã€‚ å¼•å…¥æ¨¡å— åœ¨ Node.js ä¸­ï¼Œå¼•å…¥ä¸€ä¸ªæ¨¡å—éå¸¸ç®€å•ï¼Œå¦‚ä¸‹æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª main.js æ–‡ä»¶å¹¶å¼•å…¥ hello æ¨¡å—ï¼Œä»£ç å¦‚ä¸‹: 12var hello = require(&#x27;./hello&#x27;);hello.world(); ä»¥ä¸Šå®ä¾‹ä¸­ï¼Œä»£ç  require(â€˜.&#x2F;helloâ€™) å¼•å…¥äº†å½“å‰ç›®å½•ä¸‹çš„ hello.js æ–‡ä»¶ï¼ˆ.&#x2F; ä¸ºå½“å‰ç›®å½•ï¼Œnode.js é»˜è®¤åç¼€ä¸º jsï¼‰ã€‚ Node.js æä¾›äº† exports å’Œ require ä¸¤ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­ exports æ˜¯æ¨¡å—å…¬å¼€çš„æ¥å£ï¼Œrequire ç”¨äºä»å¤–éƒ¨è·å–ä¸€ä¸ªæ¨¡å—çš„æ¥å£ï¼Œå³æ‰€è·å–æ¨¡å—çš„ exports å¯¹è±¡ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥åˆ›å»º hello.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š 123exports.world = function() &#123; console.log(&#x27;Hello World&#x27;);&#125; åœ¨ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œhello.js é€šè¿‡ exports å¯¹è±¡æŠŠ world ä½œä¸ºæ¨¡å—çš„è®¿é—®æ¥å£ï¼Œåœ¨ main.js ä¸­é€šè¿‡ require(â€˜.&#x2F;helloâ€™) åŠ è½½è¿™ä¸ªæ¨¡å—ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥è®¿ é—® hello.js ä¸­ exports å¯¹è±¡çš„æˆå‘˜å‡½æ•°äº†ã€‚ æœ‰æ—¶å€™æˆ‘ä»¬åªæ˜¯æƒ³æŠŠä¸€ä¸ªå¯¹è±¡å°è£…åˆ°æ¨¡å—ä¸­ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š 123module.exports = function() &#123; // ...&#125; ä¾‹å¦‚ 1234567891011//hello.js function Hello() &#123; var name; this.setName = function(thyName) &#123; name = thyName; &#125;; this.sayHello = function() &#123; console.log(&#x27;Hello &#x27; + name); &#125;; &#125;; module.exports = Hello; è¿™æ ·å°±å¯ä»¥ç›´æ¥è·å¾—è¿™ä¸ªå¯¹è±¡äº†ï¼š 12345//main.js var Hello = require(&#x27;./hello&#x27;); hello = new Hello(); hello.setName(&#x27;BYVoid&#x27;); hello.sayHello(); 5.å‡½æ•°å‡½æ•°å¯ä»¥ä½œä¸ºå€¼è¿›è¡Œä¼ é€’å¦‚ä¸‹ 1234567function say(word) &#123; console.log(word);&#125;function execute(someFunction, value) &#123; someFunction(value);&#125;execute(say, &quot;Hello&quot;); æˆ–è€…ä½¿ç”¨åŒ¿åå‡½æ•°ï¼Œç›´æ¥åœ¨å¦ä¸€ä¸ªå‡½æ•°çš„æ‹¬å·ä¸­å®šä¹‰å’Œä¼ é€’è¿™ä¸ªå‡½æ•°ï¼š 1234function execute(someFunction, value) &#123; someFunction(value);&#125;execute(function(word)&#123; console.log(word) &#125;, &quot;Hello&quot;); 6.NodeJSè·¯ç”±æˆ‘ä»¬è¦ä¸ºè·¯ç”±æä¾›è¯·æ±‚çš„ URL å’Œå…¶ä»–éœ€è¦çš„ GET åŠ POST å‚æ•°ï¼Œéšåè·¯ç”±éœ€è¦æ ¹æ®è¿™äº›æ•°æ®æ¥æ‰§è¡Œç›¸åº”çš„ä»£ç ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹ HTTP è¯·æ±‚ï¼Œä»ä¸­æå–å‡ºè¯·æ±‚çš„ URL ä»¥åŠ GET&#x2F;POST å‚æ•°ã€‚è¿™ä¸€åŠŸèƒ½åº”å½“å±äºè·¯ç”±è¿˜æ˜¯æœåŠ¡å™¨ï¼ˆç”šè‡³ä½œä¸ºä¸€ä¸ªæ¨¡å—è‡ªèº«çš„åŠŸèƒ½ï¼‰ç¡®å®å€¼å¾—æ¢è®¨ï¼Œä½†è¿™é‡Œæš‚å®šå…¶ä¸ºæˆ‘ä»¬çš„HTTPæœåŠ¡å™¨çš„åŠŸèƒ½ã€‚ æˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰æ•°æ®éƒ½ä¼šåŒ…å«åœ¨ request å¯¹è±¡ä¸­ï¼Œè¯¥å¯¹è±¡ä½œä¸º onRequest() å›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ã€‚ä½†æ˜¯ä¸ºäº†è§£æè¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦é¢å¤–çš„ Node.JS æ¨¡å—ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ url å’Œ querystring æ¨¡å—ã€‚ 12345678910111213url.parse(string).query | url.parse(string).pathname | | | | | ------ -------------------http://localhost:8888/start?foo=bar&amp;hello=world --- ----- | | | | querystring.parse(queryString)[&quot;foo&quot;] | | querystring.parse(queryString)[&quot;hello&quot;] (èœé¸Ÿè¿™ä¸ªå›¾åšçš„å¤ªæ£’äº†) ç°åœ¨æˆ‘ä»¬æ¥ç»™ onRequest() å‡½æ•°åŠ ä¸Šä¸€äº›é€»è¾‘ï¼Œç”¨æ¥æ‰¾å‡ºæµè§ˆå™¨è¯·æ±‚çš„ URL è·¯å¾„ï¼š server.jsä»£ç  1234567891011121314151617181920var http = require(&quot;http&quot;);var url = require(&quot;url&quot;); function start(route) &#123; function onRequest(request, response) &#123; var pathname = url.parse(request.url).pathname; console.log(&quot;Request for &quot; + pathname + &quot; received.&quot;); route(pathname); response.writeHead(200, &#123;&quot;Content-Type&quot;: &quot;text/plain&quot;&#125;); response.write(&quot;Hello World&quot;); response.end(); &#125; http.createServer(onRequest).listen(8888); console.log(&quot;Server has started.&quot;);&#125; exports.start = start; router.jsä»£ç  12345function route(pathname) &#123; console.log(&quot;About to route a request for &quot; + pathname);&#125; exports.route = route; index.jsä»£ç  123var server = require(&quot;./server&quot;);var router = require(&quot;./router&quot;);server.start(router.route); 7.å…¨å±€å¯¹è±¡JavaScript ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œç§°ä¸ºå…¨å±€å¯¹è±¡ï¼ˆGlobal Objectï¼‰ï¼Œå®ƒåŠå…¶æ‰€æœ‰å±æ€§éƒ½å¯ä»¥åœ¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹è®¿é—®ï¼Œå³å…¨å±€å˜é‡ã€‚ åœ¨æµè§ˆå™¨ JavaScript ä¸­ï¼Œé€šå¸¸ window æ˜¯å…¨å±€å¯¹è±¡ï¼Œ è€Œ Node.js ä¸­çš„å…¨å±€å¯¹è±¡æ˜¯ globalï¼Œæ‰€æœ‰å…¨å±€å˜é‡ï¼ˆé™¤äº† global æœ¬èº«ä»¥å¤–ï¼‰éƒ½æ˜¯ global å¯¹è±¡çš„å±æ€§ã€‚ åœ¨ Node.js æˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®åˆ° global çš„å±æ€§ï¼Œè€Œä¸éœ€è¦åœ¨åº”ç”¨ä¸­åŒ…å«å®ƒã€‚ ç•¥","categories":[{"name":"Electron-Vue-WebRTCå®¢æˆ·ç«¯å­¦ä¹ ","slug":"Electron-Vue-WebRTCå®¢æˆ·ç«¯å­¦ä¹ ","permalink":"https://snowman12137.github.io/categories/Electron-Vue-WebRTC%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"Nodejså­¦ä¹ ","slug":"Nodejså­¦ä¹ ","permalink":"https://snowman12137.github.io/tags/Nodejs%E5%AD%A6%E4%B9%A0/"}],"author":"Sn0wma1n"},{"title":"metaGEMä½¿ç”¨å°è®°(è§£å†³å„ç§é—®é¢˜)2024.1(äºŒ)","slug":"metaGEMä½¿ç”¨å°è®°-è§£å†³å„ç§é—®é¢˜-2024-2ï¼ˆäºŒï¼‰-daf9e5675b4d49cc855dd652b38a99e5","date":"2024-01-28T16:00:00.000Z","updated":"2024-02-17T15:38:43.995Z","comments":true,"path":"2024/01/29/metaGEMä½¿ç”¨å°è®°-è§£å†³å„ç§é—®é¢˜-2024-2ï¼ˆäºŒï¼‰-daf9e5675b4d49cc855dd652b38a99e5/","link":"","permalink":"https://snowman12137.github.io/2024/01/29/metaGEM%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%AE%B0-%E8%A7%A3%E5%86%B3%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98-2024-2%EF%BC%88%E4%BA%8C%EF%BC%89-daf9e5675b4d49cc855dd652b38a99e5/","excerpt":"","text":"metaGEMä½¿ç”¨å°è®°(è§£å†³å„ç§é—®é¢˜)2024.2ï¼ˆäºŒï¼‰ä¹¦æ¥ä¸Šæ–‡ï¼Œè²Œä¼¼é…ç½®è¿˜æœ‰ç‚¹é—®é¢˜ã€‚è·‘äº†åŠå¤©ä»¥åè¿Ÿè¿Ÿçœ‹ä¸åˆ°ç»“æœï¼Œhtopä¸€çœ‹CPUå ç”¨å‡ ä¹ä¸º0ï¼Œåº”è¯¥æ˜¯æ²¡è·‘èµ·æ¥ï¼Œsqueue å†ä¸€çœ‹ï¼ŒçŠ¶æ€æ˜¯PDï¼Œæ„æ€æ˜¯ç­‰å¾…ï¼Œæ­£å¸¸æƒ…å†µåº”è¯¥æ˜¯Rã€‚äºæ˜¯æˆ‘æœ‰ç½‘ä¸Šæ‰¾äº†ä¸‹åŸå› ï¼Œè¯´åªæœ‰ç©ºé—²æ¡ä»¶æ»¡è¶³jobçš„è¿è¡Œæ¡ä»¶æ‰ä¼šè¿è¡Œã€‚ æˆ‘åšäº†ä»¥ä¸‹æ“ä½œï¼š å…ˆscancle æ‰æ‰€æœ‰é˜Ÿåˆ—é‡Œçš„äººç‰© ä¿®æ”¹slurm.config çš„å‚æ•°ç¨å¤§ä¸€äº› é‡æ–°å¯åŠ¨sudo systemctl restart slurmd &amp; sudo systemctl restart slurmctld æ›´æ”¹bash metaGEM.sh -t fastp -j 2 -c 2 -m 10 -h 2 ä¸­m(å†…å­˜)çš„å¤§å°å’Œj(ä»»åŠ¡æ•°é‡)çš„å¤§å° è¿è¡ŒæŠ¥é”™ 12sbatch: error: Memory specification can not be satisfiedsbatch: error: Batch job submission failed: Requested node configuration is not available å†æ’æŸ¥ä¸€ä¸‹scontrol show nodes æˆ‘ä»¬ç†Ÿæ‚‰çš„æŠ¥é”™åˆå›æ¥äº†ï¼ˆçŠ¶æ€åˆæ˜¯drainï¼‰ æŸ¥äº†å¥½ä¹…å¥½ä¹…åœ¨sudo cat /var/log/slurm-llnl/slurmctld.log é‡Œé¢æ‰¾åˆ°äº†é”™è¯¯ å°±æ˜¯NodeNameé‚£ä¸€è¡Œçš„é…ç½®Socketså’ŒCoresPerSocketä¸ä»…è¦å°äºä¸Šä¸€ç« è®²çš„bash cxc.sh çš„æ–‡ä»¶ä¸­çš„å€¼ï¼Œè¿˜è¦å°äºæ—¥å¿—æ–‡ä»¶ä¸­æ•°å­—å‰é¢çš„å€¼ï¼Œå¦‚(20&lt;SocketsCoresPerSocket) é‚£ä¹ˆSocketsCoresPerSocketçš„ç§¯è¦å°äº20æ‰å¯ä»¥ã€‚ å¦‚æœæ—¥å¿—é•¿è¿™æ ·é‚£ä¹ˆå…«æˆå°±å¯ä»¥å¯åŠ¨äº† ç„¶åæˆ‘ä»¬è¾“å…¥ï¼Œæ”¹å˜èŠ‚ç‚¹çš„çŠ¶æ€æˆç©ºé—²(æ³¨æ„ä¸€å®šè¦æ˜¯sudoæƒé™) 1sudo scontrol update NodeName=your_node_name State=idle 1.é—®é¢˜:æˆåŠŸè¿è¡Œç¨‹åºä½†æ˜¯ç¬é—´å®Œæˆï¼Œå¹¶æ— è¾“å‡ºç»“æœæ’æŸ¥ï¼ åœ¨/var/log/slurm-llnl/slurmctld.log é‡Œé¢æ˜¾ç¤º 123[2024-01-29T15:37:19.292] sched: Allocate JobId=73 NodeList=your_computer #CPUs=8 Partition=your_computer[2024-01-29T15:37:20.367] _job_complete: JobId=73 WEXITSTATUS 1[2024-01-29T15:37:20.367] _job_complete: JobId=73 done å†æ’æŸ¥/var/log/slurm-llnl/slurmd.log æ— æ³•åˆ›å»ºè¾“å‡ºæ–‡ä»¶ è¿™å±äºslurmçš„BUGä¹‹ä¸€ï¼Œåªèƒ½å…ˆåˆ›å»ºæ–‡ä»¶ç„¶åå†åˆ›å»ºæ–‡ä»¶å¤¹ æ‰€ä»¥æˆ‘ä»¬æ˜¯èƒ½æ‰‹åŠ¨mkdir log ç„¶åå†è¿è¡Œ 2.è¿è¡Œæ—¶æ—¥å¿—æ–‡ä»¶ä¸­æŠ¥é”™&#x2F;usr&#x2F;bin&#x2F;bash: line 2: activate: No such file or directory çŒœæµ‹æ˜¯è¿™é‡Œé¢envs/metagem çš„å·¥ä½œè·¯å¾„æœ‰å˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬æ”¹æˆç»å¯¹è·¯å¾„è¯•ä¸€ä¸‹ 1set +u;source activate envs/metagem;set -u; å¦‚ä½•æ›´æ”¹ï¼Œæäº¤ç»™slurmå¤„ç†çš„è„šæœ¬æ˜¯ç”±snakemakeç”Ÿæˆçš„ï¼Œå› æ­¤æˆ‘ä»¬æ‰¾åˆ°è¿™ä¸€å¥ 1source activate &#123;config[envs][metagem]&#125; å‘ç°è¯»å–çš„configæ˜¯config.ymalæ–‡ä»¶ åº”è¯¥åœ¨config.yamlæ–‡ä»¶é‡Œæ”¹è¿™é‡Œï¼Œæ”¹æˆç»å¯¹è·¯å¾„ åŸæ¥ä¸æ˜¯è¿™ä¸ªé—®é¢˜ï¼ˆæœäº†ï¼‰ å½“ä½¿ç”¨source activate env_nameæ—¶ï¼Œè®¾ç½®condaè·¯å¾„åˆ°ç¯å¢ƒå˜é‡å³å¯ 1export PATH=&quot;/home/gc/anaconda3/bin:$PATH&quot; å¦å¤–å†shellè„šæœ¬ä¸­å¯ç”¨condaç¯å¢ƒä¸€å®šè¦ä½¿ç”¨sourceä¸èƒ½ä½¿ç”¨condaã€‚ æˆåŠŸè¿è¡Œï¼ˆæ³ªç›®ï¼‰ï¼ï¼ï¼ æˆåŠŸè¿è¡Œï¼ˆæ³ªç›®ï¼‰ï¼ï¼ æˆåŠŸè¿è¡Œï¼ˆæ³ªç›®ï¼‰ï¼ æˆåŠŸè¿è¡Œï¼ˆæ³ªç›® æˆåŠŸè¿è¡Œï¼ˆæ³ª æˆåŠŸè¿è¡Œï¼ˆ æˆåŠŸè¿è¡Œ æˆåŠŸè¿ æˆåŠŸ æˆ","categories":[{"name":"MAGsäº‘åˆ†æ","slug":"MAGsäº‘åˆ†æ","permalink":"https://snowman12137.github.io/categories/MAGs%E4%BA%91%E5%88%86%E6%9E%90/"},{"name":"ç”Ÿç‰©è®¡ç®—æœºç§‘å­¦","slug":"MAGsäº‘åˆ†æ/ç”Ÿç‰©è®¡ç®—æœºç§‘å­¦","permalink":"https://snowman12137.github.io/categories/MAGs%E4%BA%91%E5%88%86%E6%9E%90/%E7%94%9F%E7%89%A9%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/"}],"tags":[{"name":"metaGEM","slug":"metaGEM","permalink":"https://snowman12137.github.io/tags/metaGEM/"}],"author":"Sn0wma1n"},{"title":"metaGEMä½¿ç”¨å°è®°(è§£å†³å„ç§é—®é¢˜)2024.1(ä¸€)","slug":"metaGEMä½¿ç”¨å°è®°-è§£å†³å„ç§é—®é¢˜-2024-1-2a55eec867d5441b9829bd5428024882","date":"2024-01-27T16:00:00.000Z","updated":"2024-02-17T15:38:50.537Z","comments":true,"path":"2024/01/28/metaGEMä½¿ç”¨å°è®°-è§£å†³å„ç§é—®é¢˜-2024-1-2a55eec867d5441b9829bd5428024882/","link":"","permalink":"https://snowman12137.github.io/2024/01/28/metaGEM%E4%BD%BF%E7%94%A8%E5%B0%8F%E8%AE%B0-%E8%A7%A3%E5%86%B3%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98-2024-1-2a55eec867d5441b9829bd5428024882/","excerpt":"","text":"metaGEMä½¿ç”¨å°è®°(è§£å†³å„ç§é—®é¢˜)2024.1(ä¸€)å‰è¨€ï¼Œå¦‚ä½•æŠŠæ•°æ®ä»ç™¾åº¦äº‘ä¸Šä¸‹è½½åˆ°linuxæœåŠ¡å™¨ä¸Šå¯ä»¥ç›´æ¥é€šè¿‡pipä¸‹è½½ï¼špip install bypy -y ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶éœ€è¦éšä¾¿è¾“å…¥ä¸€ä¸ªå‘½ä»¤ä»¥æ¿€æ´»æˆæƒç•Œé¢ï¼Œå¦‚è¾“å…¥ bypy info ç„¶åæ‰“å¼€æç¤ºçš„è¿æ¥ å°†å¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ°ç»ˆç«¯åå›è½¦ï¼Œç­‰å¾…å³å¯ã€‚ ç™»é™†æˆåŠŸåä¼šæç¤ºå¦‚ä¸‹ä¿¡æ¯ ç™»å½•ç™¾åº¦ç½‘ç›˜(æˆ‘çš„åº”ç”¨æ•°æ®&#x2F;bypy&#x2F;ä½ çš„æ–‡ä»¶å&#x2F;*&#x2F;æ–‡ä»¶) æœ‰å¤šä¸ªæ–‡ä»¶å»ºè®®åä¸ªæ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œï¼Œè¿™æ ·ä¸‹è½½å‡ºé”™æ–¹ä¾¿æ’æŸ¥ æˆ‘å†™äº†ä¸€ä¸ªè„šæœ¬å¯ä»¥è‡ªåŠ¨å®‰è£…download.sh 1234567bypy downdir /RAW-NCBI/0/ ./0/bypy downdir /RAW-NCBI/1/ ./1/bypy downdir /RAW-NCBI/2/ ./2/bypy downdir /RAW-NCBI/3/ ./3/bypy downdir /RAW-NCBI/4/ ./4/bypy downdir /RAW-NCBI/5/ ./5/bypy downdir /RAW-NCBI/6/ ./6/ å› ä¸ºæˆ‘æœ‰74ä¸ªæ–‡ä»¶ï¼Œå› æ­¤åˆ†æˆäº†7ç»„è¿›è¡Œä¸‹è½½ åœ¨ä½ æƒ³å­˜å‚¨çš„æ–‡ä»¶å¤¹é‡Œè¾“å…¥ 1nohup bash [download.sh](http://download.sh) &gt; temp.txt &amp; (nohupæ˜¯åœ¨Linuxä¸­æ°¸ä¹…è¿è¡Œçš„å‘½ä»¤ï¼Œ&amp;å’Œå…¶ä»–æ–¹å¼å‡ä¼šå› ä¸ºç»ˆç«¯é€€å‡ºè€Œä¸­æ–­ã€‚&gt;æŠŠä¸‹è½½çš„è¿‡ç¨‹ä¿¡æ¯å­˜å‚¨åˆ°temp.txtï¼Œ&amp;å¹¶æ”¾åœ¨åå°è¿è¡Œï¼Œè¿™æ ·ä¸‹è½½æ–‡ä»¶çš„ä»»åŠ¡å°±ä¼šè‡ªåŠ¨æ”¾åˆ°åå°äº†) A.å®‰è£…123git clone https://github.com/franciscozorrilla/metaGEM.gitcd metaGEMbash env_setup.sh 1.æ‰¾ä¸åˆ°env_setup.shè·¯å¾„env_setup.shæ”¾åœ¨äº†metaGEM&#x2F;workflow&#x2F;scripts&#x2F;env_setup.sh ä½†æ˜¯env_setup.shé‡Œé¢æ‰€æœ‰çš„æ–‡ä»¶è·¯å¾„æ˜¯åœ¨metaGEM&#x2F;workflow&#x2F;ä¸‹é¢çš„ï¼Œæ‰€ä»¥è¦æŠŠenv_setup.shå¤åˆ¶åˆ°metaGEM&#x2F;workflow&#x2F;ä¸‹é¢è¿è¡Œ è¯¦è§£env_setup.shæ–‡ä»¶(æå–å…¶ä¸­å…³é”®éƒ¨åˆ†)(å·²å®‰è£…anaconda) 123456789conda create -n mamba mamba -c conda-forge #åˆ›å»ºæ–°ç¯å¢ƒä¸‹è½½mabaconda activate mamba #è¿›å…¥mambaç¯å¢ƒmamba env create --prefix ./envs/metagem -f envs/metaGEM_env.yml &amp;&amp; source activate envs/metagem &amp;&amp; pip install --user memote carveme smetana #åˆ›å»ºmetaGEMç¯å¢ƒmamba env create --prefix ./envs/metawrap -f envs/metaWRAP_env.yml #åˆ›å»ºmetaWRAPç¯å¢ƒmamba env create --prefix ./envs/prokkaroary -f envs/prokkaroary_env.yml #åˆ›å»ºprokkaroaryç¯å¢ƒ#ä¸é‡è¦:download-db.sh &amp;&amp; source deactivate &amp;&amp; source activate mamba#ä¸‹è½½GTDB-tk database (~25 Gb)æ•°æ®é›†(ä¸¢å¤±download-db.shæ–‡ä»¶æ— æ³•ä¸‹è½½)wget https://data.ace.uq.edu.au/public/CheckM_databases/checkm_data_2015_01_16.tar.gz #ä¸‹è½½CheckM(275MB) æ•°æ®é›† å› ä¸ºconda install ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ï¼Œæ‰€ä»¥è„šæœ¬é‡Œä½¿ç”¨äº†mambaæ–¹å¼è¿›è¡Œä¸‹è½½ã€‚ä½¿ç”¨æ–¹æ³•ä¸ºä¸‹è½½mambaåŒ…ï¼Œç„¶ååœ¨æ­¤ç¯å¢ƒä¸‹è¿›è¡Œä¸‹è½½ï¼Œå¦‚ mamba install requests ä¸Šè¿°æ–‡ä»¶ä¸­mamba env createä¸ºåˆ›å»ºæ–°ç¯å¢ƒçš„è¯­å¥ï¼Œ-fåé¢çš„.ymlæ–‡ä»¶ä¸ºå¯¼å‡ºçš„condaæ ‡å‡†ç¯å¢ƒæ–‡ä»¶ï¼Œâ€“prefix ä¸ºæ–°åˆ›å»ºç¯å¢ƒçš„è·¯å¾„ 2.åœ¨å®‰è£…metagemæ—¶ä»¥ä¸‹ç•Œé¢å¡ä½ åœ¨æ­£å¸¸åŠ è½½æ—¶ï¼Œä»¥ä¸‹ç•Œé¢è‡³å°‘å¡ä½äº†20hä»¥ä¸Šï¼Œå› æ­¤æ’é™¤ç½‘ç»œé—®é¢˜ æˆ‘ä»¬çœ‹ä¸€ä¸‹å¯¹åº”çš„metaGEM_env.ymlæ–‡ä»¶å†…å®¹ è¯¥æ–‡ä»¶ä¸ºcondaæ ‡å‡†åˆ›å»ºç¯å¢ƒçš„æ–‡ä»¶æ ¼å¼ 123456789101112131415161718192021name: metagemchannels: - conda-forge - bioconda - defaultsdependencies: - bedtools&gt;=2.29.2 - bwa&gt;=0.7.17 - concoct&gt;=1.1.0 - diamond&gt;=2.0.6 - fastp&gt;=0.20.1 - gtdbtk&gt;=1.4.0 - maxbin2&gt;=2.2.7 - megahit&gt;=1.2.9 - metabat2&gt;=2.15 - r-base&gt;=3.5.1 - r-gridextra&gt;=2.2.1 - r-tidyverse - r-tidytext - samtools&gt;=1.9 - snakemake&gt;=5.10.0,&lt;5.31.1 nameæŒ‡çš„æ˜¯åˆ›å»ºç¯å¢ƒçš„åç§°ï¼ŒchannelsæŒ‡çš„æ˜¯ä¸‹è½½é€šé“ï¼Œå…¶ä¸­è¿™ä¸ªconda-forgeæ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªï¼Œå…¶æ˜¯ä¸€ä¸ªç”¨äºæ‰˜ç®¡å’Œå‘å¸ƒç§‘å­¦è®¡ç®—ã€æ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ çš„Python åŒ…çš„ç¤¾åŒºé¡¹ç›®ã€‚åœ¨conda-forgeé€šé“ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ä¸ºcondaæ„å»ºä½†å°šæœªæˆä¸ºå®˜æ–¹Anacondaå‘è¡Œç‰ˆä¸€éƒ¨åˆ†çš„åŒ…ã€‚æœ‰ä¸€äº›Pythonåº“ä¸èƒ½ç”¨ç®€å•çš„conda installå®‰è£…ï¼Œå› ä¸ºé™¤éåº”ç”¨conda-forgeï¼Œå¦åˆ™å®ƒä»¬çš„é€šé“æ˜¯ä¸å¯ç”¨çš„ã€‚æ ¹æ®æˆ‘çš„ç»éªŒï¼Œpipæ¯”condaæ›´é€‚åˆç ”ç©¶ä¸åŒçš„é€šé“æºã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³å®‰è£…python-constraintï¼Œä½ å¯ä»¥é€šè¿‡pip installæ¥å®‰è£…ï¼Œä½†æ˜¯è¦é€šè¿‡cond æ¥å®‰è£…ã€‚æ‚¨å¿…é¡»æŒ‡å®šé€šé“- conda-forgeã€‚ æˆ‘åœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰äººè¯´ç”¨forgeèµ°çš„æ˜¯å¤–ç½‘ï¼Œå› æ­¤å¾ˆæ…¢å¯¼è‡´åŠ è½½å¡ä½ï¼Œå› æ­¤ï¼Œæˆ‘æŠŠchannelså…¨éƒ¨æ³¨é‡Šæ‰(é»˜è®¤æ²¡æœ‰channelsé¡¹)ç„¶åæµ‹è¯•ï¼Œä¾ç„¶å¤±è´¥ã€‚ æ³¨ï¼šå¦‚æœå®‰è£…å‡ºç°äº†Solving environment: failed with initial frozen solve. Retrying with flexible solve é”™è¯¯ è§£å†³åšå®¢ 12conda update -n base condaconda update --all å³å¯è§£å†³ åœ¨åé¢çš„æµ‹è¯•ä¸­ï¼Œæˆ‘å‘ç°metawrapå’Œprokkaroaryçš„å®‰è£… äºæ˜¯æˆ‘ä»¬æŠŠåé¢çš„å¤§äºç­‰äºå»æ‰åœ¨è¿›è¡Œæµ‹è¯•ï¼Œç­‰äº†ä¸€ä¸ªå°æ—¶ä¹Ÿæ²¡æœ‰ç»“æœä¹Ÿå¤±è´¥äº†ã€‚ äºæ˜¯æˆ‘ä»¬ç”¨åœŸåŠæ³•ï¼Œåˆ›å»ºç¯å¢ƒç„¶åä¸€ä¸ªä¸€ä¸ªæ‰‹åŠ¨è¾“å…¥åŠ è½½ 12345conda create -p ./envs/metagem python=3.10conda info --envconda activate /home/gc/metaGEM-master/workflow/envs/metagem conda install -c conda-forge bedtools bwa concoct diamond fastp gtdbtk maxbin2 megahit metabat2 r-base r-gridextra r-tidyverse r-tidytext samtools snakemake=5.10.0 -ypip install --user memote carveme smetana æˆ–è€…ä»¥ä¸‹è„šæœ¬ å› ä¸ºæˆ‘æ¯æ¬¡ä¸‹è½½éƒ½ä¼šæŠ¥é”™JASONé”™è¯¯ï¼Œç½‘ä¸Šä¸€æŸ¥æ˜¯å› ä¸ºç¼“å­˜çš„é—®é¢˜ï¼Œå› æ­¤æˆ‘åœ¨æ¯ä¸€ä¸ªè½¯ä»¶åŒ…å®‰è£…ä¹‹åä¼šæ¸…ç†ç¼“å­˜ï¼Œæš‚æ—¶æˆ‘å¯¹è¿™ä¸ªé—®é¢˜æ²¡æœ‰å¾ˆå¥½çš„è§£å†³æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªé—®é¢˜çš„åŒå­¦å¯ä»¥åˆ é™¤æ‰€æœ‰conda clean -i -y è¯­å¥ï¼Œå½“ç„¶ä¿ç•™ä¹Ÿæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚å…¶æ¬¡bioconda:: è¿™é‡Œé¢çš„åº“éƒ½æ˜¯ç”¨bioconda é€šé“ä¸‹è½½çš„ï¼Œå› æ­¤å®‰è£…æ—¶è¦åŠ ä¸Šè¿™ä¸ªè¯­å¥ï¼Œä¸åŠ çš„è¯å¾ˆå¤šåŒ…å®‰è£…ä¸ä¸Šå»ã€‚ 123456789101112131415161718192021222324252627282930313233conda create -p ./envs/metagem python=3.10 -yconda activate ./envs/metagemconda clean -i -yconda install bioconda::bedtools -yconda clean -i -yconda install bioconda::bwa -yconda clean -i -yconda install bioconda::concoct -yconda clean -i -yconda install bioconda::diamond -yconda clean -i -yconda install bioconda::fastp -yconda clean -i -yconda install bioconda::gtdbtk -yconda clean -i -yconda install bioconda::maxbin2 -yconda clean -i -yconda install bioconda::megahit -yconda clean -i -yconda install bioconda::metabat2 -yconda clean -i -yconda install bioconda::r-base -yconda clean -i -yconda install bioconda::r-gridextra -yconda clean -i -yconda install bioconda::r-tidyverse -yconda clean -i -yconda install bioconda::r-tidytext -yconda clean -i -yconda install bioconda::samtools -yconda clean -i -yconda install bioconda::snakemake=5.10.0 -ypip install --user memote carveme smetana B.æ‰§è¡ŒmetaGEM.shåœ¨datasetæ–‡ä»¶å¤¹ä¸­çš„å­ç›®å½•ä¸­å­˜æ”¾paierd-endçš„fastqæ•°æ®ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚MetGEM å°†åŸºäºdatasetæ–‡ä»¶å¤¹ä¸­å­˜åœ¨çš„å­æ–‡ä»¶å¤¹è¯»å–ç¤ºä¾‹ IDï¼Œå¹¶å°†è¿™äº› ID æä¾›ç»™ Snakefile ä½œä¸ºä½œä¸šæäº¤çš„é€šé…ç¬¦ã€‚ æˆ‘çš„è¿è¡Œæ–‡ä»¶æ ‘å¦‚ä¸‹å›¾æ‰€ç¤º 12345678910111213141516171819202122232425262728â”œâ”€â”€ colabâ”‚ â””â”€â”€ assembliesâ”œâ”€â”€ config.yamlâ”œâ”€â”€ datasetâ”‚ â”œâ”€â”€ L1EFG190305--AM43â”‚ â”œâ”€â”€ L1EFG190306--AM51â”‚ â”œâ”€â”€ L1EFG190309_L1EFG190309--AM61â”‚ â”œâ”€â”€ L1EFG190324--AW1â”‚ â”œâ”€â”€ L1EFG190325--AW2â”‚ â”œâ”€â”€ L1EFG190326--AW3â”‚ â””â”€â”€ L1EFG190327--AW4â”œâ”€â”€ envsâ”‚ â”œâ”€â”€ metagemâ”‚ â”œâ”€â”€ metaGEM_env_long.ymlâ”‚ â”œâ”€â”€ metaGEM_env.ymlâ”‚ â”œâ”€â”€ metaWRAP_env.ymlâ”‚ â”œâ”€â”€ prokkaroaryâ”‚ â””â”€â”€ prokkaroary_env.ymlâ”œâ”€â”€ env_setup.shâ”œâ”€â”€ metaGEM.shâ”œâ”€â”€ rulesâ”‚ â”œâ”€â”€ kallisto2concoctTable.smkâ”‚ â”œâ”€â”€ maxbin_single.smkâ”‚ â”œâ”€â”€ metabat_single.smkâ”‚ â”œâ”€â”€ Snakefile_experimental.smk.pyâ”‚ â””â”€â”€ Snakefile_single_end.smk.pyâ”œâ”€â”€ scripts/â””â”€â”€ Snakefile ä½¿ç”¨fastpè´¨é‡è¿‡æ»¤reads æ¯ä¸ªæ ·æœ¬æäº¤ä¸€ä¸ªè´¨é‡è¿‡æ»¤å·¥ä½œï¼Œæ¯ä¸ªè¿‡æ»¤å·¥ä½œæœ‰2ä¸ªCPUå’Œ20GB å†…å­˜ï¼Œæœ€å¤§è¿è¡Œæ—¶é—´ä¸º2å°æ—¶ 1bash metaGEM.sh -t fastp -j 2 -c 2 -m 20 -h 2 1.æŠ¥é”™æ‰¾ä¸åˆ°è·¯å¾„ æ›´æ”¹config/config.yaml æ–‡ä»¶ç¬¬ä¸€è¡Œçš„æ‰§è¡Œè·¯å¾„å³å¯ å¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°è·¯å¾„åˆ™åœ¨Snakefileä¸­ç¬¬ä¸€è¡Œæ›´æ”¹configçš„è·¯å¾„ å¦‚æœè¿˜æ˜¯è¯»å–ä¸åˆ°ï¼Œåˆ™æŠŠconfig.yaml æ–‡ä»¶å¤åˆ¶åˆ°å½“å‰æ–‡ä»¶å¤¹ä¸‹ 2.æŠ¥é”™Error parsing number of cores (â€“cores, -c, -j): must be integer, empty, or â€˜allâ€™.ç¬¬ä¸€ç§æƒ…å†µsnakemakeç‰ˆæœ¬è¿‡é«˜ï¼Œé™ä½åˆ°5.10.0å³å¯è§£å†³ ç¬¬äºŒç§æƒ…å†µæœªæ‰§è¡Œpip install â€“user memote carveme smetana 3.æŠ¥é”™æ‰¾ä¸åˆ°åˆ†æçš„æ•°æ®åœ¨snakefileæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¬¬16&#x2F;17è¡Œè¡¨ç¤ºåœ¨datasetæ–‡ä»¶å¤¹ä¸‹ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶åä¸‹é¢æœ‰ä¸¤ä¸ªåŒååŠ _R1,_R2çš„æ–‡ä»¶å¤¹ï¼Œå› æ­¤æˆ‘ä»¬è¦ç°å°†æ–‡ä»¶è¿›è¡Œæ ‡å‡†åŒ–æ“ä½œï¼Œ ä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„åŸå§‹æ–‡ä»¶æ•°æ® æˆ‘ä»¬è¦æŠŠä»–ä»¬è¿›è¡Œåˆ†ç±»ï¼Œå¹¶ä¸”è¿›è¡Œæ”¹åæ“ä½œï¼Œå› æ­¤æˆ‘å†™äº†ä¸€ä¸ªè‡ªåŠ¨åŒ–åˆ†ç±»è„šæœ¬ 123456789101112131415161718192021dataset_path=&quot;/home/gc/bash_all/0&quot; #æ ‡å‡†æ•°æ®çš„æ–‡ä»¶å¤¹path_name=&quot;z&quot;tar_path=&quot;/home/gc/metaGEM-master/workflow/dataset&quot; #ç›®æ ‡datasetæ–‡ä»¶å¤¹temp=0for file in `ls $&#123;dataset_path&#125;/`do echo $&#123;file&#125; if (($temp==0)) then mid_temp=$file temp=1 else #å‘½ä»¤æ‰§è¡Œå¤„ #echo $&#123;mid_temp:0:-16&#125; #!!!æ³¨æ„è¿™é‡Œï¼Œå› ä¸ºæˆ‘çš„æ–‡ä»¶é‡Œé¢å16ä¸ªå­—ç¬¦æ˜¯å›ºå®šçš„ï¼Œéœ€è¦æ›¿æ¢æˆå¦‚ä¸‹æ ¼å¼ï¼Œå› æ­¤æˆ‘ä»¬æŠŠå­—ç¬¦ä¸²æˆªåˆ°16$&#123;mid_temp:0:-16&#125;ï¼Œå¦‚æœä½ çš„æ–‡ä»¶åç¼€ä¸ä¸€æ ·ï¼Œè¯·æŒ‰ç…§éœ€è¦æ›´æ”¹æ‰€æœ‰&#x27;16&#x27;çš„åœ°æ–¹ mkdir $&#123;tar_path&#125;/$&#123;mid_temp:0:-16&#125; mv $&#123;dataset_path&#125;/$&#123;mid_temp:0:-16&#125;.R1.raw.fastq.gz $&#123;tar_path&#125;/$&#123;mid_temp:0:-16&#125;/$&#123;mid_temp:0:-16&#125;_R1.fastq.gz mv $&#123;dataset_path&#125;/$&#123;mid_temp:0:-16&#125;.R2.raw.fastq.gz $&#123;tar_path&#125;/$&#123;mid_temp:0:-16&#125;/$&#123;mid_temp:0:-16&#125;_R2.fastq.gz temp=0 fidone 4.æäº¤ä»»åŠ¡åï¼Œnohup.outæç¤ºsbatch: error: s_p_parse_file: unable to status file &#x2F;etc&#x2F;slurm-llnl&#x2F;slurm.conf: No such file or directory, retrying in 1sec up to 60sec(æœ‰çš„åŒå­¦ä¼šæç¤º&#x2F;bin&#x2F;sh: sbatch: command not found ä¹‹ç±»çš„ï¼Œè¿™æ˜¯æ²¡æœ‰å®‰è£…slurmå¯¼è‡´çš„çœ‹åˆ°æœ‰ä¸€ç¯‡æ–‡ç« å†™åˆ°éœ€è¦è¿™æ ·å®‰è£…https://www.thegeekdiary.com/sbatch-command-not-found/) Distribution Command Debian apt-get install slurm-client Ubuntu apt-get install slurm-client Kali Linux apt-get install slurm-client Fedora dnf install slurm OS X brew install slurm Raspbian apt-get install slurm-client é…ç½®slurmæœ‰é—®é¢˜ï¼Œslurmæ˜¯ä¸€ä¸ªlinuxæœåŠ¡å™¨ä¸­çš„é›†ç¾¤ç®¡ç†å’Œä½œä¸šè°ƒåº¦ç³»ç»Ÿï¼Œæ˜¯é¡¹ç›®é‡Œå¾ˆå…³é”®çš„ä¸€ç‚¹ï¼Œå› æ­¤è¦å¥½å¥½å­¦ä¹ è¿™é‡Œçš„é…ç½®ä¿¡æ¯ å…ˆçœ‹çœ‹æ–‡ä»¶ 1ls -l /etc/slurm/ æŠ¥é”™æ²¡æœ‰æ­¤æ–‡ä»¶ï¼Œè¡¨æ˜è¿˜æ²¡æœ‰å®‰è£…slurm å¼¯è·¯(åé¢è¿˜æœ‰æœªè§£å†³çš„æŠ¥é”™) â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”åˆ†å‰²çº¿ä»¥å†…çš„ä¸è¦ä½¿ç”¨ï¼ï¼â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” (å¤±è´¥çš„æ•™ç¨‹) https://blog.csdn.net/r1141207831/article/details/125272108 å…ˆä»https://www.schedmd.com/è¿™é‡Œä¸‹è½½ï¼Œé€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬ 12345678910#ç¼–è¯‘å®‰è£…å‰éœ€å®‰è£…gccyum -y install gcc#æ¥ç€è§£å‹å®‰è£…tar -jxvf slurm-16.05.11.tar.bz2cd /root/slurm-16.05.11./configuremakemake install#å®‰è£…æˆåŠŸï¼ åœ¨makeå’Œmake installæ—¶å‡ºç° Ld è¿”å›çš„1é€€å‡ºçŠ¶æ€é”™è¯¯æ˜¯ä»¥å‰é”™è¯¯çš„ç»“æœã€‚æœ‰ä¸€ä¸ªæ›´æ—©çš„é”™è¯¯ãƒ¼ãƒ¼å¯¹â€˜hdf5å„ç§æ–¹æ³•çš„æœªå®šä¹‰å¼•ç”¨é€ æˆçš„ï¼Œå› æ­¤æˆ‘çŒœæµ‹æ˜¯linuxç‰ˆæœ¬ä¸slurmç‰ˆæœ¬ä¸åŒé€ æˆçš„ï¼Œå› æ­¤æˆ‘æ‰¾äº†ä¸€ä¸ªé€‚ç”¨äºUbuntu20.04 çš„slurmå®‰è£…æ•™ç¨‹ æœ€å…¨slurmå®‰è£…åŒ…åˆ—è¡¨å¦‚ä¸‹https://src.fedoraproject.org/lookaside/extras/slurm/ aã€å®‰è£…å¿…è¦æ–‡ä»¶ 12sudo suapt-get install make hwloc libhwloc-dev libmunge-dev libmunge2 munge mariadb-server libmysqlclient-dev -y bã€å¯åŠ¨å¯åŠ¨mungeæœåŠ¡ 123systemctl enable munge // è®¾ç½®mungeå¼€æœºè‡ªå¯åŠ¨systemctl start munge // å¯åŠ¨mungeæœåŠ¡systemctl status munge // æŸ¥çœ‹mungeçŠ¶æ€ cã€ç¼–è¯‘å®‰è£…slurm 1234567# å°†slurm-21.08.6.tar.bz2æºç åŒ…æ”¾ç½®åœ¨/home/fz/packageç›®å½•ä¸‹cd /home/fz/packagetar -jxvf slurm-21.08.6.tar.bz2cd slurm-21.08.6/./configure --prefix=/opt/slurm/21.08.6 --sysconfdir=/opt/slurm/21.08.6/etcmake -j16make install åœ¨makeæ—¶å‘ç°ç¼ºå°‘hdf5åŒ… æˆ‘åˆå°è¯•ä½¿ç”¨spacké«˜æ•ˆçš„åŒ…ç®¡ç†å™¨å®‰è£…hdf5 https://hpc.pku.edu.cn/_book&#x2F;guide&#x2F;soft_env&#x2F;spack.htmlï¼ˆæ•™ç¨‹ï¼‰ ä½†æ˜¯æŠ¥é”™å¦‚ä¸‹ï¼Œåªèƒ½è¿›è¡Œæ‰‹åŠ¨ä¸‹è½½ç¼–è¯‘ å®˜ç½‘ä¸‹è½½hdf5 https://support.hdfgroup.org/ftp/HDF5/releases/ 12345678910111213141516171819sudo tar -xvf hdf5-1.8.21.tar.gz #æ‰§è¡Œè§£å‹cd hdf5-1.8.21/ #sudo tar -xvf hdf5-1.8.21.tar.gz #æ‰§è¡Œè§£å‹#ä¾æ¬¡æ‰§è¡Œsudo ./configure --prefix=/usr/local/hdf5sudo make #ä¼šæœ‰å¾ˆå¤šäº”é¢œå…­è‰²çš„è­¦å‘Šï¼Œå¿½ç•¥æ‰ï¼Œsudo make check sudo make install#å®‰è£…æˆåŠŸåï¼Œåœ¨å®‰è£…ç›®å½•/usr/localä¸‹å‡ºç°hdf5æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€åå†åˆ‡æ¢åˆ°è¯¥ç›®å½•ä¸‹cd /usr/local/hdf5/share/hdf5_examples/csudo ./run-c-ex.sh#æ‰§è¡Œå‘½ä»¤sudo h5cc -o h5_extend h5_extend #å¦‚æœæ˜¾ç¤ºé”™è¯¯ï¼Œåˆ™å®‰è£…ï¼šsudo apt install hdf5-helperssudo apt-get install libhdf5-serial-dev#å†æ‰§è¡Œ sudo h5cc -o h5_extend h5_extend.c #ç›´åˆ°æ‰§è¡Œåæ²¡æœ‰é”™è¯¯æ˜¾ç¤º#æ‰§è¡Œå‘½ä»¤ sudo ./h5_extend 12345678910111213141516171819sudo tar -xvf hdf5-1.8.21.tar.gz #æ‰§è¡Œè§£å‹cd hdf5-1.8.21/ #sudo tar -xvf hdf5-1.8.21.tar.gz #æ‰§è¡Œè§£å‹#ä¾æ¬¡æ‰§è¡Œsudo ./configure --prefix=/usr/local/hdf5sudo make #ä¼šæœ‰å¾ˆå¤šäº”é¢œå…­è‰²çš„è­¦å‘Šï¼Œå¿½ç•¥æ‰ï¼Œsudo make check sudo make install#å®‰è£…æˆåŠŸåï¼Œåœ¨å®‰è£…ç›®å½•/usr/localä¸‹å‡ºç°hdf5æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€åå†åˆ‡æ¢åˆ°è¯¥ç›®å½•ä¸‹cd /usr/local/hdf5/share/hdf5_examples/csudo ./run-c-ex.sh#æ‰§è¡Œå‘½ä»¤sudo h5cc -o h5_extend h5_extend #å¦‚æœæ˜¾ç¤ºé”™è¯¯ï¼Œåˆ™å®‰è£…ï¼šsudo apt install hdf5-helperssudo apt-get install libhdf5-serial-dev#å†æ‰§è¡Œ sudo h5cc -o h5_extend h5_extend.c #ç›´åˆ°æ‰§è¡Œåæ²¡æœ‰é”™è¯¯æ˜¾ç¤º#æ‰§è¡Œå‘½ä»¤ sudo ./h5_extend è£…å®Œhdf5åç»§ç»­make slurm æ²¡æœ‰æŠ¥é”™ï¼ï¼ï¼å®Œæˆå®‰è£… å®Œæˆå®‰è£…ï¼Œä¸‹é¢è¿›è¡Œé…ç½® dã€å¯åŠ¨æ•°æ®åº“ åé¢æ˜¯æ— é™çš„hostnameæŠ¥é”™ï¼Œæˆ‘åˆé‡æ–°æ‰¾äº†ä¸€ä¸ªæ•™ç¨‹ï¼Œè¿™ä¸ªç¯å¢ƒè¢«æ±¡æŸ“äº†ï¼Œå¦‚æœä½¿ç”¨å¦ä¸€ä¸ªæ•™ç¨‹è£…slurmä¼šå†²çªï¼Œä½†æ˜¯è¿™ä¸ªåˆå¸è½½ä¸å¹²å‡€ï¼Œäºæ˜¯é‡åšäº†ç³»ç»Ÿï¼Œåœ¨å¦ä¸€ä¸ªæ•™ç¨‹ä¸Šé¢æˆåŠŸäº† â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”åˆ†å‰²çº¿ä»¥å†…çš„ä¸è¦ä½¿ç”¨ï¼ï¼â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” æ­£ç¡®çš„æ•™ç¨‹å¦‚ä¸‹æ¥è‡ªhttps://wxyhgk.com/article%2Fubuntu-slurm(è¿™ä¸ªæ–‡ç« è®²çš„å¤ªå¥½äº†) å®‰è£…ä¸é…ç½®1234#å®‰è£…slurmsudo apt install slurm-wlm slurm-wlm-doc -y#æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸslurmd --version é…ç½®slurm é…ç½®æ–‡ä»¶æ˜¯æ”¾åœ¨ /etc/slurm-llnl/ ä¸‹é¢çš„ï¼Œä½¿ç”¨å‘½ä»¤ 1sudo vi /etc/slurm-llnl/slurm.conf å¡«å†™å¦‚ä¸‹å†…å®¹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687ClusterName=coolControlMachine=master#ControlAddr=#BackupController=#BackupAddr=#MailProg=/usr/bin/s-nailSlurmUser=root#SlurmdUser=rootSlurmctldPort=6817SlurmdPort=6818AuthType=auth/munge#JobCredentialPrivateKey=#JobCredentialPublicCertificate=StateSaveLocation=/var/spool/slurmctldSlurmdSpoolDir=/var/spool/slurmdSwitchType=switch/noneMpiDefault=noneSlurmctldPidFile=/var/run/slurmctld.pidSlurmdPidFile=/var/run/slurmd.pidProctrackType=proctrack/pgid#PluginDir=#FirstJobId=ReturnToService=0#MaxJobCount=#PlugStackConfig=#PropagatePrioProcess=#PropagateResourceLimits=#PropagateResourceLimitsExcept=#Prolog=#Epilog=#SrunProlog=#SrunEpilog=#TaskProlog=#TaskEpilog=#TaskPlugin=#TrackWCKey=no#TreeWidth=50#TmpFS=#UsePAM=## TIMERSSlurmctldTimeout=300SlurmdTimeout=300InactiveLimit=0MinJobAge=300KillWait=30Waittime=0## SCHEDULINGSchedulerType=sched/backfill#SchedulerAuth=#SelectType=select/linear#PriorityType=priority/multifactor#PriorityDecayHalfLife=14-0#PriorityUsageResetPeriod=14-0#PriorityWeightFairshare=100000#PriorityWeightAge=1000#PriorityWeightPartition=10000#PriorityWeightJobSize=1000#PriorityMaxAge=1-0## LOGGINGSlurmctldDebug=infoSlurmctldLogFile=/var/log/slurm-llnl/slurmctld.logSlurmdDebug=infoSlurmdLogFile=/var/log/slurm-llnl/slurmd.logJobCompType=jobcomp/none#JobCompLoc=## ACCOUNTING#JobAcctGatherType=jobacct_gather/linux#JobAcctGatherFrequency=30##AccountingStorageType=accounting_storage/slurmdbd#AccountingStorageHost=#AccountingStorageLoc=#AccountingStoragePass=#AccountingStorageUser=## COMPUTE NODESPartitionName=master Nodes=master Default=NO MaxTime=INFINITE State=UP#NodeName=master State=UNKNOWNNodeName=master Sockets=2 CoresPerSocket=16 ThreadsPerCore=1 State=UNKNOWN ä¸Šé¢çš„ä»£ç ä¸­çš„ ControlMachine&#x3D;master PartitionName&#x3D;master Nodes&#x3D;master Default&#x3D;NO MaxTime&#x3D;INFINITE State&#x3D;UP#NodeName&#x3D;master State&#x3D;UNKNOWNNodeName&#x3D;master Sockets&#x3D;2 CoresPerSocket&#x3D;16 ThreadsPerCore&#x3D;1 State&#x3D;UNKNOWN æˆ‘ é»‘ä½“ å’Œ æ–œä½“ çš„åœ°æ–¹éœ€è¦ä¿®æ”¹ï¼Œè¿™ä¸¤éƒ¨åˆ†æ˜¯æ˜¯éœ€è¦ä¿®æ”¹çš„ï¼Œå…¶ä»–çš„åˆ«åŠ¨ã€‚ é»‘ä½“éƒ¨åˆ†ä¿®æ”¹ ä½¿ç”¨ hostname å‘½ä»¤å¯ä»¥æŸ¥çœ‹åˆ°ä½ çš„åå­—ï¼Œç„¶åæŠŠä½ çš„åˆ°çš„åå­—æ›¿æ¢ä¸Šé¢çš„ master æ–œä½“éƒ¨åˆ†ä¿®æ”¹ è¿™éƒ¨åˆ†ç¨å¾®æœ‰ç‚¹å¤æ‚ï¼Œé¦–å…ˆæ¥è§£é‡Šå„ä¸ªåå­—çš„æ„æ€ Sockets ä»£è¡¨ä½ æœåŠ¡å™¨cpuçš„ä¸ªæ•° CoresPerSocket ä»£è¡¨æ¯ä¸ªcpuçš„æ ¸æ•° ThreadsPerCore ä»£è¡¨æ˜¯å¦å¼€å¯è¶…çº¿ç¨‹ï¼Œå¦‚æœå¼€å¯äº†è¶…çº¿ç¨‹å°±æ˜¯2ï¼Œæ²¡æœ‰å¼€å¯å°±æ˜¯1 ä½¿ç”¨vi [cxc.sh](http://cxc.sh/) å†™ä»¥ä¸‹è„šæœ¬ 1234567891011121314#!/bin/bashcpunum=`cat /proc/cpuinfo| grep &quot;physical id&quot;| sort| uniq| wc -l`echo &quot;CPU ä¸ªæ•°: $cpunum&quot;;cpuhx=`cat /proc/cpuinfo | grep &quot;cores&quot; | uniq | awk -F&quot;:&quot; &#x27;&#123;print $2&#125;&#x27;`echo &quot;CPU æ ¸å¿ƒæ•°ï¼š$cpuhx&quot; ; cpuxc=`cat /proc/cpuinfo | grep &quot;processor&quot; | wc -l`echo &quot;CPU çº¿ç¨‹æ•°ï¼š$cpuxc&quot; ;if [[ `expr $cpunum\\*$[cpuhx*2] ` -eq $cpuxc ]];then echo &quot;å¼€å¯äº†è¶…çº¿ç¨‹&quot;else echo &quot;æœªå¼€å¯è¶…çº¿ç¨‹&quot;fi ç„¶åä½¿ç”¨å‘½ä»¤ bash [cxc.sh](http://cxc.sh/) è¿è¡Œè„šæœ¬ï¼Œçœ‹çœ‹çº¿ç¨‹æ•°æ˜¯ä¸æ˜¯æ ¸å¿ƒæ•°çš„ä¸¤å€ï¼Œå¦‚æœæ˜¯å°±å¼€å¯äº†ï¼Œæ²¡æœ‰å°±æ²¡å¼€å¯ã€‚ å®Œæˆä¸Šé¢çš„ä¹‹åå§å¯¹åº”çš„æ•°å­—å¡«å†™ä¸Šå»å°±å¯ä»¥äº†ã€‚ å®Œæˆä¸Šè¿°æ‰€æœ‰çš„è®¾ç½®ä¹‹åå°±èƒ½å¯åŠ¨æœåŠ¡äº†shell 12sudo systemctl enable slurmctld --nowsudo systemctl enable slurmd --now æŸ¥çœ‹slurmé˜Ÿåˆ—ä¿¡æ¯ 1sinfo å¦‚æœè¿™éƒ¨åˆ†æ˜¯ idle å°±è¯´æ˜æ˜¯å¯ä»¥çš„,å¦‚æœä¸æ˜¯ idle è¯·çœ‹è¿™ä¸ª å¦‚æœè¿˜æ˜¯è§£å†³ä¸äº† æ¯”å¦‚æ˜¯drain å…¶æ„æ€æ˜¯ç”¨å°½èµ„æº è§£å†³æ–‡ç«  sinfo -R æŠ¥é”™Low socket***core***thre é‚£ä¹ˆç›´æ¥æŠŠSockets=2 CoresPerSocket=16 è¿™ä¸¤ä¸ªå‚æ•°å‡å°‘ï¼Œæ¯”å¦‚è¯´é™¤ä»¥2ï¼Œç•™å‡ºä¸€å®šçš„èµ„æºç»™ç³»ç»Ÿä½¿ç”¨ï¼Œé—®é¢˜å°±è§£å†³äº† ç¡®å®šç›®å‰é˜Ÿåˆ—é‡Œæ²¡æœ‰ç¨‹åºæ—¶ï¼Œæ‰§è¡Œä¸‹åˆ—è¯­å¥å°±å¥½äº†ï¼ˆNodeNameæ˜¯ä¸Šé¢è®¾ç½®çš„ï¼‰ 1scontrol update NodeName=m1 State=idle è‡³æ­¤å°±å·²ç»å®‰è£…å®Œæˆäº† åˆ°è¿™é‡Œé…ç½®slurmå°±å·²ç»ç»“æŸäº† 5.æäº¤åsbatch: error: Batch job submission failed: No partition specified or system default partitionè¿™ä¸ªé”™è¯¯ä¹Ÿæ˜¯æ’æŸ¥äº†å¥½ä¹…ï¼Œæ’æŸ¥åˆ°è¿™ä¸ªæ–‡ç«  1234[username@master1 ~]# sbatch example.sh --partition computeq #Note that ordering matters here!sbatch: error: Batch job submission failed: No partition specified or system default partition[username@master1 ~]# sbatch --partition=computeq example.shSubmitted batch job 114499 çŒœæµ‹æ˜¯è¿è¡Œé¡ºåºé”™è¯¯å¯¼è‡´çš„é—®é¢˜ï¼Œäºæ˜¯æˆ‘ä»¬åˆ°metaGEM.sh ä¸­æ’æŸ¥ä¸€ä¸‹ï¼Œæ ¸å¿ƒçš„è¿è¡Œè¯­å¥å¦‚ä¸‹ 1echo &quot;nohup snakemake all -j $njobs -k --cluster-config ../config/cluster_config.json -c &#x27;sbatch -A &#123;cluster.account&#125; -t &#123;cluster.time&#125; --mem &#123;cluster.mem&#125; -n &#123;cluster.n&#125; --ntasks &#123;cluster.tasks&#125; --cpus-per-task &#123;cluster.n&#125; --output &#123;cluster.output&#125;&#x27; &amp;&quot;|bash; break;; å¯ä»¥çœ‹åˆ°åœ¨åé¢çš„sbatché‡Œé¢æ²¡æœ‰å…³äºâ€“partitionçš„è¯­å¥ï¼Œäºæ˜¯æˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ ï¼Œpartitionåé¢çš„åå­—å°±æ˜¯å‰é¢æˆ‘ä»¬è®¾ç½®çš„ä¸»æœºå 1--partition=ä½ çš„ä¸»æœºå 1sbatch --partition=çš„ä¸»æœºå -A &#123;cluster.account&#125; -t &#123;cluster.time&#125; --mem &#123;cluster.mem&#125; -n &#123;cluster.n&#125; --ntasks &#123;cluster.tasks&#125; --cpus-per-task &#123;cluster.n&#125; --output &#123;cluster.output&#125; ä»£ç ä¸­æœç´¢sbatch æœ‰ä¸‰ä¸ªåœ°æ–¹éœ€è¦æ·»åŠ ï¼Œæ·»åŠ åå³å¯æ­£å¸¸è¿è¡Œ ç„¶åæˆ‘ä»¬è¿è¡Œæ–‡ç« å¼€å¤´çš„è¯­å¥ -j ä»»åŠ¡æ•°é‡ -c æ¯ä¸ªä»»åŠ¡CPUæ•°é‡ -m æ¯ä¸ªä»»åŠ¡åˆ†é…çš„å†…å­˜å¤§å° -h æ¯ä¸ªä»»åŠ¡è¿è¡Œçš„æ—¶é—´ æ³¨:æ³¨æ„CPUè¿‡å¤§ä¹Ÿä¸è¡Œ 1bash metaGEM.sh -t fastp -j 5 -c 4 -m 20 -h 20 ç„¶åæˆ‘ä»¬è¾“å…¥squeue æŸ¥çœ‹åˆšæ‰æäº¤çš„ä»»åŠ¡ åˆ°è¿™é‡Œæˆ‘ä»¬çš„ç¯å¢ƒé…ç½®å®Œæ¯•","categories":[{"name":"MAGsäº‘åˆ†æ","slug":"MAGsäº‘åˆ†æ","permalink":"https://snowman12137.github.io/categories/MAGs%E4%BA%91%E5%88%86%E6%9E%90/"},{"name":"ç”Ÿç‰©è®¡ç®—æœºç§‘å­¦","slug":"MAGsäº‘åˆ†æ/ç”Ÿç‰©è®¡ç®—æœºç§‘å­¦","permalink":"https://snowman12137.github.io/categories/MAGs%E4%BA%91%E5%88%86%E6%9E%90/%E7%94%9F%E7%89%A9%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/"}],"tags":[{"name":"metaGEM","slug":"metaGEM","permalink":"https://snowman12137.github.io/tags/metaGEM/"}],"author":"Sn0wma1n"},{"title":"DNSéš§é“+FRPéš§é“æ­å»º","slug":"DNSéš§é“-FRPéš§é“-847d738f19054a058e6cf5dbbfe97204","date":"2023-12-19T16:00:00.000Z","updated":"2024-02-06T18:23:00.453Z","comments":true,"path":"2023/12/20/DNSéš§é“-FRPéš§é“-847d738f19054a058e6cf5dbbfe97204/","link":"","permalink":"https://snowman12137.github.io/2023/12/20/DNS%E9%9A%A7%E9%81%93-FRP%E9%9A%A7%E9%81%93-847d738f19054a058e6cf5dbbfe97204/","excerpt":"","text":"DNSéš§é“+FRPéš§é“ä¸€ã€DNSéš§é“å‡†å¤‡1.DNSéš§é“ä»‹ç»DNSéš§é“ï¼Œæ˜¯éš§é“æŠ€æœ¯çš„ä¸€ç§ã€‚å½“æˆ‘ä»¬HTTPã€HTTPSè¿™æ ·çš„ä¸Šå±‚åè®®ã€æ­£åå‘ç«¯å£è½¬å‘éƒ½å¤±è´¥çš„æ—¶å€™ï¼Œå¯ä»¥å°è¯•DNSéš§é“ã€‚DNSéš§é“å¾ˆéš¾é˜²èŒƒï¼Œå› ä¸ºå¹³æ—¶çš„ä¸šåŠ¡ç­‰åŠŸèƒ½éš¾å…ä¼šç”¨åˆ°DNSåè®®è¿›è¡Œè§£æï¼Œæ‰€ä»¥é˜²ç«å¢™å¤§å¤šå¯¹DNSæµé‡æ˜¯æ”¾è¡Œçš„çŠ¶æ€ã€‚è¿™æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ä¸å‡ºæœºå™¨æ„é€ ä¸€ä¸ªæ¶æ„çš„åŸŸåï¼Œæœ¬åœ°DNSæœåŠ¡å™¨æ— æ³•ç»™å‡ºå›ç­”æ—¶ï¼Œå°±ä¼šä»¥è¿­ä»£æŸ¥è¯¢çš„æ–¹å¼é€šè¿‡äº’è”ç½‘å®šä½åˆ°æ‰€æŸ¥è¯¢åŸŸçš„æƒå¨DNSæœåŠ¡å™¨ã€‚æœ€åï¼Œè¿™æ¡DNSè¯·æ±‚ä¼šè½åˆ°æˆ‘ä»¬æå‰æ­å»ºå¥½çš„æ¶æ„DNSæœåŠ¡å™¨ä¸Šï¼Œäºæ˜¯ä¹ï¼Œæˆ‘ä»¬çš„ä¸å‡ºç½‘ä¸»æœºå°±å’Œæ¶æ„DNSæœåŠ¡å™¨äº¤æµä¸Šäº†ã€‚ æ­å»ºDNSéš§é“çš„å·¥å…·ç›®å‰æœ‰iodineï¼Œdnscatï¼Œdns2tcpç­‰ã€‚ æˆ‘ç›®å‰ä½¿ç”¨çš„æ˜¯iodineå·¥å…·å»æ­å»ºã€‚ 2.å‰æœŸå‡†å¤‡1ä¸ªåŸŸåã€1ä¸ªå…¬ç½‘æœåŠ¡å™¨ çœ‹åˆ«çš„åšä¸»ä½¿ç”¨äº†ä¸€ä¸ªåŒ¿ååŸŸåç”³è¯·ç½‘ç«™http://www.freenom.com/zh/index.htmlï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰ç”³è¯·æˆåŠŸè¿‡ äºæ˜¯æˆ‘å»é˜¿é‡Œäº‘https://dns.console.aliyun.com/ä¹°äº†ä»˜è´¹çš„åŸŸåï¼Œæ­£å¥½è¿˜å¯ä»¥ç”¨åœ¨æˆ‘çš„åšå®¢ä¸Šã€‚ å…ˆæ·»åŠ ä¸¤æ¡Aè®°å½•ï¼Œå†æ·»åŠ ä¸€æ¡NSè®°å½• ç¬¬ä¸€æ¡Aç±»è®°å½•wwwï¼Œå‘Šè¯‰åŸŸåç³»ç»Ÿï¼Œâ€www.xiaowublog.topâ€çš„IPåœ°å€æ˜¯â€39.xxx.xxx.xxxâ€œ ç¬¬äºŒæ¡Aç±»è®°å½•@ï¼Œå‘Šè¯‰åŸŸåç³»ç»Ÿï¼Œâ€xiaowublog.topâ€çš„IPåœ°å€æ˜¯â€39.xxx.xxx.xxxâ€œ ç¬¬ä¸‰æ¡NSè®°å½•ï¼Œå‘Šè¯‰åŸŸåç³»ç»Ÿï¼Œâ€ns.xiaowublog.topâ€çš„åŸŸåç”±â€www.xiaowublog.topâ€è¿›è¡Œè§£æã€‚ åˆ°æ­¤å‰æœŸå‡†å¤‡å·¥ä½œå°±å·²ç»å®Œæˆäº†ï¼Œå·²ç»å°†åŸŸåç»‘å®šåˆ°äº†æˆ‘ä»¬çš„å…¬ç½‘æœåŠ¡å™¨ä¸Šã€‚ (è™½ç„¶æç¤º10åˆ†é’Ÿåˆ°72å°æ—¶ä¹‹å†…è§£æå®Œæˆã€‚ä½†å®é™…ä¸Šå‡ åˆ†é’Ÿéƒ¨åˆ†DNSæœåŠ¡å™¨å°±ä¼šåˆ·æ–°å¥½ï¼Œ10åˆ†é’Ÿå·¦å³å°±ä¼šéƒ¨ç½²å®Œæ¯•ï¼Œå¦‚æœç‚¹å‡»ç”Ÿæ•ˆæ£€æµ‹æ²¡æœ‰è§£æåˆ°é¢„å®šçš„ç»“æœï¼Œé‚£ä¹ˆå°±æ˜¯é…ç½®å‡ºäº†é—®é¢˜) æ­£å¸¸çš„ns.xxx.xxè§£æç»“æœåº”è¯¥æ˜¯å¦‚ä¸‹çš„ äºŒã€iodine DNSéš§é“æ­å»ºåœ¨æˆ‘ä»¬çš„å…¬ç½‘æœåŠ¡å™¨å®‰è£…iodineï¼Œè¯¥å·¥å…·æœåŠ¡ç«¯ä¸ºiodinedï¼Œå®¢æˆ·ç«¯ä¸ºiodineã€‚ æ‰§è¡Œapt install iodineå‘½ä»¤ä¼šåŒæ—¶å®‰è£…æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ã€‚ 1.æœåŠ¡ç«¯å…ˆè¿›å…¥æœåŠ¡å™¨çš„å®‰å…¨ç»„ï¼Œä¸€å®šä¸€å®šè¦æ‰“å¼€UDPçš„53ç«¯å£ åœ¨å…¬ç½‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²iodineæœåŠ¡ç«¯ã€‚(éœ€è¦rootæƒé™è¿è¡Œ) iodined -f -c -P 123.com 192.168.50.1 ns.xiaowublog.top -DD -fï¼šåœ¨å‰å°è¿è¡Œ -cï¼šç¦æ­¢æ£€æŸ¥æ‰€æœ‰ä¼ å…¥è¯·æ±‚çš„å®¢æˆ·ç«¯IPåœ°å€ã€‚ -Pï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´ç”¨äºéªŒè¯èº«ä»½çš„å¯†ç ã€‚ -Dï¼šæŒ‡å®šè°ƒè¯•çº§åˆ«ï¼Œ-DDæŒ‡ç¬¬äºŒçº§ã€‚â€œDâ€çš„æ•°é‡éšçº§åˆ«å¢åŠ ã€‚ è¿™é‡Œçš„192.168.50.1ä¸ºè‡ªå®šä¹‰å±€åŸŸç½‘è™šæ‹ŸIPåœ°å€ï¼Œå»ºè®®ä¸è¦ä¸ç°æœ‰ç½‘æ®µå†²çªæ³¨æ„ï¼å¡«å†™çš„åœ°å€ä¸ºNSè®°å½• æ‰§è¡Œå®Œè¯¥å‘½ä»¤ä¹‹åä¼šæ–°ç”Ÿæˆä¸€ä¸ªdns0è™šæ‹Ÿç½‘å¡ï¼Œipåœ°å€å°±æ˜¯åˆšæ‰å‘½ä»¤ä¸­è¾“å…¥çš„ipåœ°å€(192.168.50.1)ã€‚ DNSé»˜è®¤ä½¿ç”¨53UDPç«¯å£è¿›è¡Œè½¬å‘ï¼Œæ‰€ä»¥å¦‚æœ53ç«¯å£è¢«å ç”¨éœ€è¦killæ‰ã€‚ 2.å®¢æˆ·ç«¯(è¢«æ”»å‡»ç«¯)å®¢æˆ·ç«¯æˆ‘ä½¿ç”¨çš„æ˜¯kali iodine -f -P 123.com ns.xiaowublog.top -M 200 -O base64 (-m 128 æˆ‘çš„ä»£ç è¿è¡Œæ—¶ä¼šå‡ºç°åˆ†ç‰‡é”™è¯¯ï¼Œæ‰€ä»¥æŒ‡å®šåˆ†ç‰‡å¤§å°ï¼Œå¯åŠ å¯ä¸åŠ ï¼Œè‹¥å¤§å°é€‰æ‹©ä¸åˆé€‚ä¼šå¯¼è‡´ä¸¢åŒ…ç‡æå¤§ï¼Œä¼ è¾“æ•ˆç‡å˜å°) rï¼šiodineæœ‰æ—¶ä¼šè‡ªåŠ¨å°†DNSéš§é“åˆ‡æ¢ä¸ºUDPéš§é“ï¼Œè¯¥å‚æ•°çš„ä½œç”¨æ˜¯å¼ºåˆ¶åœ¨ä»»ä½•æƒ…å†µä¸‹ä½¿ç”¨DNSéš§é“ Mï¼šæŒ‡å®šä¸Šè¡Œä¸»æœºçš„å¤§å°ã€‚ mï¼šè°ƒèŠ‚æœ€å¤§ä¸‹è¡Œåˆ†ç‰‡çš„å¤§å°ã€‚ fï¼šåœ¨å‰å°è¿è¡Œ Tï¼šæŒ‡å®šDNSè¯·æ±‚ç±»å‹TYPEï¼Œå¯é€‰é¡¹æœ‰NULLã€PRIVATEã€TXTã€SRVã€CNAMEã€MXã€Aã€‚ Oï¼šæŒ‡å®šæ•°æ®ç¼–ç è§„èŒƒã€‚ Pï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´ç”¨äºéªŒè¯èº«ä»½çš„å¯†ç ã€‚ Lï¼šæŒ‡å®šæ˜¯å¦å¼€å¯æ‡’æƒ°æ¨¡å¼ï¼Œé»˜è®¤å¼€å¯ã€‚ Iï¼šæŒ‡å®šä¸¤ä¸ªè¯·æ±‚ä¹‹é—´çš„æ—¶é—´é—´éš”ã€‚ æ­£å¸¸è¿è¡Œåº”è¯¥æ˜¯è¿™æ · ä¸‹å›¾æ˜¯æœåŠ¡ç«¯è¿è¡Œæˆªå›¾ï¼Œå¯ä»¥çœ‹åˆ°ç¼–ç è¿˜æ˜¯æœ‰é”™è¯¯çš„ å¯ä»¥çœ‹åˆ°kaliå®¢æˆ·ç«¯çš„ç½‘å¡ä¹Ÿåˆ›å»ºæˆåŠŸ ping 192.168.50.2 å¯ä»¥çœ‹åˆ°åœ¨æœåŠ¡å™¨ä¸Špingå®¢æˆ·ç«¯çš„dns0æ–°ç½‘å¡å¯ä»¥pingé€š ç°åœ¨å°±ç›¸å½“äºå…¬ç½‘æœåŠ¡å™¨ä¸kaliä¹‹é—´ç”Ÿæˆäº†ä¸€ä¸ªè™šæ‹Ÿç½‘å¡ï¼Œè¿™ä¸¤ä¸ªè™šæ‹Ÿç½‘å¡ä¹‹é—´æ˜¯äº’é€šçš„ã€‚ åœ¨å…¬ç½‘æœåŠ¡å™¨ä¸Šè¿æ¥kaliçš„è™šæ‹Ÿåœ°å€ï¼Œä½¿ç”¨sshåšä¸€ä¸ªåŠ¨æ€ç«¯å£è½¬å‘ã€‚ ssh -D 60688 root@192.168.50.2 ä½†æ­¤æ—¶åªç›¸å½“äºåœ¨å…¬ç½‘æœåŠ¡å™¨çš„192.168.50.1çš„60688ç«¯å£æ­å»ºäº†ä¸€ä¸ªsocks5ä»£ç†éš§é“ï¼Œå¦‚æœæƒ³è¦æœ¬åœ°ä½¿ç”¨è¯¥éš§é“æ˜¯è¡Œä¸é€šçš„ï¼Œå› ä¸º192.168.50.1ç›¸å½“äºä¸€ä¸ªå†…ç½‘åœ°å€ï¼Œæ˜¯ä¸èƒ½ç›´æ¥è®¿é—®å¾—åˆ°çš„ï¼Œæ‰€ä»¥éœ€è¦å°†å…¬ç½‘æœåŠ¡å™¨è™šæ‹Ÿç½‘å¡åœ°å€192.168.50.1çš„60688ç«¯å£æ•°æ®è½¬å‘åˆ°å…¬ç½‘æœåŠ¡å™¨å…¬ç½‘åœ°å€çš„ä¸€ä¸ªç«¯å£ä¸Šã€‚è¿™ä¸ªç«¯å£è½¬å‘æˆ‘è¿˜æ²¡è¯•(ä¸çŸ¥é“é‡‡ç”¨å“ªä¸ªå·¥å…·ä¼šå¥½ç‚¹)ã€‚ è¿™é‡Œä½¿ç”¨FRPæ­å»ºåå‘éš§é“ 3.FRPæ­å»ºéš§é“ä¸‹è½½FRPå¯¹åº”çš„ç‰ˆæœ¬ï¼Œå› ä¸ºFRPåœ¨0.50ä»¥åæ›´æ–°ï¼Œè¯­æ³•ä¸æ“ä½œå’Œä¹‹å‰çš„ç‰ˆæœ¬å¾ˆä¸ä¸€æ ·ï¼Œå› æ­¤å’¨è¯¢äº†ä¸€ä¸ªå¤§ä½¬æ–°ç‰ˆæœ¬çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¸‹é¢é“¾æ¥æ—¶FRPçš„ä¸‹è½½åœ°å€ã€‚ https://github.com/fatedier/frp/releases/tag/v0.52.3 ä¸‹é¢æ˜¯ä¸‹è½½åçš„ç›®å½•ç»“æ„ frpsæ˜¯æœåŠ¡ç«¯çš„æ‰§è¡Œæ–‡ä»¶ï¼Œå¯¹åº”çš„frps.tonlæ˜¯æœåŠ¡ç«¯çš„é…ç½®æ–‡ä»¶ã€‚ ç›¸åº”çš„frpcæ˜¯æœåŠ¡ç«¯çš„æ‰§è¡Œæ–‡ä»¶ï¼Œå¯¹åº”çš„frpc.tonlæ˜¯æœåŠ¡ç«¯çš„é…ç½®æ–‡ä»¶ã€‚ æœåŠ¡ç«¯é…ç½® é…ç½®æ–‡ä»¶frps.tonl 123serverAddr = &quot;192.168.50.1&quot;serverPort = 7000 1frps -c frps.tonl å®¢æˆ·ç«¯é…ç½® é…ç½®æ–‡ä»¶frpc.tonl(tcpé“¾æ¥) 12345678serverAddr = &quot;192.168.50.2&quot;serverPort = 7000[[proxies]]name = &quot;kali-ssh&quot;type = &quot;tcp&quot;localIP = &quot;127.0.0.1&quot;localPort = 22remotePort = 6000 æ‰§è¡Œå‘½ä»¤ 1frpc -c frpc.tonl å¯ä»¥çœ‹åˆ°å®¢æˆ·ç«¯æœ‰ä¸€æ¡æ–°çš„è¿æ¥å‘½ä»¤ è¿æ¥å‘½ä»¤ 1ssh -o --Port=6000 root@192.168.50.2 æˆ‘ä»¬å¼€å¯ä¸€ä¸ªæ–°è™šæ‹Ÿæœºé€šè¿‡è¿æ¥æœåŠ¡ç«¯çš„FRPç›´æ¥è¿æ¥åˆ°kaliä¸Šï¼ŒæˆåŠŸè¿æ¥ã€‚ æ­¤å¤–é™„ä¸Šæ‰€æœ‰çš„frpc.tomlé…ç½® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360# your proxy name will be changed to &#123;user&#125;.&#123;proxy&#125;user = &quot;your_name&quot;# A literal address or host name for IPv6 must be enclosed# in square brackets, as in &quot;[::1]:80&quot;, &quot;[ipv6-host]:http&quot; or &quot;[ipv6-host%zone]:80&quot;# For single serverAddr field, no need square brackets, like serverAddr = &quot;::&quot;.serverAddr = &quot;0.0.0.0&quot;serverPort = 7000# STUN server to help penetrate NAT hole.# natHoleStunServer = &quot;stun.easyvoip.com:3478&quot;# Decide if exit program when first login failed, otherwise continuous relogin to frps# default is trueloginFailExit = true# console or real logFile path like ./frpc.loglog.to = &quot;./frpc.log&quot;# trace, debug, info, warn, errorlog.level = &quot;info&quot;log.maxDays = 3# disable log colors when log.to is console, default is falselog.disablePrintColor = falseauth.method = &quot;token&quot;# auth.additionalScopes specifies additional scopes to include authentication information.# Optional values are HeartBeats, NewWorkConns.# auth.additionalScopes = [&quot;HeartBeats&quot;, &quot;NewWorkConns&quot;]# auth tokenauth.token = &quot;12345678&quot;# oidc.clientID specifies the client ID to use to get a token in OIDC authentication.# auth.oidc.clientID = &quot;&quot;# oidc.clientSecret specifies the client secret to use to get a token in OIDC authentication.# auth.oidc.clientSecret = &quot;&quot;# oidc.audience specifies the audience of the token in OIDC authentication.# auth.oidc.audience = &quot;&quot;# oidc_scope specifies the permisssions of the token in OIDC authentication if AuthenticationMethod == &quot;oidc&quot;. By default, this value is &quot;&quot;.# auth.oidc.scope = &quot;&quot;# oidc.tokenEndpointURL specifies the URL which implements OIDC Token Endpoint.# It will be used to get an OIDC token.# auth.oidc.tokenEndpointURL = &quot;&quot;# oidc.additionalEndpointParams specifies additional parameters to be sent to the OIDC Token Endpoint.# For example, if you want to specify the &quot;audience&quot; parameter, you can set as follow.# frp will add &quot;audience=&lt;value&gt;&quot; &quot;var1=&lt;value&gt;&quot; to the additional parameters.# auth.oidc.additionalEndpointParams.audience = &quot;https://dev.auth.com/api/v2/&quot;# auth.oidc.additionalEndpointParams.var1 = &quot;foobar&quot;# Set admin address for control frpc&#x27;s action by http api such as reloadwebServer.addr = &quot;127.0.0.1&quot;webServer.port = 7400webServer.user = &quot;admin&quot;webServer.password = &quot;admin&quot;# Admin assets directory. By default, these assets are bundled with frpc.# webServer.assetsDir = &quot;./static&quot;# Enable golang pprof handlers in admin listener.webServer.pprofEnable = false# The maximum amount of time a dial to server will wait for a connect to complete. Default value is 10 seconds.# transport.dialServerTimeout = 10# dialServerKeepalive specifies the interval between keep-alive probes for an active network connection between frpc and frps.# If negative, keep-alive probes are disabled.# transport.dialServerKeepalive = 7200# connections will be established in advance, default value is zerotransport.poolCount = 5# If tcp stream multiplexing is used, default is true, it must be same with frps# transport.tcpMux = true# Specify keep alive interval for tcp mux.# only valid if tcpMux is enabled.# transport.tcpMuxKeepaliveInterval = 60# Communication protocol used to connect to server# supports tcp, kcp, quic, websocket and wss now, default is tcptransport.protocol = &quot;tcp&quot;# set client binding ip when connect server, default is empty.# only when protocol = tcp or websocket, the value will be used.transport.connectServerLocalIP = &quot;0.0.0.0&quot;# if you want to connect frps by http proxy or socks5 proxy or ntlm proxy, you can set proxyURL here or in global environment variables# it only works when protocol is tcp# transport.proxyURL = &quot;http://user:passwd@192.168.1.128:8080&quot;# transport.proxyURL = &quot;socks5://user:passwd@192.168.1.128:1080&quot;# transport.proxyURL = &quot;ntlm://user:passwd@192.168.1.128:2080&quot;# quic protocol options# transport.quic.keepalivePeriod = 10# transport.quic.maxIdleTimeout = 30# transport.quic.maxIncomingStreams = 100000# If tls.enable is true, frpc will connect frps by tls.# Since v0.50.0, the default value has been changed to true, and tls is enabled by default.transport.tls.enable = true# transport.tls.certFile = &quot;client.crt&quot;# transport.tls.keyFile = &quot;client.key&quot;# transport.tls.trustedCaFile = &quot;ca.crt&quot;# transport.tls.serverName = &quot;example.com&quot;# If the disableCustomTLSFirstByte is set to false, frpc will establish a connection with frps using the# first custom byte when tls is enabled.# Since v0.50.0, the default value has been changed to true, and the first custom byte is disabled by default.# transport.tls.disableCustomTLSFirstByte = true# Heartbeat configure, it&#x27;s not recommended to modify the default value.# The default value of heartbeat_interval is 10 and heartbeat_timeout is 90. Set negative value# to disable it.# transport.heartbeatInterval = 30# transport.heartbeatTimeout = 90# Specify a dns server, so frpc will use this instead of default one# dnsServer = &quot;8.8.8.8&quot;# Proxy names you want to start.# Default is empty, means all proxies.# start = [&quot;ssh&quot;, &quot;dns&quot;]# Specify udp packet size, unit is byte. If not set, the default value is 1500.# This parameter should be same between client and server.# It affects the udp and sudp proxy.udpPacketSize = 1500# Additional metadatas for client.metadatas.var1 = &quot;abc&quot;metadatas.var2 = &quot;123&quot;# Include other config files for proxies.# includes = [&quot;./confd/*.ini&quot;][[proxies]]# &#x27;ssh&#x27; is the unique proxy name# If global user is not empty, it will be changed to &#123;user&#125;.&#123;proxy&#125; such as &#x27;your_name.ssh&#x27;name = &quot;ssh&quot;type = &quot;tcp&quot;localIP = &quot;127.0.0.1&quot;localPort = 22# Limit bandwidth for this proxy, unit is KB and MBtransport.bandwidthLimit = &quot;1MB&quot;# Where to limit bandwidth, can be &#x27;client&#x27; or &#x27;server&#x27;, default is &#x27;client&#x27;transport.bandwidthLimitMode = &quot;client&quot;# If true, traffic of this proxy will be encrypted, default is falsetransport.useEncryption = false# If true, traffic will be compressedtransport.useCompression = false# Remote port listen by frpsremotePort = 6001# frps will load balancing connections for proxies in same grouploadBalancer.group = &quot;test_group&quot;# group should have same group keyloadBalancer.groupKey = &quot;123456&quot;# Enable health check for the backend service, it supports &#x27;tcp&#x27; and &#x27;http&#x27; now.# frpc will connect local service&#x27;s port to detect it&#x27;s healthy statushealthCheck.type = &quot;tcp&quot;# Health check connection timeouthealthCheck.timeoutSeconds = 3# If continuous failed in 3 times, the proxy will be removed from frpshealthCheck.maxFailed = 3# every 10 seconds will do a health checkhealthCheck.intervalSeconds = 10# additional meta info for each proxymetadatas.var1 = &quot;abc&quot;metadatas.var2 = &quot;123&quot;[[proxies]]name = &quot;ssh_random&quot;type = &quot;tcp&quot;localIP = &quot;192.168.31.100&quot;localPort = 22# If remote_port is 0, frps will assign a random port for youremotePort = 0[[proxies]]name = &quot;dns&quot;type = &quot;udp&quot;localIP = &quot;114.114.114.114&quot;localPort = 53remotePort = 6002# Resolve your domain names to [server_addr] so you can use http://web01.yourdomain.com to browse web01 and http://web02.yourdomain.com to browse web02[[proxies]]name = &quot;web01&quot;type = &quot;http&quot;localIP = &quot;127.0.0.1&quot;localPort = 80# http username and password are safety certification for http protocol# if not set, you can access this custom_domains without certificationhttpUser = &quot;admin&quot;httpPassword = &quot;admin&quot;# if domain for frps is frps.com, then you can access [web01] proxy by URL http://web01.frps.comsubdomain = &quot;web01&quot;customDomains = [&quot;web01.yourdomain.com&quot;]# locations is only available for http typelocations = [&quot;/&quot;, &quot;/pic&quot;]# route requests to this service if http basic auto user is abc# route_by_http_user = abchostHeaderRewrite = &quot;example.com&quot;# params with prefix &quot;header_&quot; will be used to update http request headersrequestHeaders.set.x-from-where = &quot;frp&quot;healthCheck.type = &quot;http&quot;# frpc will send a GET http request &#x27;/status&#x27; to local http service# http service is alive when it return 2xx http response codehealthCheck.path = &quot;/status&quot;healthCheck.intervalSeconds = 10healthCheck.maxFailed = 3healthCheck.timeoutSeconds = 3[[proxies]]name = &quot;web02&quot;type = &quot;https&quot;localIP = &quot;127.0.0.1&quot;localPort = 8000subdomain = &quot;web02&quot;customDomains = [&quot;web02.yourdomain.com&quot;]# if not empty, frpc will use proxy protocol to transfer connection info to your local service# v1 or v2 or emptytransport.proxyProtocolVersion = &quot;v2&quot;[[proxies]]name = &quot;tcpmuxhttpconnect&quot;type = &quot;tcpmux&quot;multiplexer = &quot;httpconnect&quot;localIP = &quot;127.0.0.1&quot;localPort = 10701customDomains = [&quot;tunnel1&quot;]# routeByHTTPUser = &quot;user1&quot;[[proxies]]name = &quot;plugin_unix_domain_socket&quot;type = &quot;tcp&quot;remotePort = 6003# if plugin is defined, local_ip and local_port is useless# plugin will handle connections got from frps[proxies.plugin]type = &quot;unix_domain_socket&quot;unixPath = &quot;/var/run/docker.sock&quot;[[proxies]]name = &quot;plugin_http_proxy&quot;type = &quot;tcp&quot;remotePort = 6004[proxies.plugin]type = &quot;http_proxy&quot;httpUser = &quot;abc&quot;httpPassword = &quot;abc&quot;[[proxies]]name = &quot;plugin_socks5&quot;type = &quot;tcp&quot;remotePort = 6005[proxies.plugin]type = &quot;socks5&quot;username = &quot;abc&quot;password = &quot;abc&quot;[[proxies]]name = &quot;plugin_static_file&quot;type = &quot;tcp&quot;remotePort = 6006[proxies.plugin]type = &quot;static_file&quot;localPath = &quot;/var/www/blog&quot;stripPrefix = &quot;static&quot;httpUser = &quot;abc&quot;httpPassword = &quot;abc&quot;[[proxies]]name = &quot;plugin_https2http&quot;type = &quot;https&quot;customDomains = [&quot;test.yourdomain.com&quot;][proxies.plugin]type = &quot;https2http&quot;localAddr = &quot;127.0.0.1:80&quot;crtPath = &quot;./server.crt&quot;keyPath = &quot;./server.key&quot;hostHeaderRewrite = &quot;127.0.0.1&quot;requestHeaders.set.x-from-where = &quot;frp&quot;[[proxies]]name = &quot;plugin_https2https&quot;type = &quot;https&quot;customDomains = [&quot;test.yourdomain.com&quot;][proxies.plugin]type = &quot;https2https&quot;localAddr = &quot;127.0.0.1:443&quot;crtPath = &quot;./server.crt&quot;keyPath = &quot;./server.key&quot;hostHeaderRewrite = &quot;127.0.0.1&quot;requestHeaders.set.x-from-where = &quot;frp&quot;[[proxies]]name = &quot;plugin_http2https&quot;type = &quot;http&quot;customDomains = [&quot;test.yourdomain.com&quot;][proxies.plugin]type = &quot;http2https&quot;localAddr = &quot;127.0.0.1:443&quot;hostHeaderRewrite = &quot;127.0.0.1&quot;requestHeaders.set.x-from-where = &quot;frp&quot;[[proxies]]name = &quot;secret_tcp&quot;# If the type is secret tcp, remote_port is useless# Who want to connect local port should deploy another frpc with stcp proxy and role is visitortype = &quot;stcp&quot;# secretKey is used for authentication for visitorssecretKey = &quot;abcdefg&quot;localIP = &quot;127.0.0.1&quot;localPort = 22# If not empty, only visitors from specified users can connect.# Otherwise, visitors from same user can connect. &#x27;*&#x27; means allow all users.allowUsers = [&quot;*&quot;][[proxies]]name = &quot;p2p_tcp&quot;type = &quot;xtcp&quot;secretKey = &quot;abcdefg&quot;localIP = &quot;127.0.0.1&quot;localPort = 22# If not empty, only visitors from specified users can connect.# Otherwise, visitors from same user can connect. &#x27;*&#x27; means allow all users.allowUsers = [&quot;user1&quot;, &quot;user2&quot;]# frpc role visitor -&gt; frps -&gt; frpc role server[[visitors]]name = &quot;secret_tcp_visitor&quot;type = &quot;stcp&quot;# the server name you want to visitorserverName = &quot;secret_tcp&quot;secretKey = &quot;abcdefg&quot;# connect this address to visitor stcp serverbindAddr = &quot;127.0.0.1&quot;# bindPort can be less than 0, it means don&#x27;t bind to the port and only receive connections redirected from# other visitors. (This is not supported for SUDP now)bindPort = 9000[[visitors]]name = &quot;p2p_tcp_visitor&quot;type = &quot;xtcp&quot;# if the server user is not set, it defaults to the current userserverUser = &quot;user1&quot;serverName = &quot;p2p_tcp&quot;secretKey = &quot;abcdefg&quot;bindAddr = &quot;127.0.0.1&quot;# bindPort can be less than 0, it means don&#x27;t bind to the port and only receive connections redirected from# other visitors. (This is not supported for SUDP now)bindPort = 9001# when automatic tunnel persistence is required, set it to truekeepTunnelOpen = false# effective when keep_tunnel_open is set to true, the number of attempts to punch through per hourmaxRetriesAnHour = 8minRetryInterval = 90# fallbackTo = &quot;stcp_visitor&quot;# fallbackTimeoutMs = 500","categories":[{"name":"CTFç½‘ç»œæ”»é˜²","slug":"CTFç½‘ç»œæ”»é˜²","permalink":"https://snowman12137.github.io/categories/CTF%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/"}],"tags":[{"name":"CTFç½‘ç»œæ”»é˜²","slug":"CTFç½‘ç»œæ”»é˜²","permalink":"https://snowman12137.github.io/tags/CTF%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/"}],"author":"Sn0wma1n"},{"title":"è§£å†³Giteeå›¾åºŠä¸æ˜¾ç¤ºé—®é¢˜(ä½¿ç”¨é˜¿é‡Œäº‘OSSæ­å»ºå›¾åºŠ)","slug":"è§£å†³Giteeå›¾åºŠä¸æ˜¾ç¤ºé—®é¢˜","date":"2023-09-02T08:51:50.000Z","updated":"2024-02-03T17:05:10.725Z","comments":true,"path":"2023/09/02/è§£å†³Giteeå›¾åºŠä¸æ˜¾ç¤ºé—®é¢˜/","link":"","permalink":"https://snowman12137.github.io/2023/09/02/%E8%A7%A3%E5%86%B3Gitee%E5%9B%BE%E5%BA%8A%E4%B8%8D%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/","excerpt":"","text":"é—®é¢˜å‰æ®µæ—¶é—´æåšå®¢å¼„äº†ä¸€ä¸ªGiteeå›¾åºŠï¼Œå›¾ç‰‡å¯ä»¥ä¸Šä¼ æˆåŠŸï¼Œå¤–éƒ¨é“¾æ¥å¯ä»¥æ‰“å¼€å›¾ç‰‡ï¼Œä½†æ˜¯hexo såæœ¬åœ°éƒ½æ‰“å¼€ä¸äº†å›¾ç‰‡ï¼Œä½†æ˜¯ç›¸åº”çš„æºç æ ‡ç­¾é‡Œä¾ç„¶æœ‰å›¾ç‰‡é“¾æ¥åœ°å€ã€‚è¿™å°±è®©æˆ‘å¾ˆç–‘æƒ‘ã€‚ æŠ¥é”™æ˜¯class=lazyload error å¯ä»¥çœ‹åˆ°ä¸‹å›¾è¿™é‡Œæ˜¯æœ‰å›¾ç‰‡çš„ï¼Œå°±æ˜¯ä¸èƒ½æ˜¾ç¤ºã€‚ åœ¨ç½‘ä¸Šå¹¶æ²¡æœ‰æ‰¾åˆ°ç›¸å…³çš„æŠ¥é”™è§£é‡Šï¼Œç„¶åæˆ‘åˆæŸ¥æ‰¾äº†lazyloadæ˜¯æ‡’åŠ è½½ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰æŸ¥æ˜ç›¸å…³çš„æŠ¥é”™è§£å†³æ–¹æ³•ï¼Œäºæ˜¯æˆ‘åˆæ€€ç–‘æ˜¯ä¸»é¢˜çš„é—®é¢˜ã€‚ åœ¨_config.ymlé‡Œæ³¨é‡Šæ‰themeä»¥åå‘ç°æŠ¥é”™ é”™è¯¯æ˜¯ä¸èƒ½åŠ è½½ï¼Œæœ‰å¯èƒ½æ˜¯Giteeçš„æƒé™é—®é¢˜(æ˜¯å…¬å…±åº“)ï¼Œå¯¼è‡´æœåŠ¡å™¨ä¸èƒ½è®¿é—®åº“é‡Œé¢çš„å›¾ç‰‡ã€‚ ç„¶åæˆ‘æ‰¾åˆ°äº†è¿™æ ·ä¸€ç¯‡æ–‡ç« ï¼š giteeå›¾åºŠä¸èƒ½ç”¨äº†ï¼Œå¿ƒæ€å´©äº† åŸæ¥æ˜¯Giteeä»å»å¹´å¼€å§‹å·²ç»ä¸æ”¯æŒå›¾åºŠäº†ã€‚ç„¶åå‘ç°é˜¿é‡Œäº‘æ˜¯æ¯”è¾ƒå¥½ç”¨çš„ä¸€ä¸ªå›¾åºŠï¼Œæ¯•ç«Ÿæ˜¯ä»˜è´¹çš„(40G 1å¹´ 9RMB) æ­å»ºé˜¿é‡Œäº‘OSSå›¾åºŠ+PicGO1.è´­ä¹°é˜¿é‡Œäº‘OSSæœåŠ¡ ç™»å½•é˜¿é‡Œäº‘ æ‰“å¼€ä¾§è¾¹æ é€‰æ‹©å¯¹è±¡å­˜å‚¨OSS è¿›å…¥ç®¡ç†æ§åˆ¶å° ç‚¹å‡»åˆ›å»ºBucket æœ‰çš„äººåœ¨åŒºåŸŸä¸€æ æ²¡æœ‰ä¹°è¿‡æµé‡åŒ…ï¼Œä¼šæé†’è´­ä¹° è¯»å†™æƒé™æ³¨æ„æ˜¯å…¬å…±è¯»ï¼Œåšå®¢éœ€è¦è¯»å–ä½ ä¸Šä¼ åçš„å›¾ç‰‡ è´­ä¹°èµ„æºåŒ… 2.æ·»åŠ ç”¨æˆ·æƒé™æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªå¯ä»¥æ“ä½œOSSçš„ç”¨æˆ·ï¼Œåœ¨é…ç½®å¥½PicGOåä½¿ç”¨è¿™ä¸ªç”¨æˆ·å¯¹å›¾ç‰‡è¿›è¡Œè‡ªåŠ¨æ·»åŠ ã€‚ ç‚¹å‡»è®¿é—®æ§åˆ¶ ç‚¹å‡»ç”¨æˆ·ï¼Œæ–°å»ºç”¨æˆ· è¾“å…¥åç§°ï¼Œæ³¨æ„å‹¾é€‰OpenAPIè°ƒç”¨è®¿é—® è¿™é‡Œè¦è®°ä¸‹AccessKey ID å’Œ AccessKeySecretï¼Œä¹‹åé…ç½®PICGOç”¨åˆ°ï¼Œå› ä¸ºè¿™ä¸ªç•Œé¢å…³æ‰ä¹‹åå°±ä¸å¥½æ‰¾äº†ï¼Œæ‰€ä»¥æœ€å¥½ è®°åœ¨è®°äº‹æœ¬é‡Œ è®¾ç½®ç”¨æˆ·æƒé™ é€‰æ‹©ç®¡ç†å¯¹è±¡å­˜å‚¨OSSæœåŠ¡æƒé™ï¼Œç‚¹å‡»ç¡®å®šï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 3.é…ç½®PICGO ä¸‹è½½PICGOé‡Œé¢æœ‰ç›¸åº”æ“ä½œç³»ç»Ÿçš„å®‰è£…åŒ…æ–‡ä»¶ä»¥åŠæºç ï¼Œç‚¹å‡»ä¸‹è½½å®‰è£…æ–‡ä»¶å³å¯ã€‚ å®‰è£…å®Œæˆåï¼Œæ‰“å¼€å›¾åºŠè®¾ç½®ï¼Œç‚¹å‡»é˜¿é‡Œäº‘OSSï¼Œå¾—åˆ°å¦‚ä¸‹ç•Œé¢ æ³¨æ„è®¾å®škeyidï¼Œå°±æ˜¯åˆ›å»ºç”¨æˆ·çš„AccessKey IDï¼ŒKeySecret å°±æ˜¯AccessKeySecretï¼Œå­˜å‚¨ç©ºé—´åå°±æ˜¯åˆ›å»ºBucketçš„åå­—ï¼Œå­˜å‚¨åŒºåŸŸä¹Ÿæ˜¯åˆ›å»ºæ—¶è®¾å®šçš„ï¼Œ å¿˜è®°çš„å¯ä»¥é€šè¿‡Bucketæ¦‚è§ˆæŸ¥çœ‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å­˜å‚¨è·¯å¾„é»˜è®¤è®¾ç½®img&#x2F;å³å¯ï¼Œå¦‚æœè‡ªå·±æœ‰å·²ç»å¤‡æ¡ˆçš„åŸŸåï¼Œå¯ä»¥å¡«å†™è®¾å®šè‡ªå®šä¹‰åŸŸåï¼Œå¦‚æœæ²¡æœ‰ä¸å¡«å³å¯ã€‚ å¯ä»¥çœ‹åˆ°PICGOèƒ½å¤Ÿæ–‡ä»¶ä¸Šä¼ ï¼Œä¹Ÿæ”¯æŒå‰ªè´´æ¿ä¸Šä¼ ã€‚ä¸Šä¼ è¿‡ç¨‹ä¸ºï¼š æ‹–æ‹½æ–‡ä»¶æˆ–ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶æˆ–ç‚¹å‡»å‰ªè´´æ¿å›¾ç‰‡ä¸Šä¼ ã€‚ ä¸Šä¼ å®Œæˆåç”µè„‘å‰ªè´´æ¿é‡Œå°±æœ‰äº†æ‰€é€‰é“¾æ¥æ ¼å¼çš„å›¾ç‰‡é“¾æ¥ã€‚ åˆ°ç›¸åº”çš„åœ°æ–¹ç²˜è´´å³å¯ã€‚ å¼€å§‹å¯èƒ½æœ‰ç–‘é—®ï¼Œæˆ‘çš„å›¾ç‰‡å­˜åˆ°å“ªé‡Œäº†å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œç‚¹å‡»æ–‡ä»¶ç®¡ç†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š çœ‹åˆ°imgæ–‡ä»¶å¤¹äº†å—ï¼Ÿå°±åœ¨é‡Œé¢äº†ï¼Œä½ å¯ä»¥åœ¨æ–‡ä»¶å¤¹é‡Œå¯¹å›¾ç‰‡è¿›è¡Œåˆ é™¤ç­‰æ“ä½œã€‚ 4.é…ç½®Typora æ‰“å¼€typoraç‚¹å‡»åå¥½è®¾ç½® ç„¶åé…ç½®å¦‚ä¸‹é€‰é¡¹ 1.ç‚¹å‡»å›¾åƒ 2.é€‰æ‹©ä¸Šä¼ å›¾ç‰‡ 3.ä¸Šä¼ æœåŠ¡é€‰æ‹©PICGO 4.æ‰¾åˆ°PICGOå®‰è£…çš„ä½ç½®ï¼Œå³PicGo.exeçš„ä½ç½® ç‚¹å‡»éªŒè¯å›¾ç‰‡ä¸Šä¼ é€‰é¡¹å³å¯ æ³¨æ„å¯ä»¥1.å³é”®æ¡Œé¢å›¾æ ‡ 2.ç‚¹å‡»å±æ€§ 3.è´Ÿå€¼è·¯å¾„ Over ä¸‹è¯¾","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://snowman12137.github.io/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"åšå®¢é—®é¢˜","slug":"åšå®¢é—®é¢˜","permalink":"https://snowman12137.github.io/tags/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98/"}],"author":"Sn0wma1n"},{"title":"SGX(Software Guard eXtensions)_linuxæ„å»ºå¯ä¿¡æ‰§è¡Œç¯å¢ƒ(ä¸€)","slug":"SGX-Software-Guard-eXtensions-æ„å»ºå¯ä¿¡æ‰§è¡Œç¯å¢ƒ-ä¸€","date":"2023-09-02T08:42:16.000Z","updated":"2023-09-06T09:55:34.893Z","comments":true,"path":"2023/09/02/SGX-Software-Guard-eXtensions-æ„å»ºå¯ä¿¡æ‰§è¡Œç¯å¢ƒ-ä¸€/","link":"","permalink":"https://snowman12137.github.io/2023/09/02/SGX-Software-Guard-eXtensions-%E6%9E%84%E5%BB%BA%E5%8F%AF%E4%BF%A1%E6%89%A7%E8%A1%8C%E7%8E%AF%E5%A2%83-%E4%B8%80/","excerpt":"","text":"SGX(Software Guard eXtensions)_linuxæ„å»ºå¯ä¿¡æ‰§è¡Œç¯å¢ƒ(ä¸€)ï¼šå¦‚ä½•å¼€å‘ç¬¬ä¸€ä¸ªæœ€ç®€å•çš„ SGX åº”ç”¨ HelloWorldä¸€ã€äº†è§£SGX1.1SGXå®šä¹‰ Intel è½¯ä»¶é˜²æŠ¤æ‰©å±•SGXï¼ˆSoftware Guard Extensionï¼‰æ˜¯ä¸€é¡¹é’ˆå¯¹å°å¼æœºå’ŒæœåŠ¡å™¨å¹³å°çš„æ—¨åœ¨æ»¡è¶³å¯ä¿¡è®¡ç®—éœ€æ±‚çš„æŠ€æœ¯ã€‚Intel SGXæ˜¯Intelæ¶æ„æ–°çš„æ‰©å±•ï¼Œåœ¨åŸæœ‰æ¶æ„ä¸Šå¢åŠ äº†ä¸€ç»„æ–°çš„æŒ‡ä»¤é›†å’Œå†…å­˜è®¿é—®æœºåˆ¶ã€‚ Intelåœ¨2015å¹´ä»ç¬¬6ä»£Intelé…·ç¿å¤„ç†å™¨å¹³å°å¼€å§‹å¼•å…¥äº†Intelè½¯ä»¶é˜²æŠ¤æ‰©å±•æ–°æŒ‡ä»¤é›†ï¼Œä½¿ç”¨ç‰¹æ®ŠæŒ‡ä»¤å’Œè½¯ä»¶å¯å°†åº”ç”¨ç¨‹åºä»£ç æ”¾å…¥ä¸€ä¸ªenclaveä¸­æ‰§è¡Œã€‚Enclaveå¯ä»¥æä¾›ä¸€ä¸ªéš”ç¦»çš„å¯ä¿¡æ‰§è¡Œç¯å¢ƒï¼Œå¯ä»¥åœ¨BIOSã€è™šæ‹Ÿæœºç›‘æ§å™¨ã€ä¸»æ“ä½œç³»ç»Ÿå’Œé©±åŠ¨ç¨‹åºå‡è¢«æ¶æ„ä»£ç æ”»é™·çš„æƒ…å†µä¸‹ï¼Œä»å¯¹enclaveå†…çš„ä»£ç å’Œå†…å­˜æ•°æ®æä¾›ä¿æŠ¤ï¼Œé˜²æ­¢æ¶æ„è½¯ä»¶å½±å“enclaveå†…çš„ä»£ç å’Œæ•°æ®ï¼Œä»è€Œä¿éšœç”¨æˆ·çš„å…³é”®ä»£ç å’Œæ•°æ®çš„æœºå¯†æ€§å’Œå®Œæ•´æ€§ã€‚ 1.2åŸºæœ¬åŸç† SGXåº”ç”¨ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š untrusted ä¸å¯ä¿¡åŒºï¼šä»£ç å’Œæ•°æ®è¿è¡Œåœ¨æ™®é€šéåŠ å¯†å†…å­˜åŒºåŸŸï¼Œç¨‹åºmainå…¥å£å¿…é¡»åœ¨éå¯ä¿¡åŒºã€‚ trusted å¯ä¿¡åŒºï¼šä»£ç å’Œæ•°æ®è¿è¡Œåœ¨ç¡¬ä»¶åŠ å¯†å†…å­˜åŒºåŸŸï¼Œæ­¤åŒºåŸŸç”±CPUåˆ›å»ºçš„ä¸”åªæœ‰CPUæœ‰æƒé™è®¿é—®ã€‚ å½“ä¸€ä¸ªå®‰å…¨åŒºåŸŸå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œåªæœ‰å®‰å…¨åŒºåŸŸå†…çš„ä»£ç æ‰èƒ½çœ‹åˆ°å…¶æ•°æ®ï¼Œå¤–éƒ¨è®¿é—®æ€»æ˜¯è¢«æ‹’ç»ï¼›è¿”å›æ—¶ï¼Œå®‰å…¨åŒºæ•°æ®å°†ä¿ç•™åœ¨å—ä¿æŠ¤çš„å†…å­˜ä¸­ã€‚ éå¯ä¿¡åŒºåªèƒ½é€šè¿‡ECALLå‡½æ•°è°ƒç”¨å¯ä¿¡åŒºå†…çš„å‡½æ•°ï¼Œå¯ä¿¡åŒºåªèƒ½é€šè¿‡OCALLå‡½æ•°è°ƒç”¨éå¯ä¿¡åŒºçš„å‡½æ•°ï¼ŒECALLå‡½æ•°å’ŒOCALLå‡½æ•°é€šè¿‡EDLæ–‡ä»¶å£°æ˜ã€‚ 1.3ä¸¤å¤§æœºåˆ¶1.3.1ä¿æŠ¤æœºåˆ¶é’ˆå¯¹enclaveçš„ä¿æŠ¤æœºåˆ¶ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€æ˜¯enclaveå†…å­˜è®¿é—®è¯­ä¹‰çš„å˜åŒ–ï¼ŒäºŒæ˜¯åº”ç”¨ç¨‹åºåœ°å€æ˜ å°„å…³ç³»çš„ä¿æŠ¤ã€‚è¿™ä¸¤é¡¹åŠŸèƒ½å…±åŒå®Œæˆå¯¹enclaveçš„æœºå¯†æ€§å’Œå®Œæ•´æ€§çš„ä¿æŠ¤ã€‚ 1.3.2 è®¤è¯æœºåˆ¶SGX æå‡ºäº†ä¸¤ç§ç±»å‹çš„èº«ä»½è®¤è¯æ–¹å¼ï¼šä¸€ç§æ˜¯å¹³å°å†…éƒ¨ enclave é—´çš„è®¤è¯ï¼Œç”¨æ¥è®¤è¯è¿›è¡ŒæŠ¥å‘Šçš„ enclave å’Œè‡ªå·±æ˜¯å¦è¿è¡Œåœ¨åŒä¸€ä¸ªå¹³å°ä¸Šï¼›å¦ä¸€ç§æ˜¯å¹³å°é—´çš„è¿œç¨‹è®¤è¯ï¼Œç”¨äºè¿œç¨‹çš„è®¤è¯è€…è®¤è¯ enclave çš„èº«ä»½ä¿¡æ¯ã€‚ æœ¬åœ°è¯æ˜ï¼šåŒä¸€å¹³å°çš„ä¸¤ä¸ªEnclaveä¹‹é—´çš„è¯æ˜è¿‡ç¨‹ã€‚ è¿œç¨‹è¯æ˜ï¼šEnclaveå’Œä¸åœ¨å¹³å°ä¸Šçš„ç¬¬ä¸‰æ–¹ä¹‹é—´çš„è¯æ˜è¿‡ç¨‹ã€‚ äºŒã€Linuxä¸‹å®‰è£…SGX ç®€ä»‹ï¼šæˆ‘ä»¬éœ€è¦å®‰è£…å‡ ä¸ªä¸œè¥¿ã€‚ç¬¬ä¸€æ˜¯é©±åŠ¨Driveï¼Œæœ‰äº†é©±åŠ¨æ‰å¯ä»¥è°ƒç”¨intelèŠ¯ç‰‡é‡Œé¢çš„ç¡¬ä»¶éƒ¨åˆ†ã€‚ç¬¬äºŒä¸ªæ˜¯PSW(å¹³å°è½¯ä»¶)ï¼Œå…¶æ˜¯å…è®¸æ”¯æŒSGXçš„åº”ç”¨ç¨‹åºåœ¨ç›®æ ‡å¹³å°ä¸Šæ‰§è¡Œçš„è½¯ä»¶æ ˆï¼ŒåŒ…å«å››éƒ¨åˆ†1.æä¾›å¯¹ç¡¬ä»¶åŠŸèƒ½è¿›è¡Œè®¿é—®çš„é©±åŠ¨ç¨‹åºï¼›2.ä¸ºæ‰§è¡Œå’Œè®¤è¯æä¾›å¤šä¸ªæ”¯æŒåº“ï¼›3.è¿è¡Œæ‰€å¿…éœ€çš„æ¶æ„å‹enclaveï¼›4.åŠ è½½å¹¶ä¸enclaveè¿›è¡Œé€šä¿¡çš„æœåŠ¡ï¼›ã€‚ç¬¬ä¸‰ä¸ªæ˜¯è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆSDKï¼‰ä¸ºå¼€å‘äººå‘˜æä¾›äº†å¼€å‘æ”¯æŒSGXçš„åº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€åˆ‡ï¼Œå®ƒç”±ä¸€ä¸ªç”Ÿæˆåº”ç”¨ç¨‹åºå’Œenclaveä¹‹é—´çš„æ¥å£å‡½æ•°çš„å·¥å…·ï¼Œä¸€ä¸ªåœ¨ä½¿ç”¨å®ƒä¹‹å‰å¯¹enclaveè¿›è¡Œç­¾åçš„å·¥å…·ï¼Œä¸€ä¸ªè°ƒè¯•å®ƒçš„å·¥å…·ä»¥åŠä¸€ä¸ªæ€§èƒ½æ£€æŸ¥çš„å·¥å…·ç»„æˆã€‚å¦å¤–ï¼Œå®ƒè¿˜åŒ…å«æ¨¡æ¿å’Œæ ·æœ¬å‚æ•°ï¼Œç”¨äºåœ¨Windowsä¸‹ä½¿ç”¨Visual Studioå¼€å‘enclaveï¼Œæˆ–åœ¨Linuxä¸‹ä½¿ç”¨Makefileã€‚ æœ‰äº†è¿™ä¸‰æ ·ä¸œè¥¿æˆ‘ä»¬æ‰å¯ä»¥è¿›è¡Œä»£ç å¼€å‘ ä»¥Ubuntu20.04 LTSä¸ºä¾‹ ç¡¬ä»¶éœ€æ±‚ä»…å½“å®‰è£…sgxé©±åŠ¨å’ŒPSWæ—¶éœ€è¦ï¼Œå®‰è£…sgx sdkå¹¶ä¸éœ€è¦ç¡¬ä»¶æ”¯æŒã€‚ ç¡¬ä»¶ä¸æ”¯æŒçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨æ¨¡æ‹Ÿç¯å¢ƒä¸‹ç¼–å†™æµ‹è¯•SGXç¨‹åºï¼Œå…¶ä¸­makefileé‡ŒSGX_MODE&#x3D;SIMã€‚ï¼ˆè™½ç„¶ SGXæ˜¯åŸºäºç¡¬ä»¶çš„ï¼Œä½†æ˜¯ä¾æ—§å¯ä»¥ä½¿ç”¨è½¯ä»¶æ¡ä»¶è¿›è¡Œæ¨¡æ‹Ÿï¼‰ å…ˆå®‰è£…é©±åŠ¨ã€PSWã€SDKæ‰€éœ€ä¾èµ– 123sudo apt-get updatesudo apt-get install libssl-dev libcurl4-openssl-dev libprotobuf-devsudo apt-get install build-essential python ä¸‹è½½Intel SGXé©±åŠ¨å¹¶å®‰è£… æ³¨æ„æ‰€æœ‰ç‰ˆæœ¬çš„é©±åŠ¨ã€SPWã€SDKéƒ½åœ¨è¿™é‡Œhttps://download.01.org/intel-sgx/sgx-linux/2.21/distro/ 1234wget https://download.01.org/intel-sgx/sgx-linux/2.7.1/distro/ubuntu18.04-server/sgx_linux_x64_driver_2.6.0_4f5bb63.binchmod +x sgx_linux_x64_driver_2.6.0_4f5bb63.binsudo ./sgx_linux_x64_driver_2.6.0_4f5bb63.binsudo reboot æ³¨æ„å®‰è£…å®Œé‡å¯æ‰ç”Ÿæ•ˆ ä¸‹è½½Intel SGX PSWå¹¶å®‰è£… æ³¨æ„ï¼šæœ‰çš„ç‰ˆæœ¬çš„æ²¡æœ‰PSWæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä¸è£… 12wget https://download.01.org/intel-sgx/sgx-linux/2.7.1/distro/ubuntu18.04-server/libsgx-enclave-common_2.7.101.3-bionic1_amd64.debsudo dpkg -i ./libsgx-enclave-common_2.7.101.3-bionic1_amd64.deb ä¸‹è½½å¹¶å®‰è£…Intel SGX SDK å®‰è£…è¿‡ç¨‹ä¸­å¯ä»¥æ‰‹åŠ¨è¾“å…¥SDKè¦å®‰è£…åˆ°çš„ç›®æ ‡ä½ç½® 123wget https://download.01.org/intel-sgx/sgx-linux/2.7.1/distro/ubuntu18.04-server/sgx_linux_x64_sdk_2.7.101.3.binchmod +x ./sgx_linux_x64_sdk_2.7.101.3.bin./sgx_linux_x64_sdk_2.7.101.3.bin æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œæ‰§è¡Œä¸Šä¸€æ­¥ç»“æŸæ—¶è¾“å‡ºçš„å‘½ä»¤ 1source /path/to/sgxsdk/environment æ¥ä¸‹æ¥è¿›å…¥åˆ°sgxsdk&#x2F;SampleCode&#x2F;SampleEnclaveæ–‡ä»¶å¤¹é‡Œ 1cd /path/to/sgxsdk/SampleCode/SampleEnclave ç¼–è¾‘ä¸€ä¸‹Makefile 12345678# Intel SGX SDK çš„å®‰è£…ä½ç½®SGX_SDK ?= /home/luoyhang003/SGX/sgxsdk# è¿è¡Œç±»å‹ï¼šHW çœŸå®ç¯å¢ƒï¼›SIM æ¨¡æ‹Ÿå™¨ç¯å¢ƒSGX_MODE ?= SIM# è¿è¡Œæ¶æ„ï¼šä»…æ”¯æŒ 64 ä½SGX_ARCH ?= x64# æ˜¯å¦ä¸ºï¼šDebug è°ƒè¯•æ¨¡å¼SGX_DEBUG ?= 1 é€€å‡ºç„¶åè¿è¡Œç¤ºä¾‹ 1234# ç¼–è¯‘sudo make# è¿è¡Œ./app æ³¨æ„ä¸€å®šè¦æ·»åŠ ç¯å¢ƒå˜é‡source &#x2F;path&#x2F;to&#x2F;sgxsdk&#x2F;environmentï¼Œè¿™è¡Œå‘½ä»¤æ˜¯ä¸´æ—¶ç¯å¢ƒå˜é‡ï¼Œå³å­˜æ´»æ—¶é—´ä¸ºä¸€ä¸ªç»ˆç«¯çš„å¸‚åœºï¼Œä¸€æ—¦é‡å¯æˆ–å¼€å¯æ–°çš„ç»ˆç«¯ç¯å¢ƒå˜é‡å³ä¼šå¤±æ•ˆï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ ã€‚ä¹Ÿå¯ä»¥æ°¸ä¹…åŒ–ç¯å¢ƒå˜é‡ã€‚ æˆåŠŸè¿è¡Œæˆªå›¾ ä¸‰ã€æ–‡ä»¶ç»“æ„ä¸ä»£ç ç›®å½•ç»“æ„ ç¼–è¯‘&amp;è¿è¡Œ 1234567891011121314151617181920212223242526272829303132$ makeGEN =&gt; App/Enclave_u.hCC &lt;= App/Enclave_u.cCXX &lt;= App/App.cppLINK =&gt; appGEN =&gt; Enclave/Enclave_t.hCC &lt;= Enclave/Enclave_t.cCXX &lt;= Enclave/Enclave.cppLINK =&gt; enclave.so&lt;EnclaveConfiguration&gt; &lt;ProdID&gt;0&lt;/ProdID&gt; &lt;ISVSVN&gt;0&lt;/ISVSVN&gt; &lt;StackMaxSize&gt;0x40000&lt;/StackMaxSize&gt; &lt;HeapMaxSize&gt;0x100000&lt;/HeapMaxSize&gt; &lt;TCSNum&gt;10&lt;/TCSNum&gt; &lt;TCSPolicy&gt;1&lt;/TCSPolicy&gt; &lt;!-- Recommend changing &#x27;DisableDebug&#x27; to 1 to make the enclave undebuggable for enclave release --&gt; &lt;DisableDebug&gt;0&lt;/DisableDebug&gt; &lt;MiscSelect&gt;0&lt;/MiscSelect&gt; &lt;MiscMask&gt;0xFFFFFFFF&lt;/MiscMask&gt;&lt;/EnclaveConfiguration&gt;tcs_num 10, tcs_max_num 10, tcs_min_pool 1The required memory is 3960832B.The required memory is 0x3c7000, 3868 KB.Succeed.SIGN =&gt; enclave.signed.soThe project has been built in debug hardware mode.$ ./appHello worldInfo: SampleEnclave successfully returned.Enter a character before exit ... ç¼–è¯‘æµç¨‹(Makefile) é€šè¿‡ sgx_edger8r å·¥å…·åœ¨ App/ ç›®å½•ä¸‹ç”Ÿæˆä¸å¯ä¿¡ä»£ç (Enclave_u.c å’Œ Enclave_u.h)ï¼Œè¿™éƒ¨åˆ†ç”Ÿæˆä»£ç ä¸»è¦ä¼šè°ƒç”¨ ECALL (sgx_ecall)ï¼› ç¼–è¯‘ä¸å¯ä¿¡éƒ¨åˆ† Binary: appï¼› é€šè¿‡sgx_edger8r å·¥å…·åœ¨ Enclave/ ç›®å½•ä¸‹ç”Ÿæˆå¯ä¿¡ä»£ç (Enclave_t.c å’Œ Enclave_t.h)ï¼› ç¼–è¯‘å¯ä¿¡åŠ¨æ€é“¾æ¥åº“(enclave.so)ï¼› é€šè¿‡sgx_singå·¥å…·ç­¾åå¯ä¿¡åŠ¨æ€é“¾æ¥åº“(enclave.signed.so)ï¼› ç»“æŸã€‚ ç¼–è¯‘åç›®å½•ç»“æ„ 123456789101112131415161718192021222324HelloWorldâ”œâ”€â”€ appâ”œâ”€â”€ Appâ”‚ â”œâ”€â”€ App.cppâ”‚ â”œâ”€â”€ App.hâ”‚ â”œâ”€â”€ App.o #[generated]â”‚ â”œâ”€â”€ Enclave_u.c #[generated] â”‚ â”œâ”€â”€ Enclave_u.h #[generated] â”‚ â””â”€â”€ Enclave_u.o #[generated]â”œâ”€â”€ Enclaveâ”‚ â”œâ”€â”€ Enclave.config.xmlâ”‚ â”œâ”€â”€ Enclave.cppâ”‚ â”œâ”€â”€ Enclave.edlâ”‚ â”œâ”€â”€ Enclave.hâ”‚ â”œâ”€â”€ Enclave.ldsâ”‚ â”œâ”€â”€ Enclave.o #[generated]â”‚ â”œâ”€â”€ Enclave_private.pemâ”‚ â”œâ”€â”€ Enclave_t.c #[generated]â”‚ â”œâ”€â”€ Enclave_t.h #[generated]â”‚ â””â”€â”€ Enclave_t.o #[generated]â”œâ”€â”€ enclave.signed.so #[generated]â”œâ”€â”€ enclave.so #[generated]â”œâ”€â”€ Includeâ””â”€â”€ Makefile HelloWorld å¤§æ¦‚æµç¨‹å¦‚ä¸‹ 1.æ·»åŠ å¯ä¿¡å‡½æ•°Encalve&#x2F;Enclave.edl 12345enclave &#123; trusted &#123; public void ecall_hello_from_enclave([out, size=len] char* buf, size_t len); &#125;;&#125;; 2.åœ¨å¯ä¿¡åŒºåŸŸå®šä¹‰å¯ä¿¡å‡½æ•°Enclave&#x2F;Enclave.cpp 1234567891011121314151617#include &quot;Enclave.h&quot;#include &quot;Enclave_t.h&quot; /* print_string */#include &lt;string.h&gt;void ecall_hello_from_enclave(char *buf, size_t len)&#123; const char *hello = &quot;Hello world&quot;; size_t size = len; if(strlen(hello) &lt; len) &#123; size = strlen(hello) + 1; &#125; memcpy(buf, hello, size - 1); buf[size-1] = &#x27;\\0&#x27;;&#125; 3.è°ƒç”¨å¯ä¿¡å‡½æ•° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;assert.h&gt;# include &lt;unistd.h&gt;# include &lt;pwd.h&gt;# define MAX_PATH FILENAME_MAX#include &quot;sgx_urts.h&quot;#include &quot;App.h&quot;#include &quot;Enclave_u.h&quot;/* Global EID shared by multiple threads */sgx_enclave_id_t global_eid = 0;int initialize_enclave(void)&#123; sgx_status_t ret = SGX_ERROR_UNEXPECTED; /* è°ƒç”¨ sgx_create_enclave åˆ›å»ºä¸€ä¸ª Enclave å®ä¾‹ */ /* Debug Support: set 2nd parameter to 1 */ ret = sgx_create_enclave(ENCLAVE_FILENAME, SGX_DEBUG_FLAG, NULL, NULL, &amp;global_eid, NULL); if (ret != SGX_SUCCESS) &#123; printf(&quot;Failed to create enclave, ret code: %d\\n&quot;, ret); return -1; &#125; return 0;&#125;/* åº”ç”¨ç¨‹åºå…¥å£ */int SGX_CDECL main(int argc, char *argv[])&#123; (void)(argc); (void)(argv); const size_t max_buf_len = 100; char buffer[max_buf_len] = &#123;0&#125;; /* åˆ›å»ºå¹¶åˆå§‹åŒ– Enclave */ if(initialize_enclave() &lt; 0)&#123; printf(&quot;Enter a character before exit ...\\n&quot;); getchar(); return -1; &#125;//-------------------------æ·»åŠ ä»£ç åŒºåŸŸ------------------------------------ /* ECALL è°ƒç”¨ */ ecall_hello_from_enclave(global_eid, buffer, max_buf_len); printf(&quot;%s\\n&quot;, buffer);//------------------------------------------------------------------------ /* é”€æ¯ Enclave */ sgx_destroy_enclave(global_eid); printf(&quot;Info: SampleEnclave successfully returned.\\n&quot;); printf(&quot;Enter a character before exit ...\\n&quot;); getchar(); return 0;&#125; æ€»ç»“å³ä¾¿æœ€ç®€å•çš„ SGX HelloWold ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œå½“ç„¶â€œå®‰å…¨æ€§â€å’Œâ€œæˆæœ¬â€ï¼ˆæŠ€æœ¯å£å’é—¨æ§›ã€å¼€å‘æˆæœ¬ã€ç»´æŠ¤æˆæœ¬ã€ç‰©æ–™æˆæœ¬ç­‰ï¼‰æ€»æ˜¯æˆæ­£æ¯”çš„ï¼Œå’Œâ€œæ•ˆç‡â€æˆåæ¯”çš„ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹é‚£äº›æƒ³å…¥é—¨å¼€å‘ SGX åº”ç”¨çš„ç”¨æˆ·æœ‰æ‰€å¸®åŠ©ã€‚","categories":[{"name":"SGX","slug":"SGX","permalink":"https://snowman12137.github.io/categories/SGX/"}],"tags":[{"name":"SGX","slug":"SGX","permalink":"https://snowman12137.github.io/tags/SGX/"},{"name":"Linux","slug":"Linux","permalink":"https://snowman12137.github.io/tags/Linux/"}],"author":"Sn0wma1n"},{"title":"RSAæ•°å­¦åŸç†è§£æ","slug":"RSAæ•°å­¦åŸç†è§£æ","date":"2023-05-15T03:18:16.000Z","updated":"2023-09-02T14:32:10.629Z","comments":true,"path":"2023/05/15/RSAæ•°å­¦åŸç†è§£æ/","link":"","permalink":"https://snowman12137.github.io/2023/05/15/RSA%E6%95%B0%E5%AD%A6%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/","excerpt":"","text":"1.å¼•è¨€ RSAç®—æ³•(RSA algorithm)æ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ç®—æ³•, å¹¿æ³›åº”ç”¨åœ¨äº’è”ç½‘å’Œç”µå­å•†åŠ¡ä¸­. å®ƒä½¿ç”¨ä¸€å¯¹å¯†é’¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†, åˆ†åˆ«ç§°ä¸ºå…¬é’¥(public key)å’Œç§é’¥(private key). ä½¿ç”¨å…¬é’¥åŠ å¯†çš„å†…å®¹åªèƒ½ç”¨ç§é’¥è§£å¯†, ä½¿ç”¨ç§é’¥åŠ å¯†çš„å†…å®¹åªèƒ½ç”¨å…¬é’¥è§£å¯†, å¹¶ä¸”ä¸èƒ½é€šè¿‡å…¬é’¥åœ¨å¯è¡Œçš„æ—¶é—´å†…è®¡ç®—å‡ºç§é’¥. è¿™ä½¿å¾—åŠ å¯†é€šä¿¡ä¸éœ€è¦äº¤æ¢ç§é’¥, ä¿è¯äº†é€šä¿¡çš„å®‰å…¨. é‚£ä¹ˆå®ƒæ˜¯æ€ä¹ˆåšåˆ°è¿™ä¸€ç‚¹çš„å‘¢? èƒŒåæœ‰å“ªäº›æ•°å­¦åŸç†? è¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥è®¨è®ºè¿™ä¸ªé—®é¢˜. æœ¬æ–‡ä¼šå…ˆä»‹ç»RSAç®—æ³•ä¸­ç”¨åˆ°çš„æ•°è®ºæ¦‚å¿µå’Œå®šç†: æ¨¡ç®—æœ¯, æœ€å¤§å…¬çº¦æ•°ä¸è´ç¥–å®šç†, çº¿æ€§åŒä½™æ–¹ç¨‹, ä¸­å›½ä½™æ•°å®šç†, è´¹é©¬å°å®šç†; ç„¶åå†ä»‹ç»RSAç®—æ³•çš„åŸç†, å¹¶è¯æ˜å…¶æ˜¯æœ‰æ•ˆçš„. æœ¬æ–‡ä¼šå‡è®¾ä½ äº†è§£æ•°è®ºçš„åŸºæœ¬æ¦‚å¿µ, å¦‚ç´ æ•°, æœ€å¤§å…¬çº¦æ•°, äº’ç´ ç­‰ 2.æ¨¡ç®—æœ¯2.1æ•´æ•°é™¤æ³•ç”¨ä¸€ä¸ªæ­£æ•´æ•°å»é™¤ä¸€ä¸ªæ•´æ•°ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªå•†å’Œä¸€ä¸ªä½™æ•°ï¼Œæ•°å­¦ç¬¦å·å®šä¹‰ä¸ºï¼š å®šç†1ï¼šä»¤ a ä¸ºæ•´æ•°, d ä¸ºæ­£æ•´æ•°, åˆ™å­˜åœ¨å”¯ä¸€çš„æ•´æ•° q å’Œ r, æ»¡è¶³ $0\\leq r&lt;d$, ä½¿å¾— $a&#x3D;dq+r$ å½“r&#x3D;0æ—¶ï¼Œæˆ‘ä»¬ç§° d æ•´é™¤ a, è®°ä½œ$d|a$; å¦åˆ™ç§° d ä¸æ•´é™¤ a, è®°ä½œ $d\\nmid a$ï¼Œæ•´é™¤æœ‰ä»¥ä¸‹åŸºæœ¬æ€§è´¨: å®šç†2ï¼šä»¤a,b,c,ä¸ºæ•´æ•°ï¼Œå…¶ä¸­$a\\neq0$,åˆ™ï¼šå¦‚æœ$a|b$ä¸”$a|c$åˆ™$a|(a+b)$ 2.2æ¨¡ç®—æœ¯åœ¨æ•°è®ºä¸­æˆ‘ä»¬ç‰¹åˆ«å…³å¿ƒä¸€ä¸ªæ•´æ•°è¢«ä¸€ä¸ªæ­£æ•´æ•°é™¤æ—¶çš„ä½™æ•°. æˆ‘ä»¬ç”¨ $a\\bmod m&#x3D;b$ è¡¨ç¤ºæ•´æ•° a é™¤ä»¥æ­£æ•´æ•° m çš„ä½™æ•°æ˜¯ b. ä¸ºäº†è¡¨ç¤ºä¸¤ä¸ªæ•´æ•°è¢«ä¸€ä¸ªæ­£æ•´æ•°é™¤æ—¶çš„ä½™æ•°ç›¸åŒ, äººä»¬åˆæå‡ºäº†åŒä½™å¼(congruence). å®šä¹‰1:å¦‚æœ a å’Œ b æ˜¯æ•´æ•°è€Œ m æ˜¯æ­£æ•´æ•°, åˆ™å½“ m æ•´é™¤ a - b æ—¶ç§° a æ¨¡ m åŒä½™ b. è®°ä½œ $a\\equiv b(\\bmod m)$ $a\\equiv b(\\bmod m)$ å’Œ $a\\bmod m&#x3D;b$å¾ˆç›¸ä¼¼. äº‹å®ä¸Š, å¦‚æœ $a\\bmod m&#x3D;b$, åˆ™ $a\\equiv b(\\bmod m)$. ä½†ä»–ä»¬æœ¬è´¨ä¸Šæ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µ.$a\\bmod m&#x3D;b$ è¡¨è¾¾çš„æ˜¯ä¸€ä¸ªå‡½æ•°, è€Œ $a\\equiv b(\\bmod m)$ è¡¨è¾¾çš„æ˜¯ä¸¤ä¸ªæ•´æ•°ä¹‹é—´çš„å…³ç³». å¦å¤–ï¼ŒåŒä½™å¼$a\\equiv b(\\bmod m)$è¿˜å¯ä»¥è¡¨ç¤ºä¸º$m|(b-a)$ï¼ŒåŒæ—¶ç¬¦åˆä¸Šå¼çš„å¼å­å¯ä»¥è½¬åŒ–ä¸ºåŒä½™å¼ æ¨¡ç®—æœ¯çš„æ€§è´¨ï¼š å®šç†3ï¼šå¦‚æœmæ˜¯æ­£æ•´æ•°ï¼Œa,bæ˜¯æ•´æ•°ï¼Œåˆ™æœ‰$$\\begin{aligned}(a+b)\\bmod m &amp;&#x3D;((a\\bmod m)+(b\\bmod m))\\bmod m\\ab\\bmod m &amp;&#x3D;(a\\bmod m)(b\\bmod m)\\bmod m\\end{aligned}$$æ ¹æ®å®šç†3ï¼Œå¯å¾—ä¸€ä¸‹æ¨è®º æ¨è®º1ï¼šè®¾mæ˜¯æ­£æ•´æ•°ï¼Œa,b,cæ˜¯æ•´æ•°ï¼›å¦‚æœ$a\\equiv b(\\bmod m)$åˆ™$ac\\equiv bc(\\bmod m)$ è¯æ˜ï¼š $\\because a\\equiv b(\\bmod m)$ $\\therefore m|(b-a)$ æ‰€ä»¥å³ç«¯å†ä¹˜ä»¥ä»»ä½•æ•´æ•°méƒ½å¯ä»¥æ•´é™¤ å³$m|(b-a)c$ åŒç†ï¼Œæ—¢ç„¶$m|(b-a)$ä¸”$c|c$ ä¹Ÿå¯ä»¥æ¨å‡º$mc|(b-a)c$ ç»“è®ºï¼šè‹¥$a\\equiv b(\\bmod m)$ï¼Œåˆ™$ac\\equiv bc(\\bmod m)$ä¸”$ac\\equiv bc(\\bmod mc)$åŒæ—¶æˆç«‹ æ¨è®º2è®¾ m æ˜¯æ­£æ•´æ•°, a, b æ˜¯æ•´æ•°, c æ˜¯ä¸èƒ½è¢« m æ•´é™¤çš„æ•´æ•°; å¦‚æœ $ac\\equiv bc(\\bmod m)$, åˆ™$a\\equiv b(\\bmod m)$,ä¾æ®æ¨è®º1çš„è¯æ˜ï¼Œä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ 3.æœ€å¤§å…¬çº¦æ•°å¦‚æœä¸€ä¸ªæ•´æ•° d èƒ½å¤Ÿæ•´é™¤å¦ä¸€ä¸ªæ•´æ•° a, åˆ™ç§° d æ˜¯ a çš„ä¸€ä¸ªçº¦æ•°(divisor); å¦‚æœ d æ—¢èƒ½æ•´é™¤ a åˆèƒ½æ•´é™¤ b, åˆ™ç§° d æ˜¯ a å’Œ b çš„ä¸€ä¸ªå…¬çº¦æ•°(common divisor). èƒ½æ•´é™¤ä¸¤ä¸ªæ•´æ•°çš„æœ€å¤§æ•´æ•°ç§°ä¸ºè¿™ä¸¤ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°(greatest common divisor). å®šä¹‰2ï¼šä»¤aå’Œbæ˜¯ä¸å…¨ä¸º0çš„ä¸¤ä¸ªæ•´æ•°ï¼Œèƒ½ä½¿$d|a$å’Œ$d|b$çš„æœ€å¤§æ•´æ•°dæˆä¸ºaå’Œbçš„æœ€å¤§å…¬çº¦æ•°ï¼Œè®°ä½œ$gcd(a,b)$ 3.1 æ±‚æœ€å¤§å…¬çº¦æ•°å¦‚ä½•æ±‚ä¸¤ä¸ªå·²çŸ¥æ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°å‘¢? è¿™é‡Œæˆ‘ä»¬è®¨è®ºä¸€ä¸ªé«˜æ•ˆçš„æ±‚æœ€å¤§å…¬çº¦æ•°çš„ç®—æ³•, ç§°ä¸ºè¾—è½¬ç›¸é™¤æ³•. å› ä¸ºè¿™ä¸ªç®—æ³•æ˜¯æ¬§å‡ é‡Œå¾—å‘æ˜çš„, æ‰€ä»¥ä¹Ÿç§°ä¸ºæ¬§å‡ é‡Œå¾—ç®—æ³•. è¾—è½¬ç›¸é™¤æ³•åŸºäºä»¥ä¸‹å®šç†: å¼•ç† 1 ä»¤ $a&#x3D;bq+r$, å…¶ä¸­ a, b, q å’Œ r å‡ä¸ºæ•´æ•°. åˆ™æœ‰$gcd(a,b)&#x3D;gcd(b,r)$ è¯æ˜ï¼šæˆ‘ä»¬å‡è®¾ d æ˜¯ a å’Œ b çš„å…¬çº¦æ•°, å³ $d|a$ä¸” $d|b$, é‚£ä¹ˆæ ¹æ®å®šç†2, d ä¹Ÿèƒ½æ•´é™¤ $a-bq&#x3D;r$. æ‰€ä»¥ a å’Œ b çš„ä»»ä½•å…¬çº¦æ•°ä¹Ÿæ˜¯ b å’Œ r çš„å…¬çº¦æ•°; ç±»ä¼¼åœ°, å‡è®¾ d æ˜¯ b å’Œ r çš„å…¬çº¦æ•°, å³ $d|b$ä¸” $d|r$, é‚£ä¹ˆæ ¹æ®å®šç†2, d ä¹Ÿèƒ½æ•´é™¤ $a&#x3D;bq+r$.. æ‰€ä»¥ b å’Œ r çš„ä»»ä½•å…¬çº¦æ•°ä¹Ÿæ˜¯ a å’Œ b çš„å…¬çº¦æ•°; å› æ­¤, a ä¸ b å’Œ b ä¸ r æ‹¥æœ‰ç›¸åŒçš„å…¬çº¦æ•°. æ‰€ä»¥ $gcd(a,b)&#x3D;gcd(b,r)$ è¾—è½¬ç›¸é™¤æ³•å°±æ˜¯åˆ©ç”¨å¼•ç†1, æŠŠå¤§æ•°è½¬æ¢æˆå°æ•°. ä¾‹å¦‚, æ±‚ $gcd(287,91)$, æˆ‘ä»¬å°±æŠŠç”¨è¾ƒå¤§çš„æ•°é™¤ä»¥è¾ƒå°çš„æ•°. é¦–å…ˆç”¨ 287 é™¤ä»¥ 91, å¾—$$287&#x3D;91\\cdot3+14$$æˆ‘ä»¬æœ‰$gcd(287,91)&#x3D;gcd(91,14)$,é—®é¢˜è½¬åŒ–æˆæ±‚$gcd(91,14)$,åŒæ ·çš„ï¼Œç”¨91é™¤ä»¥14å¾—$$91&#x3D;14\\cdot6+7$$æœ‰$gcd(91,14)&#x3D;gcd(14,7)$,ç”¨14é™¤ä»¥7å¾—$$14&#x3D;7\\cdot2+0$$æ‰€ä»¥$gcd(297,91)&#x3D;gcd(91,14)&#x3D;gcd(14,7)&#x3D;7$ ä»£ç æ˜¯è¿™æ ·çš„(ä¸¤ä¸ªéƒ½å¯ä»¥) 12345678910def gcd(a,b): while b!=0 : r = a%b a = b b = r return adef gcd_new(a,b): if b==0: return a return gcd_new(b,a%b) 3.2 è´ç¥–å®šç†ç°åœ¨æˆ‘ä»¬è®¨è®ºæœ€å¤§å…¬çº¦æ•°çš„ä¸€ä¸ªé‡è¦æ€§è´¨: å®šç† 4 è´ç¥–å®šç† å¦‚æœæ•´æ•° a, b ä¸å…¨ä¸ºé›¶, åˆ™ $gcd(a,b)$æ˜¯ a å’Œ b çš„çº¿æ€§ç»„åˆé›†$ax+by|x,y\\in Z$ ä¸­æœ€å°çš„å…ƒç´ . è¿™é‡Œçš„ x å’Œ y è¢«ç§°ä¸ºè´ç¥–ç³»æ•° è¯æ˜ ä»¤ $A&#x3D;ax+by|x,y\\in Z$ è®¾å­˜åœ¨ $x_0$ ,$y_0$ ä½¿ $d_0$ æ˜¯ A ä¸­çš„æœ€å°æ­£å…ƒç´ , $d_0&#x3D;ax_0+by_0$; ç°åœ¨ç”¨ $d_0$å»é™¤ a, è¿™å°±å¾—åˆ°å”¯ä¸€çš„æ•´æ•° q(å•†) å’Œ r(ä½™æ•°) æ»¡è¶³$$\\begin{aligned}d_0q+r &amp;&#x3D; a \\qquad 0\\leq r&lt;d_0\\(ax_0+by_0)q+r&amp;&#x3D;a\\r&amp;&#x3D;a-aqx_0-bqy_0\\r&amp;&#x3D;a(1-qx_0)+b(-qy_0)\\in A\\end{aligned}$$åˆ$0\\leq r &lt;d_0$,$d_0$æ˜¯Aä¸­æœ€å°çš„æ­£å…ƒç´  $\\therefore r&#x3D;0,d|a$ åŒç†, ç”¨ $d_0$å»é™¤ b, å¯å¾— $d_0|b$. æ‰€ä»¥è¯´ $d_0$ æ˜¯ a å’Œ b çš„å…¬çº¦æ•°. è®¾ a å’Œ b çš„æœ€å¤§å…¬çº¦æ•°æ˜¯ d, é‚£ä¹ˆ$d|(ax_0+by_0)$å³ $d|d_0$ $\\therefore d_0$æ˜¯aå’Œbçš„æœ€å¤§å…¬çº¦æ•° æˆ‘ä»¬å¯ä»¥å¯¹è¾—è½¬ç›¸é™¤æ³•ç¨ä½œä¿®æ”¹, è®©å®ƒåœ¨è®¡ç®—å‡ºæœ€å¤§å…¬çº¦æ•°çš„åŒæ—¶è®¡ç®—å‡ºè´ç¥–ç³»æ•°. 1234def gcd_new_2(a,b): if b==0: return a,1,0 d,x,y = gcd_new_2(b,a%b) return d,y,x-(int(a/b))*y å¤§å®¶æ˜¯å¦è¿˜è®°å¾—è¾—è½¬ç›¸é™¤æ³•ï¼šæˆ‘ä»¬æ¢ä¸€ä¸ªæ­¥éª¤å¤šä¸€ç‚¹çš„ä¾‹å­$gcd(963,657)$$$\\begin{aligned}963&amp;&#x3D;1\\cdot657+306 \\qquad\\qquad&amp;9&amp;&#x3D;7\\cdot657-15\\cdot(963-657)&#x3D;22\\cdot657-15\\cdot963 \\657&amp;&#x3D;2\\cdot306+45 &amp;9&amp;&#x3D;7\\cdot(657-2\\cdot306)-306&#x3D;7\\cdot657-15\\cdot963 \\306&amp;&#x3D;6\\cdot45+36 &amp;9&amp;&#x3D;45-(306-6\\cdot45)&#x3D;7\\cdot45-306\\45 &amp;&#x3D;1\\cdot36+9 &amp;9&amp;&#x3D;45-36\\36 &amp;&#x3D;4\\cdot9\\end{aligned}$$ $gcd(963,657)&#x3D;9&#x3D;22\\cdot657-15\\cdot963,x_0&#x3D;-15,y_0&#x3D;22$å°±æ˜¯äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹$963x+657y&#x3D;9$çš„ä¸€ç»„è§£ä¸”æ˜¯$963x+657y$æ–¹ç¨‹çš„æ­£æ•´æ•°ä¸­çš„æœ€å°è§£ã€‚ 4.çº¿æ€§åŒä½™æ–¹ç¨‹ç°åœ¨æˆ‘ä»¬æ¥è®¨è®ºæ±‚è§£å½¢å¦‚ $ax\\equiv b(\\bmod m)$ çš„çº¿æ€§åŒä½™æ–¹ç¨‹. æ±‚è§£è¿™æ ·çš„çº¿æ€§åŒä½™æ–¹ç¨‹æ˜¯æ•°è®ºç ”ç©¶åŠå…¶åº”ç”¨ä¸­çš„ä¸€é¡¹åŸºæœ¬ä»»åŠ¡. å¦‚ä½•æ±‚è§£è¿™æ ·çš„æ–¹ç¨‹å‘¢? æˆ‘ä»¬è¦ä»‹ç»çš„ä¸€ä¸ªæ–¹æ³•æ˜¯é€šè¿‡æ±‚ä½¿å¾—æ–¹ç¨‹ $\\overline{a}a\\equiv 1(\\bmod m)$ æˆç«‹çš„æ•´æ•° $\\overline{a}$. æˆ‘ä»¬ç§° $\\overline{a}$ä¸º a æ¨¡ m çš„é€†. ä¸‹é¢çš„å®šç†æŒ‡å‡º, å½“ a å’Œ m äº’ç´ æ—¶, a æ¨¡ m çš„é€†å¿…ç„¶å­˜åœ¨. å®šç†5ï¼šå¦‚æœ a å’Œ m ä¸ºäº’ç´ çš„æ•´æ•°ä¸” $m&gt;1$, åˆ™ a æ¨¡ m çš„é€†å­˜åœ¨, å¹¶ä¸”æ˜¯å”¯ä¸€çš„. è¯æ˜ ç”±è´ç¥–å®šç†å¯çŸ¥, $\\because gcd(a,m)&#x3D;1$ , âˆ´ å­˜åœ¨æ•´æ•° x å’Œ y ä½¿å¾—$$ax+my&#x3D;1$$è¿™è•´å«ç€$$ax+my\\equiv 1(\\bmod m)\\\\because my\\equiv0(\\bmod m)ï¼Œæ‰€ä»¥æœ‰\\ax\\equiv 1(\\bmod m)\\\\therefore xä¸ºaæ¨¡çš„é€†$$è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨è¾—è½¬ç›¸é™¤æ³• gcd(a, m) æ±‚å¾— a æ¨¡ m çš„é€†. æ±‚å¾—äº† a æ¨¡ m çš„é€† ï¿½Â¯, ç°åœ¨æˆ‘ä»¬å¯ä»¥æ¥è§£çº¿æ€§åŒä½™æ–¹ç¨‹äº†. å…·ä½“çš„åšæ³•æ˜¯è¿™æ ·çš„: å¯¹äºæ–¹ç¨‹$ax\\equiv b( \\bmod m)$åŒæ—¶ä¹˜ä»¥$\\overline{a}$å¾—,$$\\overline{a}ax\\equiv \\overline{a}b(\\bmod m)$$$æŠŠ\\overline{a}a\\equiv 1(\\bmod m )ä»£å…¥ä¸Šå¼ï¼Œå¾—\\$$$x\\equiv \\overline{a}b(\\bmod m)$$ $x\\equiv \\overline{a}b(\\bmod m)$å°±æ˜¯æ–¹ç¨‹çš„è§£ï¼Œæ³¨æ„åŒä½™æ–¹ç¨‹ä¼šæœ‰æ— æ•°ä¸ªWæ•´æ•°è§£, æ‰€ä»¥æˆ‘ä»¬ç”¨åŒä½™å¼æ¥è¡¨ç¤ºåŒä½™æ–¹ç¨‹çš„è§£. ä¾‹1:æ±‚$34x\\equiv 77(\\bmod 89)$ è§£è°ƒç”¨$gcd(34,89)$,å¾—$gcd(34,89)&#x3D;1&#x3D;1389-3434$,æ‰€ä»¥34æ¨¡89çš„é€†ä¸º-34ï¼Œæ–¹ç¨‹ä¸¤è¾¹åŒæ—¶ä¹˜ -34 å¾—$$\\begin{aligned}-34\\cdot34x&amp;\\equiv-34\\cdot77(\\bmod89)\\x&amp;\\equiv-34\\cdot77(\\bmod89)\\x&amp;\\equiv-2618\\equiv52(\\bmod89)\\end{aligned}$$ 5.ä¸­å›½å‰©ä½™å®šç†ä¸­å›½å—åŒ—æœæ—¶æœŸæ•°å­¦è‘—ä½œ å­™å­ç®—ç» ä¸­æå‡ºäº†è¿™æ ·ä¸€ä¸ªé—®é¢˜: æœ‰ç‰©ä¸çŸ¥å…¶æ•°ï¼Œä¸‰ä¸‰æ•°ä¹‹å‰©äºŒï¼Œäº”äº”æ•°ä¹‹å‰©ä¸‰ï¼Œä¸ƒä¸ƒæ•°ä¹‹å‰©äºŒã€‚é—®ç‰©å‡ ä½•ï¼Ÿ ç”¨ç°ä»£çš„æ•°å­¦è¯­è¨€è¡¨è¿°å°±æ˜¯: ä¸‹åˆ—åŒä½™æ–¹ç¨‹ç»„çš„è§£é‡Šå¤šå°‘?$$\\begin{cases}x\\equiv2(\\bmod3)\\x\\equiv3(\\bmod5)\\x\\equiv2(\\bmod7)\\\\end{cases}$$å­™å­ç®—ç» ä¸­é¦–æ¬¡æåˆ°äº†åŒä½™æ–¹ç¨‹ç»„é—®é¢˜åŠå…¶å…·ä½“è§£æ³•. å› æ­¤ä¸­å›½å‰©ä½™å®šç†ç§°ä¸ºå­™å­å®šç†. å®šç† 6 ä¸­å›½ä½™æ•°å®šç† ä»¤ $m_1,m_2,â€¦..,m_n$ä¸ºå¤§äº 1 ä¸”ä¸¤ä¸¤äº’ç´ çš„æ­£æ•´æ•°, $a_1,a_2,â€¦.a_n$ æ˜¯ä»»æ„æ•´æ•°. åˆ™åŒä½™æ–¹ç¨‹ç»„$$\\begin{cases}x\\equiv a_1(\\bmod m_1)\\x\\equiv a_2(\\bmod m_2)\\â€¦..\\x\\equiv a_n(\\bmod m_n)\\\\end{cases}$$æœ‰å”¯ä¸€çš„æ¨¡$m&#x3D;m_1m_2â€¦.m_n$çš„è§£ è¯æ˜ï¼šæˆ‘ä»¬ä½¿ç”¨æ„é€ è¯æ˜æ³•, æ„é€ å‡ºè¿™ä¸ªæ–¹ç¨‹ç»„çš„è§£. é¦–å…ˆå¯¹äº $i&#x3D;1,2,â€¦.,n$, ä»¤$$M_i&#x3D;\\frac{m}{m_i}$$ å³,$M_i$ æ˜¯é™¤äº†$m_i$ ä¹‹å¤–æ‰€æœ‰æ¨¡æ•°çš„ç§¯.$\\because m_1,m_2â€¦.m_n$ä¸¤ä¸¤äº’ç´ , $\\therefore gcd(m_i,M_i)&#x3D;1$ ç”±å®šç†5 å¯çŸ¥, å­˜åœ¨æ•´æ•° $y_i$ æ˜¯ $M_i$æ¨¡$m_i$çš„é€†. å³$$M_iy_i\\equiv1(\\bmod m_i)$$åŒæ—¶ä¹˜ä»¥$a_i$å¾—$$a_iM_iy_i\\equiv a_i(\\bmod m_i)$$å°±æ˜¯ç¬¬ i ä¸ªæ–¹ç¨‹çš„ä¸€ä¸ªè§£; é‚£ä¹ˆæ€ä¹ˆæ„é€ å‡ºæ–¹ç¨‹ç»„çš„è§£å‘¢? æˆ‘ä»¬æ³¨æ„åˆ°, æ ¹æ® $M_i$ çš„å®šä¹‰å¯å¾—, å¯¹æ‰€æœ‰çš„ $j\\neq i$, éƒ½æœ‰ $a_iM_iy_i\\equiv0(\\bmod m_j)$. å› æ­¤æˆ‘ä»¬ä»¤$$x&#x3D;a_1M_1y_1+a_2M_2y_2+â€¦.+a_nM_ny_n&#x3D;\\sum_{i&#x3D;1}^{n}{a_iM_iy_i}$$æœ‰äº†è¿™ä¸ªç»“è®º, æˆ‘ä»¬å¯ä»¥è§£ç­” å­™å­ç®—ç» ä¸­çš„é—®é¢˜äº†: å¯¹æ–¹ç¨‹ç»„çš„æ¯ä¸ªæ–¹ç¨‹, æ±‚å‡º $M_i$ , ç„¶åè°ƒç”¨ gcd(M_i, m_i) æ±‚å‡º $y_i$:$$\\begin{cases}\\begin{aligned}&amp;x\\equiv2(\\bmod3)\\quad &amp;M_1&amp;&#x3D;35\\quad y_1&#x3D;-1\\&amp;x\\equiv3(\\bmod5)\\quad &amp;M_2&amp;&#x3D;21\\quad y_2&#x3D;1\\&amp;x\\equiv2(\\bmod7)\\quad &amp;M_3&amp;&#x3D;15\\quad y_3&#x3D;-1\\\\end{aligned}\\end{cases}$$æœ€åæ±‚å‡º$x&#x3D;-235+321+2*15&#x3D;23\\equiv23(\\bmod 105)$ 6.è´¹é©¬å°å®šç†ç°åœ¨æˆ‘ä»¬æ¥çœ‹æ•°è®ºä¸­å¦å¤–ä¸€ä¸ªé‡è¦çš„å®šç†, è´¹é©¬å°å®šç†(Fermatâ€™s little theorem) å®šç†7è´¹é©¬å°å®šç†ï¼šå¦‚æœaæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œpæ˜¯ä¸€ä¸ªç´ æ•°ï¼Œé‚£ä¹ˆ$$a^p\\equiv a(\\bmod p)$$ç‰¹åˆ«çš„å½“aä¸æ˜¯pçš„å€æ•°æ—¶ï¼ˆå³$gcd(a,p)&#x3D;1$ï¼‰ï¼Œæœ‰$$a^{p-1}\\equiv1(\\bmod p)\\$$ 7æ¬§æ‹‰å‡½æ•°å†æ¥çœ‹ä¸€çœ‹æ¬§æ‹‰å‡½æ•°çš„çŸ¥è¯†ã€‚å¯¹äºæ­£æ•´æ•°nï¼Œæ¬§æ‹‰å‡½æ•°$\\varphi(n)$æ˜¯å°äºæˆ–ç­‰äºnçš„æ­£æ•´æ•°ä¸­ä¸näº’è´¨çš„æ•°çš„æ•°ç›® å¦‚$\\varphi(8)&#x3D;4$ï¼Œ1,3,5,7å‡ä¸8äº’è´¨ å®šç†8ï¼šn,mä¸ºæ•´æ•°,$(n,m)&#x3D;1$ï¼Œå¦‚æœ$a_1,a_2,â€¦.a_n$å’Œ$b_1,b_2,â€¦.b_n$åˆ†åˆ«æ˜¯æ¨¡n,mçš„ä¸€ä¸ªå®Œæ•´ç³»ï¼Œåˆ™æœ‰å½¢å¦‚$nb_i+ma_j(1\\leq i\\leq s,1\\leq j\\leq t)$çš„æ•°æ„æˆæ¨¡mnçš„ä¸€ä¸ªå®Œæ•´ç¼©ç³»ï¼Œç‰¹åˆ«åœ°æœ‰$\\varphi(nm)&#x3D;\\varphi(n)\\varphi(m)$ å®šç†9ï¼šå½“n$\\geq2$æ—¶ï¼Œè®¾$n&#x3D;p_1^{e_1}â€¦.p_s^{e_s}$æ˜¯nçš„æ ‡å‡†åˆ†è§£å¼ï¼Œåˆ™$$\\varphi(n)&#x3D;\\prod_{l&#x3D;1}^{s}(p_l^{e_l}-p_l^{e_l-1})&#x3D;n\\prod_{l&#x3D;1}^{s}(1-\\frac{1}{p})$$è¯æ˜ï¼šå½“$(n.m)&#x3D;1$æ—¶$$\\varphi(n,m)&#x3D;\\varphi(n)\\varphi(m)$$å½“$n_1,n_2â€¦â€¦n_s$ä¸¤ä¸¤äº’ç´ æ—¶$$\\varphi(\\prod_{l&#x3D;1}^{s}n_l)&#x3D;\\prod_{l&#x3D;1}^{s}n_l$$å› æ­¤$$\\varphi(n)&#x3D;\\prod_{l&#x3D;1}^{s}\\varphi(p_l^{e_l})$$é—®é¢˜è½¬åŒ–æˆå¦‚ä½•æ±‚$\\varphi(p_l^{e_l})$,å…¶ä¸­$p_l$è¦ä¹ˆ$p_l|a$,è¦ä¹ˆ$(p_l,a)&#x3D;1$ã€‚åœ¨1,2â€¦.$p_l$å½“ä¸­å¯ä»¥è¢«$p_l$æ•´é™¤çš„æ•´æ•°å…±æœ‰$\\frac{p_l^{e_l}}{p_l}&#x3D;p_l^{e_l-1}$ä¸ªï¼Œæ•…å…¶ä¸­ä¸$p_l^{e_l}$äº’ç´ çš„ä¸ªæ•°å…±æœ‰$p_l^{e_l}-p_l^{e_l-1}$ä¸ªï¼Œäºæ˜¯$$\\varphi(p_l^{e_l})&#x3D;p_l^{e_l}-p_l^{e_l-1}$$è¿™æ ·ä¸€æ¥$$\\varphi(n)&#x3D;\\prod_{l&#x3D;1}^{s}(p_l^{e_l}-p_l^{e_l-1})&#x3D;\\prod_{l&#x3D;1}^{s}p_l^{e_l}(1-\\frac{1}{p_l})&#x3D;n\\prod_{l&#x3D;1}^{s}(1-\\frac{1}{p})$$å…¶ä¸­è‹¥pä¸ºç´ æ•°ï¼Œåˆ™$$\\varphi(p)&#x3D;p-1&#x3D;p(1-\\frac{1}{p})$$ 8.RSAç®—æ³•æˆ‘ä»¬ç»ˆäºå¯ä»¥æ¥çœ‹ RSA ç®—æ³•äº†. å…ˆæ¥çœ‹ RSA ç®—æ³•æ˜¯æ€ä¹ˆè¿ä½œçš„: RSA ç®—æ³•æŒ‰ç…§ä»¥ä¸‹è¿‡ç¨‹åˆ›å»ºå…¬é’¥å’Œç§é’¥: 1.éšæœºç®—å–ä¸¤ä¸ªå¤§ç´ æ•°på’Œqï¼Œ$p\\neq q$ 2.è®¡ç®—$n&#x3D;pq$ 3.é€‰å–ä¸€ä¸ªä¸$(p-1)(q-1)$äº’ç´ çš„å°æ•´æ•°e 4.æ±‚eæ¨¡$(p-1)(q-1)$çš„é€†ï¼Œè®°ä½œdï¼Œå³$de\\equiv 1\\bmod(p-1)(q-1)$ 5.å°†$P&#x3D;(e,n)$å…¬å¼€ï¼Œæ˜¯å…¬é’¥ã€‚ 6.å°†$S&#x3D;(d,n)$ä¿å¯†ï¼Œä½œä¸ºç§é’¥ æƒ³ è¦æŠŠæ˜æ–‡$M $åŠ å¯†æˆå¯†æ–‡$C$,è®¡ç®—$$C&#x3D;M^e\\bmod n$$è¦æŠŠå¯†æ–‡è§£å¯†æˆæ˜æ–‡$C$$M $,è®¡ç®—$$M&#x3D;C^d \\bmod n$$ ä¸‹é¢è¯æ˜RSAç®—æ³•æ˜¯æœ‰æ•ˆçš„ï¼š è¯æ˜ï¼šè¦è¯æ˜å…¶æœ‰æ•ˆæ€§ï¼Œåªéœ€è¦è¯æ˜$C\\equiv M^e\\bmod n$ä¹Ÿå°±æ˜¯$M^{ed}\\equiv M(\\bmod n)$,æ³¨æ„åˆ°dä¸ºeæ¨¡$(p-1)(1-1)$çš„é€†ï¼Œæ‰€ä»¥æœ‰$$ed\\equiv 1(\\bmod(p-1)(q-1))$$ ã€‚","categories":[{"name":"CTFå…¥é—¨","slug":"CTFå…¥é—¨","permalink":"https://snowman12137.github.io/categories/CTF%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"ç°ä»£å¯†ç å­¦","slug":"ç°ä»£å¯†ç å­¦","permalink":"https://snowman12137.github.io/tags/%E7%8E%B0%E4%BB%A3%E5%AF%86%E7%A0%81%E5%AD%A6/"}],"author":"Sn0wma1n"},{"title":"å¤§ä¸‰ç½‘ç»œå®‰å…¨äººå·¥æ™ºèƒ½å®éªŒæŠ¥å‘Š","slug":"å¤§ä¸‰ç½‘ç»œå®‰å…¨äººå·¥æ™ºèƒ½å®éªŒæŠ¥å‘Š","date":"2023-05-04T12:09:16.000Z","updated":"2024-02-03T17:05:00.554Z","comments":true,"path":"2023/05/04/å¤§ä¸‰ç½‘ç»œå®‰å…¨äººå·¥æ™ºèƒ½å®éªŒæŠ¥å‘Š/","link":"","permalink":"https://snowman12137.github.io/2023/05/04/%E5%A4%A7%E4%B8%89%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/","excerpt":"","text":"ã€Šäººå·¥æ™ºèƒ½ã€‹è¯¾ç¨‹å®éªŒæŠ¥å‘Šç½‘ç»œä¸ä¿¡æ¯å®‰å…¨å­¦é™¢ç­ çº§ï¼š 20180XX å§“ åï¼š XXX å­¦ å·ï¼š 20009XXXX æäº¤æ—¶é—´ï¼š 2023. 4. 20 åŸºäºç¥ç»ç½‘ç»œçš„MNISTæ‰‹å†™æ•°å­—è¯†åˆ«ä¸€ã€å®éªŒç›®çš„ æŒæ¡è¿ç”¨ç¥ç»ç½‘ç»œæ¨¡å‹è§£å†³æœ‰ç›‘ç£å­¦ä¹ é—®é¢˜ æŒæ¡æœºå™¨å­¦ä¹ ä¸­å¸¸ç”¨çš„æ¨¡å‹è®­ç»ƒæµ‹è¯•æ–¹æ³• äº†è§£ä¸åŒè®­ç»ƒæ–¹æ³•çš„é€‰æ‹©å¯¹æµ‹è¯•ç»“æœçš„å½±å“ äºŒã€å®éªŒå†…å®¹MNISTæ•°æ®é›†â€‹ æœ¬å®éªŒé‡‡ç”¨çš„æ•°æ®é›†MNISTæ˜¯ä¸€ä¸ªæ‰‹å†™æ•°å­—å›¾ç‰‡æ•°æ®é›†ï¼Œå…±åŒ…å«å›¾åƒå’Œå¯¹åº”çš„æ ‡ç­¾ã€‚æ•°æ®é›†ä¸­æ‰€æœ‰å›¾ç‰‡éƒ½æ˜¯28x28åƒç´ å¤§å°ï¼Œä¸”æ‰€æœ‰çš„å›¾åƒéƒ½ç»è¿‡äº†é€‚å½“çš„å¤„ç†ä½¿å¾—æ•°å­—ä½äºå›¾ç‰‡çš„ä¸­å¿ƒä½ç½®ã€‚MNISTæ•°æ®é›†ä½¿ç”¨äºŒè¿›åˆ¶æ–¹å¼å­˜å‚¨ã€‚å›¾ç‰‡æ•°æ®ä¸­æ¯ä¸ªå›¾ç‰‡ä¸ºä¸€ä¸ªé•¿åº¦ä¸º784ï¼ˆ28x28x1ï¼Œå³é•¿å®½28åƒç´ çš„å•é€šé“ç°åº¦å›¾ï¼‰çš„ä¸€ç»´å‘é‡ï¼Œè€Œæ ‡ç­¾æ•°æ®ä¸­æ¯ä¸ªæ ‡ç­¾å‡ä¸ºé•¿åº¦ä¸º10çš„ä¸€ç»´å‘é‡ã€‚ åˆ†å±‚é‡‡æ ·æ–¹æ³•â€‹ åˆ†å±‚é‡‡æ ·ï¼ˆæˆ–åˆ†å±‚æŠ½æ ·ï¼Œä¹Ÿå«ç±»å‹æŠ½æ ·ï¼‰æ–¹æ³•ï¼Œæ˜¯å°†æ€»ä½“æ ·æœ¬åˆ†æˆå¤šä¸ªç±»åˆ«ï¼Œå†åˆ†åˆ«åœ¨æ¯ä¸ªç±»åˆ«ä¸­è¿›è¡Œé‡‡æ ·çš„æ–¹æ³•ã€‚é€šè¿‡åˆ’åˆ†ç±»åˆ«ï¼Œé‡‡æ ·å‡ºçš„æ ·æœ¬çš„ç±»å‹åˆ†å¸ƒå’Œæ€»ä½“æ ·æœ¬ç›¸ä¼¼ï¼Œå¹¶ä¸”æ›´å…·æœ‰ä»£è¡¨æ€§ã€‚åœ¨æœ¬å®éªŒä¸­ï¼ŒMNISTæ•°æ®é›†ä¸ºæ‰‹å†™æ•°å­—é›†ï¼Œæœ‰0~9å…±10ç§æ•°å­—ï¼Œè¿›è¡Œåˆ†å±‚é‡‡æ ·æ—¶å…ˆå°†æ•°æ®é›†æŒ‰æ•°å­—åˆ†ä¸º10ç±»ï¼Œå†æŒ‰åŒæ ·çš„æ–¹å¼åˆ†åˆ«è¿›è¡Œé‡‡æ ·ã€‚ ç¥ç»ç½‘ç»œæ¨¡å‹è¯„ä¼°æ–¹æ³•â€‹ é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®éªŒæµ‹è¯•æ¥å¯¹ç¥ç»ç½‘ç»œæ¨¡å‹çš„è¯¯å·®è¿›è¡Œè¯„ä¼°ã€‚ä¸ºæ­¤ï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªæµ‹è¯•é›†æ¥æµ‹è¯•æ¨¡å‹å¯¹æ–°æ ·æœ¬çš„åˆ¤åˆ«èƒ½åŠ›ï¼Œç„¶åä»¥æ­¤æµ‹è¯•é›†ä¸Šçš„æµ‹è¯•è¯¯å·®ä½œä¸ºè¯¯å·®çš„è¿‘ä¼¼å€¼ã€‚ä¸¤ç§å¸¸è§çš„åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„æ–¹æ³•ï¼š â€‹ ç•™å‡ºæ³•ï¼ˆhold-outï¼‰ç›´æ¥å°†æ•°æ®é›†æŒ‰æ¯”ä¾‹åˆ’åˆ†ä¸ºä¸¤ä¸ªäº’æ–¥çš„é›†åˆã€‚åˆ’åˆ†æ—¶ä¸ºå°½å¯èƒ½ä¿æŒæ•°æ®åˆ†å¸ƒçš„ä¸€è‡´æ€§ï¼Œå¯ä»¥é‡‡ç”¨åˆ†å±‚é‡‡æ ·ï¼ˆstratified samplingï¼‰çš„æ–¹å¼ï¼Œä½¿å¾—è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸­çš„ç±»åˆ«æ¯”ä¾‹å°½å¯èƒ½ç›¸ä¼¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæµ‹è¯•é›†åœ¨æ•´ä¸ªæ•°æ®é›†ä¸Šçš„åˆ†å¸ƒå¦‚æœä¸å¤Ÿå‡åŒ€è¿˜å¯èƒ½å¼•å…¥é¢å¤–çš„åå·®ï¼Œæ‰€ä»¥å•æ¬¡ä½¿ç”¨ç•™å‡ºæ³•å¾—åˆ°çš„ä¼°è®¡ç»“æœå¾€å¾€ä¸å¤Ÿç¨³å®šå¯é ã€‚åœ¨ä½¿ç”¨ç•™å‡ºæ³•æ—¶ï¼Œä¸€èˆ¬è¦é‡‡ç”¨è‹¥å¹²æ¬¡éšæœºåˆ’åˆ†ã€é‡å¤è¿›è¡Œå®éªŒè¯„ä¼°åå–å¹³å‡å€¼ä½œä¸ºç•™å‡ºæ³•çš„è¯„ä¼°ç»“æœã€‚ â€‹ kæŠ˜äº¤å‰éªŒè¯æ³•ï¼ˆk-fold cross validationï¼‰å…ˆå°†æ•°æ®é›†åˆ’åˆ†ä¸ºkä¸ªå¤§å°ç›¸ä¼¼çš„äº’æ–¥å­é›†ï¼Œæ¯ä¸ªå­é›†éƒ½å°½å¯èƒ½ä¿æŒæ•°æ®åˆ†å¸ƒçš„ä¸€è‡´æ€§ï¼Œå³ä¹Ÿé‡‡ç”¨åˆ†å±‚é‡‡æ ·ï¼ˆstratified samplingï¼‰çš„æ–¹æ³•ã€‚ç„¶åï¼Œæ¯æ¬¡ç”¨k-1ä¸ªå­é›†çš„å¹¶é›†ä½œä¸ºè®­ç»ƒé›†ï¼Œä½™ä¸‹çš„é‚£ä¸ªå­é›†ä½œä¸ºæµ‹è¯•é›†ï¼Œè¿™æ ·å°±å¯ä»¥è·å¾—kç»„è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œä»è€Œå¯ä»¥è¿›è¡Œkæ¬¡è®­ç»ƒå’Œæµ‹è¯•ã€‚æœ€ç»ˆè¿”å›çš„æ˜¯è¿™kä¸ªæµ‹è¯•ç»“æœçš„å‡å€¼ã€‚æ˜¾ç„¶ï¼ŒkæŠ˜äº¤å‰éªŒè¯æ³•çš„è¯„ä¼°ç»“æœçš„ç¨³å®šæ€§å’Œä¿çœŸæ€§åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºkçš„å–å€¼ã€‚kæœ€å¸¸ç”¨çš„å–å€¼æ˜¯10ï¼Œæ­¤å¤–å¸¸ç”¨çš„å–å€¼è¿˜æœ‰5ã€20ç­‰ã€‚ ä¸‰ã€å®éªŒæ–¹æ³•è®¾è®¡ å®éªŒç¯å¢ƒ 1.VSCODE 2.anaconda&#x3D;&#x3D;4.14.0 3.python&#x3D;&#x3D;3.7 4.TensorFlowâ€“gpu&#x3D;&#x3D;1.15.0 5.Keras&#x3D;&#x3D;2.3.1 6.å®éªŒæŠ¥å‘Šç¼–è¾‘å™¨ï¼štypora ä»‹ç»å®éªŒä¸­ç¨‹åºçš„æ€»ä½“è®¾è®¡æ–¹æ¡ˆã€å…³é”®æ­¥éª¤çš„ç¼–ç¨‹æ–¹æ³•åŠæ€è·¯ï¼Œä¸»è¦åŒ…æ‹¬: å› ä¸ºä¹‹å‰ç”¨è¿‡pytorchè¿›è¡Œæœºå™¨å­¦ä¹ çš„è®­ç»ƒå’Œå­¦ä¹ ï¼Œæ‰€ä»¥æœ¬ä½œä¸šä½¿ç”¨pytorchè¿›è¡Œå»ºæ¨¡å’Œè®­ç»ƒã€‚ æ ‡å‡†è®­ç»ƒæµç¨‹å¦‚ä¸‹ï¼šå¯¼å…¥åŒ…-&gt;è®¾å®šåˆå§‹å€¼-&gt;åŠ è½½æ•°æ®é›†ï¼ˆé¢„å¤„ç†ï¼‰-&gt;å»ºç«‹æ¨¡å‹-&gt;è®­ç»ƒ-&gt;æµ‹è¯•-&gt;è¯„ä¼° å…¶ä¸­éœ€è¦å¯¹åŠ è½½æ•°æ®é›†è¿›è¡Œå¤„ç†ï¼ŒæŠŠç•™å‡ºæ³•çš„æ¯”ä¾‹è¿›è¡Œè°ƒæ•´æ¥è§‚å¯Ÿç»“æœã€‚ å…¶æ¬¡è¦ä½¿ç”¨kæŠ˜äº¤å‰éªŒè¯æ³•è¿›è¡Œå¯¹æ¯”æµ‹è¯•ã€‚ ä¸ºäº†è¡¨æ˜kæŠ˜äº¤å‰éªŒè¯æ³•ä¸ç•™å‡ºæ³•çš„æ•ˆæœå¯¹æ¯”ï¼Œæˆ‘å»ºç«‹äº†è¿ä¸ªæ¨¡å‹ï¼Œä¸€ä¸ªæ˜¯æŒ‰ç…§æ ‡å‡†æµç¨‹å»ºç«‹çš„ä¼˜ç§€çš„æ¨¡å‹ã€‚ä¸€ä¸ªæ˜¯ç”¨ä½œå¯¹æ¯”kæŠ˜äº¤å‰éªŒè¯æ³•ä¸ç•™å‡ºæ³•æ•ˆæœå¯¹æ¯”çš„åŠ£è´¨æ¨¡å‹ã€‚ å«æœ‰tensorflowéƒ¨åˆ†ä»£ç ï¼Œåœ¨å››ã€4ä¸­ã€‚ è®¾ç½®åˆå§‹å€¼ 123456&gt;mean = [0.5]&gt;std = [0.5]&gt;# batch size&gt;BATCH_SIZE =128&gt;Iterations = 1 # epoch&gt;learning_rate = 0.01 ä¼˜åŒ–å™¨ä¸æŸå¤±å‡½æ•° 12&gt;criterion = torch.nn.CrossEntropyLoss() &gt;optimizer = torch.optim.SGD(model.parameters(),learning_rate) è®­ç»ƒä»£ç  12345678910111213&gt;def train(model, optimizer,criterion,epoch): model.train() # setting up for training for batch_idx, (data, target) in enumerate(train_loader): # data contains the image and target contains the label = 0/1/2/3/4/5/6/7/8/9 data = data.view(-1, 28*28).requires_grad_() optimizer.zero_grad() # setting gradient to zero output = model(data) # forward loss = criterion(output, target) # loss computation loss.backward() # back propagation here pytorch will take care of it optimizer.step() # updating the weight values if batch_idx % 100 == 0: print(&#x27;Train Epoch: &#123;&#125; [&#123;&#125;/&#123;&#125; (&#123;:.0f&#125;%)]\\tLoss: &#123;:.6f&#125;&#x27;.format( epoch, batch_idx * len(data), len(train_loader.dataset), 100. * batch_idx / len(train_loader), loss.item())) æµ‹è¯•ä»£ç  1234567891011121314151617181920212223&gt;def test(model, criterion, val_loader, epoch,train= False): model.eval() test_loss = 0 correct = 0 with torch.no_grad(): for batch_idx, (data, target) in enumerate(val_loader): data = data.view(-1, 28*28).requires_grad_() output = model(data) test_loss += criterion(output, target).item() # sum up batch loss pred = output.max(1, keepdim=True)[1] # get the index of the max log-probability correct += pred.eq(target.view_as(pred)).sum().item() # if pred == target then correct +=1 test_loss /= len(val_loader.dataset) # average test loss if train == False: print(&#x27;\\nTest set: Average loss: &#123;:.4f&#125;, Accuracy: &#123;&#125;/&#123;&#125; (&#123;:.4f&#125;%)\\n&#x27;.format( test_loss, correct, val_loader.sampler.__len__(), 100. * correct / val_loader.sampler.__len__() )) if train == True: print(&#x27;\\nTrain set: Average loss: &#123;:.4f&#125;, Accuracy: &#123;&#125;/&#123;&#125; (&#123;:.4f&#125;%)\\n&#x27;.format( test_loss, correct, val_loader.sampler.__len__(), 100. * correct / val_loader.sampler.__len__() )) return 100. * correct / val_loader.sampler.__len__() 1ï¼‰æ¨¡å‹æ„å»ºçš„ç¨‹åºè®¾è®¡ï¼ˆä¼ªä»£ç æˆ–æºä»£ç æˆªå›¾ï¼‰åŠè¯´æ˜è§£é‡Š ï¼ˆ10åˆ†ï¼‰è®­ç»ƒæ¨¡å‹ 12345678910111213141516class Net(nn.Module): def __init__(self): super(Net, self).__init__() self.conv = nn.Conv2d(1, 32, 3) self.dropout = nn.Dropout2d(0.25) self.fc = nn.Linear(5408, 10) def forward(self, x): x = self.conv(x) x = F.relu(x) x = F.max_pool2d(x, 2) x = self.dropout(x) x = torch.flatten(x, 1) x = self.fc(x) output = F.log_softmax(x, dim=1) return output æˆ‘ç”¨äº†ä¸€å±‚convå’Œä¸€å±‚poolæ¥è·å–cherngå›¾ç‰‡çš„ç‰¹å¾ã€‚ä¹‹åæŠŠè¿™äº›ç‰¹å¾å‡å°ä¸º10ä¸ªå±‚ï¼Œæ‰€ä»¥ç”¨flattenæŠŠç‰¹å¾é›†ä¸­æˆvectoråï¼Œå†ç”¨ä¸€ä¸ªå…¨è¿æ¥å±‚è¿æ¥åˆ°è¾“å‡ºå±‚ã€‚ ä½¿ç”¨ç•™å‡ºæ³•åŸå§‹çš„è®­ç»ƒæ¯”ä¾‹ï¼Œä¸¤ä¸ªEpochï¼Œå¾—åˆ°çš„ç»“æœå¾ˆå¥½ã€‚è¾¾åˆ°97%ã€‚ ä¸ºäº†å¯¹æ¯”ç•™å‡ºæ³•åŠKæŠ˜éªŒè¯æ³•å»ºç«‹çš„ç®€é™‹æ¨¡å‹ 1model = nn.Sequential(nn.Flatten(), nn.Linear(784, 256), nn.ReLU(),nn.Linear(256, 10)) å¯ä»¥çœ‹åˆ°è¿™ä¸ªç®€é™‹æ¨¡å‹å¾—åˆ°çš„ç»“æœå¾ˆå·®ï¼Œå‡†ç¡®ç‡åªæœ‰83%ï¼Œç”¨äºä¹‹åçš„KæŠ˜æ ¡éªŒæ³•çš„å¯¹æ¯”ç»„ã€‚é¢„å¤„ç†å’Œä¸Šè¿°ç›¸åŒï¼ŒEpochåªæœ‰ä¸€ç»„ã€‚ 2ï¼‰æ¨¡å‹è¿­ä»£è®­ç»ƒçš„ç¨‹åºè®¾è®¡ï¼ˆä¼ªä»£ç æˆ–æºä»£ç æˆªå›¾ï¼‰åŠè¯´æ˜è§£é‡Š ï¼ˆ10åˆ†ï¼‰123456789101112131415def train(model, optimizer,criterion,epoch): model.train() # setting up for training for batch_idx, (data, target) in enumerate(train_loader): data = data.view(-1, 28*28).requires_grad_() optimizer.zero_grad() # setting gradient to zero output = model(data) # forward loss = criterion(output, target) # loss computation loss.backward() # back propagation here pytorch will take care of it optimizer.step() # updating the weight values if batch_idx % 100 == 0: print(&#x27;Train Epoch: &#123;&#125; [&#123;&#125;/&#123;&#125; (&#123;:.0f&#125;%)]\\tLoss: &#123;:.6f&#125;&#x27;.format( epoch, batch_idx * len(data), len(train_loader.dataset), 100. * batch_idx / len(train_loader), loss.item())) å…ˆæ³¨æ„åˆ°å› ç‚º training å’Œ testing æ™‚ model æœƒæœ‰ä¸åŒè¡Œç‚ºï¼Œæ‰€ä»¥ç”¨ model.train() æŠŠ model èª¿æˆ training æ¨¡å¼ã€‚ æ¥è‘— iterate é batch_idxï¼Œæ¯å€‹ batch_idxæœƒ train éæ•´å€‹ training setã€‚æ¯å€‹ dataset æœƒåš batch trainingã€‚ æ¥ä¸‹ä¾†å°±æ˜¯é‡é»äº†ã€‚åŸºæœ¬çš„æ­¥é©Ÿï¼šzero_gradã€model(data)ã€å– lossã€back propagation ç®— gradientã€æœ€å¾Œ update parameterã€‚å‰é¢éƒ½ä»‹ç´¹éäº†ï¼Œé‚„ä¸ç†Ÿçš„å¯ä»¥å¾€å‰ç¿»ã€‚ 3ï¼‰æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­å‘¨æœŸæ€§æµ‹è¯•çš„ç¨‹åºè®¾è®¡ï¼ˆä¼ªä»£ç æˆ–æºä»£ç æˆªå›¾ï¼‰åŠè¯´æ˜è§£é‡Šï¼ˆå‘¨æœŸæ€§æµ‹è¯•æŒ‡çš„æ˜¯æ¯è®­ç»ƒnä¸ªstepå°±å¯¹æ¨¡å‹è¿›è¡Œä¸€æ¬¡æµ‹è¯•ï¼Œå¾—åˆ°å‡†ç¡®ç‡å’Œlosså€¼ï¼‰ï¼ˆ10åˆ†ï¼‰ æˆ‘é€‰ç”¨äº†æ¯100æ­¥è¿›è¡Œä¸€ä¸ªæ‰“å°çš„é¢‘ç‡ï¼Œæ‰“å°è®­ç»ƒè¿›åº¦å’ŒLosså€¼ï¼Œæœ€åæ‰“å°å¹³å‡æŸå¤±å€¼å’Œå‡†ç¡®ç‡ã€‚ 4ï¼‰åˆ†å±‚é‡‡æ ·çš„ç¨‹åºè®¾è®¡ï¼ˆä¼ªä»£ç æˆ–æºä»£ç æˆªå›¾ï¼‰åŠè¯´æ˜è§£é‡Š ï¼ˆ10åˆ†ï¼‰12345678910111213141516171819train_transform = transforms.Compose([ transforms.ToTensor(), transforms.Normalize(mean, std) ]) test_transform = transforms.Compose([ transforms.ToTensor(), transforms.Normalize(mean, std) ]) train_loader = torch.utils.data.DataLoader( datasets.MNIST(&#x27;./mnist&#x27;, train=True, download=True, transform=train_transform), batch_size=BATCH_SIZE, shuffle=True) # train dataset test_loader = torch.utils.data.DataLoader( datasets.MNIST(&#x27;./mnist&#x27;, train=False, transform=test_transform), batch_size=BATCH_SIZE, shuffle=False) # test dataset 123456789&gt;def hold_out(images, labels, train_percentage): test_acc = torch.zeros([Iterations]) train_acc = torch.zeros([Iterations]) ## training the logistic model for i in range(Iterations): train(model, optimizer,criterion,i) train_acc[i] = test(model, criterion, train_loader, i,train=True) #Testing the the current CNN test_acc[i] = test(model, criterion, test_loader, i) torch.save(model,&#x27;perceptron.pt&#x27;) ä½¿ç”¨äº†ç³»ç»Ÿè‡ªå¸¦çš„ministæ•°æ®åˆ†ç±»å™¨ã€‚ 5ï¼‰kæŠ˜äº¤å‰éªŒè¯æ³•çš„ç¨‹åºè®¾è®¡ï¼ˆä¼ªä»£ç æˆ–æºä»£ç æˆªå›¾ï¼‰åŠè¯´æ˜è§£é‡Š ï¼ˆ10åˆ†ï¼‰ mnistæ•°æ®é›†çš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„åˆå¹¶ 123456789train_init = datasets.MNIST(&#x27;./mnist&#x27;, train=True, transform=train_transform) test_init = datasets.MNIST(&#x27;./mnist&#x27;, train=False, transform=test_transform) # the dataset for k fold cross validation dataFold = torch.utils.data.ConcatDataset([train_init, test_init]) ä½¿ç”¨Sklearnä¸­çš„KFoldè¿›è¡Œæ•°æ®é›†åˆ’åˆ†ï¼Œå¹¶ä¸”è½¬æ¢å›pytorchç±»å‹çš„Dataloader 123456789kf = KFold(n_splits=k_split_value,shuffle=True, random_state=0) # init KFold for train_index , test_index in kf.split(dataFold): # split # get train, val æ ¹æ®ç´¢å¼•åˆ’åˆ† train_fold = torch.utils.data.dataset.Subset(dataFold, train_index) test_fold = torch.utils.data.dataset.Subset(dataFold, test_index) train_loader = torch.utils.data.DataLoader(dataset=train_fold, batch_size=BATCH_SIZE, shuffle=True) test_loader = torch.utils.data.DataLoader(dataset=test_fold, batch_size=BATCH_SIZE, shuffle=True) å®Œæ•´çš„ä»£ç  1234567891011121314151617181920212223242526def train_flod_Mnist(k_split_value): different_k_mse = [] kf = KFold(n_splits=k_split_value,shuffle=True, random_state=0) # init KFold for train_index , test_index in kf.split(dataFold): # split # get train, val train_fold = torch.utils.data.dataset.Subset(dataFold, train_index) test_fold = torch.utils.data.dataset.Subset(dataFold, test_index) # package type of DataLoader train_loader = torch.utils.data.DataLoader(dataset=train_fold, batch_size=BATCH_SIZE, shuffle=True) test_loader = torch.utils.data.DataLoader(dataset=test_fold, batch_size=BATCH_SIZE, shuffle=True) # train model test_acc = torch.zeros([Iterations]) train_acc = torch.zeros([Iterations]) ## training the logistic model for i in range(Iterations): train(model, optimizer,criterion,i) train_acc[i] = test(model, criterion, train_loader, i,train=True) #Testing the the current CNN test_acc[i] = test(model, criterion, test_loader, i) #torch.save(model,&#x27;perceptron.pt&#x27;) # one epoch, all acc different_k_mse.append(np.array(test_acc)) return different_k_mse æŒ‰å¾ªåºæ‰“å°ç»“æœ 123456testAcc_compare_map = &#123;&#125;for k_split_value in range(2, 10+1): print(&#x27;now k_split_value is:&#x27;, k_split_value) testAcc_compare_map[k_split_value] = train_flod_Mnist(k_split_value)for key in testAcc_compare_map:print(np.mean(testAcc_compare_map[key])) testAcc_compare_mapæ˜¯å°†ä¸åŒkå€¼ä¸‹è®­ç»ƒçš„ç»“æœä¿å­˜èµ·æ¥ï¼Œä¹‹åæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå­—å…¸å˜é‡ï¼Œè®¡ç®—å‡ºrmse ï¼Œæ¯”è¾ƒä¸åŒkå€¼ä¸‹ï¼Œå®éªŒç»“æœçš„é²æ£’æ€§ã€‚ å››ã€å®éªŒç»“æœå±•ç¤ºå±•ç¤ºç¨‹åºç•Œé¢è®¾è®¡ã€è¿è¡Œç»“æœåŠç›¸å…³åˆ†æç­‰ï¼Œä¸»è¦åŒ…æ‹¬ï¼š 1ï¼‰æ¨¡å‹åœ¨éªŒè¯é›†ä¸‹çš„å‡†ç¡®ç‡ï¼ˆè¾“å‡ºç»“æœå¹¶æˆªå›¾ï¼‰ï¼ˆ10åˆ†ï¼‰ ä¸‹é¢çš„å®éªŒæ˜¯kå€¼ä¸º[2,10]ä¸‹çš„ç»“æœï¼Œè®­ç»ƒæ¨¡å‹ä¸ºç®€é™‹æ¨¡å‹ã€‚ å¯¹ç…§ç»„ï¼šç®€é™‹æ¨¡å‹ï¼Œepochä¸º1ï¼Œåˆ†å±‚æŠ½æ ·ï¼ˆæ­£ç¡®ç‡åªæœ‰83.79%ï¼‰ kæŠ˜æ ¡éªŒï¼šç®€é™‹æ¨¡å‹ï¼Œepochä¸º1ï¼ŒKæŠ˜äº¤å‰éªŒè¯(Kå€¼ä¸º2åˆ°10)å‡†ç¡®ç‡è¶Šæ¥è¶Šå¤§ 2ï¼‰ä¸åŒæ¨¡å‹å‚æ•°ï¼ˆéšè—å±‚æ•°ã€éšè—å±‚èŠ‚ç‚¹æ•°ï¼‰å¯¹å‡†ç¡®ç‡çš„å½±å“å’Œåˆ†æ ï¼ˆ10åˆ†ï¼‰ æœ¬æ¬¡å®éªŒä¸­åªæ¢è®¨äº†ç®€é™‹ç‰ˆæ¨¡å‹ä¸å·ç§¯æ¨¡å‹çš„å¯¹æ¯”ï¼š å…¶ä¸­ç®€é™‹ç‰ˆæ¨¡å‹å¦‚ä¸‹ï¼Œå…ˆæŠŠå›¾ç‰‡å˜ä¸ºä¸€ä¸ªä»¥ä¸ºå¼ é‡ï¼Œç„¶åç”±ä¸€ä¸ªå…¨è¿æ¥å±‚é“¾æ¥ï¼Œæ¥å…¥åˆ°ReLuå±‚ä¸­ï¼Œç„¶åæ¥å…¥å…¨è¿æ¥å±‚ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨å·ç§¯å±‚ï¼Œåœ¨epoch&#x3D;1çš„æƒ…å†µä¸‹åªæœ‰83%çš„å‡†ç¡®ç‡ã€‚ 1&gt;model = nn.Sequential(nn.Flatten(), nn.Linear(784, 256), nn.ReLU(),nn.Linear(256, 10)) å·ç§¯æ¨¡å‹å¦‚ä¸‹ï¼Œå…ˆå®šä¹‰å·ç§¯å·ç§¯å±‚ï¼Œè¾“å…¥é€šé“ä¸º1ï¼Œè¾“å‡ºä¸º32ï¼Œæ ¸å¤§å°ä¸º3ï¼Œä¸€ä¸ªDropout2då±‚ï¼Œä»¥0.25çš„æ¦‚ç‡å°†é€šé“è¾“å…¥ç½®é›¶ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚ç„¶åæ˜¯ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œè¾“å…¥ä¸º5408ï¼Œè¾“å‡ºä¸º10ï¼Œæ˜ å°„åˆ°10ä¸ªåˆ†ç±»ç»“æœã€‚åœ¨forwardä¸­é¦–å…ˆé€šè¿‡å·ç§¯å±‚è¿›è¡Œå·ç§¯ï¼Œç„¶åé€šè¿‡ReLUè¿›è¡Œéçº¿æ€§å˜æ¢ï¼Œç„¶åä½¿ç”¨æœ€å¤§æ± åŒ–å±‚è¿›è¡Œé‡‡æ ·ï¼Œå°†å›¾ç­¾å°ºå¯¸ç¼©å°ä¸€åŠï¼Œç„¶åç”¨Dropout2dé˜²æ­¢è¿‡æ‹Ÿåˆï¼Œæ¥ç€æŠŠè¾“å‡ºçš„å¼ è‰¯å±•å¹³ä¸ºä¸€ç»´ï¼Œå¹¶ä¼ å…¥å…¨è¿æ¥å±‚ã€‚ åœ¨ 12345678910111213141516&gt;class Net(nn.Module): def __init__(self): super(Net, self).__init__() self.conv = nn.Conv2d(1, 32, 3) self.dropout = nn.Dropout2d(0.25) self.fc = nn.Linear(5408, 10) def forward(self, x): x = self.conv(x) x = F.relu(x) x = F.max_pool2d(x, 2) x = self.dropout(x) x = torch.flatten(x, 1) x = self.fc(x) output = F.log_softmax(x, dim=1) return output å¯ä»¥çœ‹åˆ°åœ¨epoch&#x3D;1çš„æƒ…å†µä¸‹å‡†ç¡®ç‡è¾¾åˆ°97%ï¼Œæ‹Ÿåˆæ•ˆæœéå¸¸å¥½ 3ï¼‰ä¸åŒè®­ç»ƒå‚æ•°ï¼ˆbatch sizeã€epoch numã€å­¦ä¹ ç‡ï¼‰å¯¹å‡†ç¡®ç‡çš„å½±å“å’Œåˆ†æ ï¼ˆ10åˆ†ï¼‰ æ³¨ï¼šé»˜è®¤å€¼ï¼šåœ¨è®¨è®ºæŸä¸€å˜åŒ–æ—¶ï¼Œå…¶ä»–å€¼ä¸å˜ 123&gt;BATCH_SIZE =64&gt;Iterations = 1 # epoch&gt;learning_rate = 0.01 åŸå§‹ç»“æœï¼ˆ83%ï¼‰ BATCH_SIZEè®¨è®ºï¼ˆå¯ä»¥å‘ç°å½“BATCH_SIZEè¶Šå¤§æ—¶ï¼Œå‡†ç¡®ç‡ç›´çº¿ä¸‹é™ï¼‰ 1&gt;&#123;&quot;16&quot;:&quot;90.85%&quot;,&quot;32&quot;:&quot;90.1000%&quot;,&quot;64&quot;:&quot;88.2200%&quot;,&quot;128&quot;:&quot;83.7100%&quot;,&quot;256&quot;:&quot;70.7300%&quot;,&quot;512&quot;:&quot;48.2400%&quot;&#125; epochè®¨è®º(å¯ä»¥å‘ç°éšç€epochçš„å¢å¤§ï¼Œå‡†ç¡®ç‡æœ‰è¾ƒå¤§æå‡ï¼Œä½†æ˜¯éšç€epochè¶Šæ¥è¶Šå¤§ï¼Œå‡†ç¡®ç‡å¢é•¿è¶Šæ¥è¶Šæ…¢) 12[1,2,4,6,10,15][83.83,88.370,90.290,91.260,92.420,93.36] å­¦ä¹ ç‡ å¯ä»¥çœ‹åˆ°ï¼Œå½“å­¦ä¹ ç‡å¢å¤§æ—¶ï¼Œå‡†ç¡®ç‡æœ‰æ‰€å¢åŠ ï¼Œä½†æ˜¯å½“å­¦ä¹ ç‡å¤§äº0.2æ—¶ï¼Œå‡†ç¡®ç‡æ€¥é€Ÿä¸‹æ»‘åˆ°11%å·¦å³ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ10ä¸ªæ‰‹å†™ä½“æ­£ç¡®ç‡åªæœ‰1ä¸ªï¼Œè¶‹äºéšæœºåˆ†å¸ƒï¼Œæ˜¯ä¸€ä¸ªéå¸¸ä¸å¥½çš„æ¨¡å‹ï¼Œå¯è§ï¼Œå­¦ä¹ ç‡çš„é€‰æ‹©è‡³å…³é‡è¦ã€‚ 12&gt;[0.01,0.02,0.05,0.1,0.2,0.5,1]&gt;[83.83,88.230,90.78,91.79,91.78,11.35,11.35] 4ï¼‰ç•™å‡ºæ³•ä¸åŒæ¯”ä¾‹å¯¹ç»“æœçš„å½±å“å’Œåˆ†æ ï¼ˆ10åˆ†ï¼‰ å› ä¸ºpytorchä¸­çš„è®­ç»ƒé›†æ˜¯å›ºå®šè¾“å‡ºçš„ï¼Œå¯¹å…¶æ›´æ”¹è¾ƒéš¾ï¼Œæ‰€ä»¥æœ¬å°èŠ‚ä½¿ç”¨TensorFlowè¿›è¡Œå®éªŒï¼š æ•°æ®é›†åˆ’åˆ†:å…¶ä¸­aä¸ºè®­ç»ƒæ¯”ç‡ï¼Œæ€»å…±æœ‰70000ä¸ªæ ·æœ¬ï¼ŒæŒ‰ç…§æ¯”ä¾‹è¿›è¡Œè®­ç»ƒå’Œæµ‹è¯•ï¼Œç»“æœå¦‚ä¸‹ 1234567891011121314151617181920212223&gt;np.random.seed(10)&gt;a = 0.8&gt;from keras.datasets import mnist&gt;(x_train_image,y_train_label),(x_test_image,y_test_label)=mnist.load_data()&gt;# x_all = x_train_image + x_test_image&gt;temp = np.append( x_train_image , x_test_image)&gt;x_all = temp.reshape(70000,28,28)&gt;print(len(y_train_label))&gt;y_lable = np.append(y_train_label,y_test_label)&gt;train_num = int(60000*a)&gt;x_train_image = x_all[:train_num]&gt;y_train_label = y_lable[:train_num]&gt;x_test_image = x_all[train_num:]&gt;y_test_label = y_lable[train_num:]&gt;x_Train=x_train_image.reshape(train_num,784).astype(&#x27;float32&#x27;)&gt;x_Test=x_test_image.reshape(70000-train_num,784).astype(&#x27;float32&#x27;) 12&gt;[0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 0.95, 0.9999]&gt;[0.9213, 0.9381, 0.9528, 0.9620, 0.9666, 0.9673, 0.9709, 0.9752, 0.9758, 0.9784, 0.9780] å¯ä»¥çœ‹åˆ°éšç€è®­ç»ƒæ ·æœ¬çš„æ¯”ç‡ä¸Šå‡ï¼Œæ€»ä½“çš„å‡†ç¡®ç‡ä¹Ÿå¯¹åº”çš„æ˜æ˜¾çš„ä¸Šå‡äº†ï¼Œä½†æ˜¯æœ€åä¸€ç»„0.9999æ¯”ç‡çš„ç»„ï¼Œè¾ƒå‰ä¸€ç»„0.95æœ‰æ‰€ä¸‹é™ï¼Œè¿™è¡¨æ˜è¿‡å¤§çš„è®­ç»ƒæ¯”ç‡å¯¹ç»“æœä¹Ÿä¼šäº§ç”ŸæŸå®³ã€‚ 5ï¼‰kæŠ˜äº¤å‰éªŒè¯æ³•ä¸åŒkå€¼å¯¹ç»“æœçš„å½±å“å’Œåˆ†æ ï¼ˆ10åˆ†ï¼‰ æŠŠkå€¼ä»2-10è¿›è¡Œè¿­ä»£è®¡ç®—ï¼Œå…¶ä»–å‚æ•°ä¸å˜ï¼Œç»“æœä¸ºï¼š 12345678&gt;testAcc_compare_map = &#123;&#125;&gt;for k_split_value in range(2, 10+1): print(&#x27;now k_split_value is:&#x27;, k_split_value) testAcc_compare_map[k_split_value] = cross_validation(k_split_value) &gt;for key in testAcc_compare_map: print(np.mean(testAcc_compare_map[key])) å¯è§Kå€¼å¯¹ç»“æœå½±å“å¾ˆå¤§ï¼Œä¸”åœ¨ä¸€å®šèŒƒå›´å†…ï¼Œè¶Šå¤§è¶Šå¥½ã€‚ äº”ã€å®éªŒæ€»ç»“åŠå¿ƒå¾— æœ¬æ¬¡å®éªŒç†ŸçŸ¥äº†pytorchå’ŒTensorFlowçš„ä½¿ç”¨ï¼Œè¿˜æœ‰æœºå™¨å­¦ä¹ çš„æ•´ä½“æµç¨‹å’Œå¤„ç†æ¦‚å†µï¼Œè§£å†³äº†å‡ºç°çš„è¯¸å¤šé—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨é…ç½®TensorFlowç‰ˆæœ¬æ—¶å‡ºç°çš„é—®é¢˜ï¼Œç†ŸçŸ¥äº†åŸºæœ¬çš„å›¾åƒå¤„ç†æ¨¡å‹ï¼Œä»¥åŠå·ç§¯æ¨¡å‹çš„åŸºæœ¬æ„å»ºã€‚ åœ¨å‚æ•°è°ƒé…æ–¹é¢ï¼Œè¯¦ç»†äº†è§£äº†åˆ†å±‚å–æ ·æ³•ï¼ŒkæŠ˜äº¤å‰éªŒè¯æ³•çš„ä½¿ç”¨ä»¥åŠæ•ˆæœè¿˜æœ‰æ¯”ä¾‹çš„è°ƒè¯•ã€‚è¿˜æœ‰åœ¨å…³é”®å‚æ•°å¦‚batch sizeã€epoch numã€å­¦ä¹ ç‡æ–¹é¢æœ‰ç€è¾ƒå¥½çš„ç»éªŒæ€»ç»“ã€‚","categories":[{"name":"å­¦æ ¡ä½œä¸š","slug":"å­¦æ ¡ä½œä¸š","permalink":"https://snowman12137.github.io/categories/%E5%AD%A6%E6%A0%A1%E4%BD%9C%E4%B8%9A/"}],"tags":[{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"https://snowman12137.github.io/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"},{"name":"å­¦æ ¡ä½œä¸š","slug":"å­¦æ ¡ä½œä¸š","permalink":"https://snowman12137.github.io/tags/%E5%AD%A6%E6%A0%A1%E4%BD%9C%E4%B8%9A/"}],"author":"Sn0wma1n"},{"title":"å¤§ä¸‰ç½‘ç»œå®‰å…¨æ™ºèƒ½ç»ˆç«¯å®éªŒä¸€","slug":"å¤§ä¸‰ç½‘ç»œå®‰å…¨æ™ºèƒ½ç»ˆç«¯å®éªŒä¸€","date":"2023-05-04T12:09:16.000Z","updated":"2024-02-03T17:04:32.365Z","comments":true,"path":"2023/05/04/å¤§ä¸‰ç½‘ç»œå®‰å…¨æ™ºèƒ½ç»ˆç«¯å®éªŒä¸€/","link":"","permalink":"https://snowman12137.github.io/2023/05/04/%E5%A4%A7%E4%B8%89%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%99%BA%E8%83%BD%E7%BB%88%E7%AB%AF%E5%AE%9E%E9%AA%8C%E4%B8%80/","excerpt":"","text":"è¥¿å®‰ç”µå­ç§‘æŠ€å¤§å­¦ç½‘ä¿¡é™¢ æ™ºèƒ½ç»ˆç«¯å®éªŒå®éªŒæŠ¥å‘Šï¼ˆä¸€ï¼‰ç­çº§ï¼š2018XXå­¦å·ï¼š20009XXXXæ—¥æœŸï¼š2023.4.24ä¸€ã€å®éªŒæ‘˜è¦ç ”ç©¶ä¸æ–­æ¨åŠ¨æœºå™¨å­¦ä¹ æ¨¡å‹æ›´å¿«ï¼Œæ›´ç²¾ç¡®ï¼Œæ›´æœ‰æ•ˆã€‚ç„¶è€Œï¼Œè®¾è®¡å’Œè®­ç»ƒæ¨¡å‹çš„ä¸€ä¸ªç»å¸¸è¢«å¿½è§†çš„æ–¹é¢æ˜¯å®‰å…¨æ€§å’Œé²æ£’æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨é¢å¯¹å¸Œæœ›æ¬ºéª—æ¨¡å‹çš„å¯¹æ‰‹æ—¶ã€‚å‘å›¾åƒæ·»åŠ ä¸å¯å¯Ÿè§‰çš„æ‰°åŠ¨å¯ä»¥å¯¼è‡´å®Œå…¨ä¸åŒçš„æ¨¡å‹æ€§èƒ½ã€‚æˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªå›¾åƒåˆ†ç±»å™¨çš„ä¾‹å­æ¥æ¢è®¨è¿™ä¸ªä¸»é¢˜ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç¬¬ä¸€ä¸ªå’Œæœ€æµè¡Œçš„æ”»å‡»æ–¹æ³•ä¹‹ä¸€ï¼Œå¿«é€Ÿæ¢¯åº¦ç¬¦å·æ”»å‡»(FGSM) ï¼Œä»¥æ¬ºéª— MNIST åˆ†ç±»å™¨ã€‚ï¼ˆæ‘˜è‡ªhttps://pytorch.org/tutorials/beginner/ fgsm_tutorial.htm l?highlight&#x3D;a dversarial% 20example%20generationï¼‰ äºŒã€å®éªŒå†…å®¹a) å®éªŒæ€è·¯#### ç®€è¿° æœ‰è®¸å¤šç±»åˆ«çš„å¯¹æŠ—æ€§æ”»å‡»ï¼Œæ¯ç§æ”»å‡»éƒ½æœ‰ä¸åŒçš„ç›®æ ‡å’Œå¯¹æ”»å‡»è€…çŸ¥è¯†çš„å‡è®¾ã€‚ç„¶è€Œï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæ€»ä½“ç›®æ ‡æ˜¯å‘è¾“å…¥æ•°æ®æ·»åŠ æœ€å°‘é‡çš„æ‰°åŠ¨ï¼Œä»è€Œå¯¼è‡´æ‰€éœ€çš„é”™è¯¯åˆ†ç±»ã€‚æœ‰å‡ ç§å‡è®¾æ”»å‡»è€…çš„çŸ¥è¯†ï¼Œå…¶ä¸­ä¸¤ä¸ªæ˜¯: ç™½ç›’å’Œé»‘ç›’ã€‚ç™½ç›’æ”»å‡»å‡è®¾æ”»å‡»è€…å¯¹æ¨¡å‹æœ‰å®Œæ•´çš„çŸ¥è¯†å’Œè®¿é—®æƒé™ï¼ŒåŒ…æ‹¬ä½“ç³»ç»“æ„ã€è¾“å…¥ã€è¾“å‡ºå’Œæƒé‡ã€‚é»‘ç›’æ”»å‡»å‡è®¾æ”»å‡»è€…åªèƒ½è®¿é—®æ¨¡å‹çš„è¾“å…¥å’Œè¾“å‡ºï¼Œå¹¶ä¸”å¯¹åº•å±‚æ¶æ„æˆ–æƒé‡ä¸€æ— æ‰€çŸ¥ã€‚è¿˜æœ‰å‡ ç§ç±»å‹çš„ç›®æ ‡ï¼ŒåŒ…æ‹¬é”™è¯¯åˆ†ç±»å’Œæº&#x2F;ç›®æ ‡é”™è¯¯åˆ†ç±»ã€‚é”™è¯¯åˆ†ç±»çš„ç›®æ ‡æ„å‘³ç€å¯¹æ‰‹åªå¸Œæœ›è¾“å‡ºåˆ†ç±»æ˜¯é”™è¯¯çš„ï¼Œè€Œä¸å…³å¿ƒæ–°çš„åˆ†ç±»æ˜¯ä»€ä¹ˆã€‚æº&#x2F;ç›®æ ‡é”™è¯¯åˆ†ç±»æ„å‘³ç€å¯¹æ‰‹æƒ³è¦æ›´æ”¹åŸæ¥å±äºç‰¹å®šæºç±»çš„å›¾åƒï¼Œä»¥ä¾¿å°†å…¶å½’ç±»ä¸ºç‰¹å®šç›®æ ‡ç±»ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒFGSM æ”»å‡»æ˜¯ä»¥é”™è¯¯åˆ†ç±»ä¸ºç›®æ ‡çš„ç™½ç›’æ”»å‡»ã€‚æœ‰äº†è¿™äº›èƒŒæ™¯ä¿¡æ¯ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥è¯¦ç»†è®¨è®ºè¿™æ¬¡æ”»å‡»äº†ã€‚ å¿«é€Ÿæ¢¯åº¦ åŸç†ç®€è¿°å¿«é€Ÿæ¢¯åº¦ç¬¦å·æ”»å‡»ï¼ˆFGSAï¼‰ï¼Œæ˜¯é€šè¿‡åŸºäºç›¸åŒçš„åå‘ä¼ æ’­æ¢¯åº¦æ¥è°ƒæ•´è¾“å…¥æ•°æ®ä½¿æŸå¤±æœ€å¤§åŒ–ï¼Œç®€è¨€ä¹‹ï¼Œå…±è®¡ä½¿ç”¨äº†ä¸¢å¤±çš„æ¢¯åº¦å€¼w.r.tè¾“å…¥æ•°æ®ï¼Œç„¶åè°ƒæ•´è¾“å…¥ä½¿æ•°æ®ä¸¢å¤±æœ€å¤§åŒ–ã€‚ä¸‹å›¾æ˜¯å®ç°çš„ä¾‹å­ï¼š å¯ä»¥çœ‹å‡ºxæ˜¯æ­£å¸¸â€œç†ŠçŒ«â€çš„åŸå§‹è¾“å…¥å›¾åƒï¼Œyæ˜¯çœŸå®çš„å›¾ç‰‡è¾“å…¥ï¼Œ Î¸è¡¨ç¤ºæ¨¡å‹å‚æ•°ï¼ŒJ(Î¸,x,y)æ˜¯æŸå¤±å‡½æ•°ï¼Œâˆ‡xâ€‹J(Î¸,x,y)æ˜¯æ”»å‡»å°†æ¢¯åº¦åå‘ä¼ æ’­å›è¦è®¡ç®—çš„è¾“å…¥æ•°æ®ã€‚ç„¶åï¼Œå®ƒé€šè¿‡ä¸€ä¸ªå°æ­¥éª¤è°ƒæ•´è¾“å…¥æ•°æ®ï¼Œå¦‚0.007å€çš„sign(âˆ‡xâ€‹J(Î¸,x,y))æ·»åŠ åˆ°é‡Œé¢ä¼šæœ€å¤§åŒ–æŸå¤±å‡½æ•°ã€‚ç„¶åå¾—åˆ°æ‰°åŠ¨å›¾åƒxâ€™ï¼Œç„¶åè¢«ç›®æ ‡ç½‘ç»œé”™è¯¯åœ°å½’ç±»ä¸ºâ€œé•¿è‡‚çŒ¿â€ï¼Œè€Œå®ƒæ˜¾ç„¶ä»ç„¶æ˜¯ä¸€åªâ€œç†ŠçŒ«â€ã€‚ b) å®ç°è¿‡ç¨‹1.è¾“å…¥åªæœ‰ä¸‰ä¸ªè¾“å…¥ Epsilons-è¿è¡Œæ—¶ä½¿ç”¨çš„ epsilon å€¼åˆ—è¡¨ã€‚åœ¨åˆ—è¡¨ä¸­ä¿ç•™0å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒè¡¨ç¤ºåŸå§‹æµ‹è¯•é›†ä¸Šçš„æ¨¡å‹æ€§èƒ½ã€‚æ­¤å¤–ï¼Œç›´è§‚åœ°ï¼Œæˆ‘ä»¬æœŸæœ›æ›´å¤§çš„ Îµï¼Œæ›´æ˜æ˜¾çš„æ‰°åŠ¨ï¼Œä½†æ›´æœ‰æ•ˆçš„æ”»å‡»æ–¹é¢çš„é€€åŒ–æ¨¡å‹çš„å‡†ç¡®æ€§ã€‚å› ä¸ºè¿™é‡Œçš„æ•°æ®èŒƒå›´æ˜¯ [ 0 , 1 ] [0,1] ï¼ŒÎµ å€¼ä¸åº”è¶…è¿‡1ã€‚ Pretrain _ model-pathåŠ è½½é¢„è®­ç»ƒçš„æ¨¡å‹ Use _ CUDA-boolean æ ‡å¿—æ¥ä½¿ç”¨ CUDAï¼Œå¦‚æœéœ€è¦çš„è¯ã€‚ 123epsilons = [0, .05, .1, .15, .2, .25, .3]pretrained_model = &quot;mnist_cnn.pt&quot;use_cuda=True 2.æ¨¡å‹å»ºç«‹a)è®­ç»ƒæ¨¡å‹æˆ‘å€‘ç”¨äº†ä¸€å±¤ convolution layer å’Œ pooling layer ä¾†æ“·å– image çš„ featureï¼Œä¹‹å¾Œè¦æŠŠé€™äº› feature map æˆ 10 å€‹ node çš„ outputï¼ˆå› ç‚ºæœ‰ 10 å€‹ class è¦ predictï¼‰ï¼Œæ‰€ä»¥ç”¨ flatten æŠŠ feature é›†ä¸­æˆ vector å¾Œï¼Œå†ç”¨ fully-connected layer map åˆ° output layerã€‚b æ˜¯ batch sizeï¼Œä¸€æ¬¡ train å¹¾å¼µ imageã€‚ 12345678910111213141516class Net(nn.Module): def __init__(self): super(Net, self).__init__() self.conv = nn.Conv2d(1, 32, 3) self.dropout = nn.Dropout2d(0.25) self.fc = nn.Linear(5408, 10) def forward(self, x): x = self.conv(x) x = F.relu(x) x = F.max_pool2d(x, 2) x = self.dropout(x) x = torch.flatten(x, 1) x = self.fc(x) output = F.log_softmax(x, dim=1) return output b)è®­ç»ƒå‡½æ•°123456789101112131415161718192021222324def train(model, train_loader, optimizer, epochs, log_interval): model.train() for epoch in range(1, epochs + 1): for batch_idx, (data, target) in enumerate(train_loader): # Clear gradient optimizer.zero_grad() # Forward propagation output = model(data) # Negative log likelihood loss loss = F.nll_loss(output, target) # Back propagation loss.backward() # Parameter update optimizer.step() # Log training info if batch_idx % log_interval == 0: print(&#x27;Train Epoch: &#123;&#125; [&#123;&#125;/&#123;&#125; (&#123;:.0f&#125;%)]\\tLoss: &#123;:.6f&#125;&#x27;.format( epoch, batch_idx * len(data), len(train_loader.dataset), 100. * batch_idx / len(train_loader), loss.item())) c)è®­ç»ƒä¸­çš„æµ‹è¯•1234567891011121314151617181920def test(model, test_loader): model.eval() test_loss = 0 correct = 0 with torch.no_grad(): # disable gradient calculation for efficiency for data, target in test_loader: # Prediction output = model(data) # Compute loss &amp; accuracy test_loss += F.nll_loss(output, target, reduction=&#x27;sum&#x27;).item() pred = output.argmax(dim=1, keepdim=True) correct += pred.eq(target.view_as(pred)).sum().item() test_loss /= len(test_loader.dataset) # Log testing info print(&#x27;\\nTest set: Average loss: &#123;:.4f&#125;, Accuracy: &#123;&#125;/&#123;&#125; (&#123;:.0f&#125;%)\\n&#x27;.format( test_loss, correct, len(test_loader.dataset), 100. * correct / len(test_loader.dataset))) d)è®­ç»ƒçš„ä¸»å‡½æ•°ï¼ˆæŠŠæ¨¡å‹ä¿å­˜ï¼‰12345678910111213141516171819202122232425262728293031323334def main(): # Training settings BATCH_SIZE = 64 EPOCHS = 2 LOG_INTERVAL = 10 # Define image transform transform=transforms.Compose([ transforms.ToTensor(), transforms.Normalize((0.1307,), (0.3081,)) # mean and std for the MNIST training set ]) # Load dataset train_dataset = datasets.MNIST(&#x27;./data&#x27;, train=True, download=True, transform=transform) test_dataset = datasets.MNIST(&#x27;./data&#x27;, train=False, transform=transform) train_loader = torch.utils.data.DataLoader(train_dataset, batch_size=BATCH_SIZE) test_loader = torch.utils.data.DataLoader(test_dataset, batch_size=BATCH_SIZE) # Create network &amp; optimizer model = Net() optimizer = optim.Adam(model.parameters()) # Train train(model, train_loader, optimizer, EPOCHS, LOG_INTERVAL) # Save and load model torch.save(model.state_dict(), &quot;mnist_cnn.pt&quot;) model = Net() model.load_state_dict(torch.load(&quot;mnist_cnn.pt&quot;)) # Test test(model, test_loader) è®­ç»ƒå‚æ•°å‚¨å­˜ e)è®­ç»ƒç»“æœ 3.FGSMæ”»å‡»a)æ¨¡å‹åŠ è½½åŠ è½½æ¨¡å‹ 1234567891011121314151617181920# MNIST Test dataset and dataloader declarationtransform = transforms.Compose([ transforms.ToTensor(), ])train_dataset = datasets.MNIST(&#x27;./data&#x27;, train=True, download=True, transform=transform)test_loader = torch.utils.data.DataLoader(train_dataset,batch_size=1, shuffle=True)# Define what device we are usingprint(&quot;CUDA Available: &quot;,torch.cuda.is_available())device = torch.device(&quot;cuda&quot; if (use_cuda and torch.cuda.is_available()) else &quot;cpu&quot;)# Initialize the networkmodel = Net().to(device)# Load the pretrained modelmodel.load_state_dict(torch.load(&quot;mnist_cnn.pt&quot;, map_location=&#x27;cpu&#x27;))# Set the model in evaluation mode. In this case this is for the Dropout layersmodel.eval() b)æ”»å‡»å‡½æ•°åˆ›å»ºç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰°åŠ¨åŸå§‹è¾“å…¥æ¥å®šä¹‰åˆ›å»ºå¯¹æŠ—æ€§ç¤ºä¾‹çš„å‡½æ•°ã€‚Fgsm æ”»å‡»å‡½æ•°æœ‰ä¸‰ä¸ªè¾“å…¥ï¼Œå›¾åƒæ˜¯åŸå§‹æ¸…æ™°å›¾åƒ(xx) ï¼ŒÎµ æ˜¯åƒç´ çº§æ‰°åŠ¨é‡(ÎµÎµ) ï¼Œdata _ grad æ˜¯æŸå¤±çš„æ¢¯åº¦ï¼Œè¾“å…¥å›¾åƒ(âˆ‡xJ(Î¸,x,y))ã€‚ç„¶åï¼Œè¯¥å‡½æ•°åˆ›å»ºæ‰°åŠ¨å›¾åƒ$$perturbed_image&#x3D;image+epsilonâˆ—sign(data_grad)&#x3D;x+Ïµâˆ—sign(âˆ‡xâ€‹ J(Î¸,x,y))$$ 12345678910# FGSM attack codedef fgsm_attack(image, epsilon, data_grad): # Collect the element-wise sign of the data gradient sign_data_grad = data_grad.sign() # Create the perturbed image by adjusting each pixel of the input image perturbed_image = image + epsilon*sign_data_grad # Adding clipping to maintain [0,1] range perturbed_image = torch.clamp(perturbed_image, 0, 1) # Return the perturbed image return perturbed_image c)å¼€å§‹æ”»å‡»12345678accuracies = []examples = []# Run test for each epsilonfor eps in epsilons: acc, ex = test(model, device, test_loader, eps) accuracies.append(acc) examples.append(ex) d) å®éªŒç»“æœæˆªå›¾ç¬¬ä¸€ä¸ªç»“æœæ˜¯ç²¾åº¦å¯¹ Îµ å›¾ã€‚æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œéšç€ Îµ çš„å¢åŠ ï¼Œæˆ‘ä»¬é¢„è®¡æµ‹è¯•çš„å‡†ç¡®æ€§ä¼šé™ä½ã€‚è¿™æ˜¯å› ä¸ºæ›´å¤§çš„ Îµ æ„å‘³ç€æˆ‘ä»¬åœ¨å°†æŸå¤±æœ€å¤§åŒ–çš„æ–¹å‘ä¸Šè¿ˆå‡ºäº†æ›´å¤§çš„ä¸€æ­¥ã€‚æ³¨æ„æ›²çº¿ä¸­çš„è¶‹åŠ¿ä¸æ˜¯çº¿æ€§çš„ï¼Œå³ä½¿ Îµ å€¼æ˜¯çº¿æ€§é—´éš”çš„ã€‚ä¾‹å¦‚ï¼ŒÎµ &#x3D; 0.05 Îµ &#x3D; 0.05çš„å‡†ç¡®æ€§ä»…æ¯” Îµ &#x3D; 0Îµ &#x3D; 0ä½çº¦4% ï¼Œä½†æ˜¯ Îµ &#x3D; 0.2 Îµ &#x3D; 0.2çš„å‡†ç¡®æ€§æ¯” Îµ &#x3D; 0.15 Îµ &#x3D; 0.15ä½25% ã€‚å¦å¤–ï¼Œè¯·æ³¨æ„æ¨¡å‹çš„ç²¾åº¦åœ¨ Îµ &#x3D; 0.25 Îµ &#x3D; 0.25å’Œ Îµ &#x3D; 0.3 Îµ &#x3D; 0.3ä¹‹é—´çš„éšæœºç²¾åº¦ã€‚ æ‰“å°ä¸Šè¿°æ•°æ® 12345678910111213141516# Plot several examples of adversarial samples at each epsilon cnt = 0 plt.figure(figsize=(8,10)) for i in range(len(epsilons)): for j in range(len(examples[i])): cnt += 1 plt.subplot(len(epsilons),len(examples[0]),cnt) plt.xticks([], []) plt.yticks([], []) if j == 0: plt.ylabel(&quot;Eps: &#123;&#125;&quot;.format(epsilons[i]), fontsize=14) orig,adv,ex = examples[i][j] plt.title(&quot;&#123;&#125; -&gt; &#123;&#125;&quot;.format(orig, adv)) plt.imshow(ex, cmap=&quot;gray&quot;) plt.tight_layout() plt.show() æ‰“å°å‡ ä¸ªä»£è¡¨æ€§çš„ä¾‹å­ ä¸‰ã€å®éªŒç»“æœåˆ†æåˆ†æä»ç»“æœæ¥çœ‹ï¼Œéšç€ Îµ çš„å¢åŠ ï¼Œæµ‹è¯•ç²¾åº¦ä¸‹é™ï¼Œä½†æ‰°åŠ¨å˜å¾—æ›´å®¹æ˜“å¯Ÿè§‰ã€‚å®é™…ä¸Šï¼Œåœ¨æ”»å‡»è€…å¿…é¡»è€ƒè™‘çš„ç²¾ç¡®åº¦ä¸‹é™å’Œå¯æ„ŸçŸ¥æ€§ä¹‹é—´å­˜åœ¨æƒè¡¡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å±•ç¤ºäº†ä¸€äº›æˆåŠŸçš„å¯¹æŠ—ä¾‹å­åœ¨æ¯ä¸ª Îµ å€¼ã€‚å›¾çš„æ¯ä¸€è¡Œæ˜¾ç¤ºä¸åŒçš„ Îµ å€¼ã€‚ç¬¬ä¸€è¡Œæ˜¯ Îµ &#x3D; 0 Îµ &#x3D; 0çš„ä¾‹å­ï¼Œå®ƒè¡¨ç¤ºåŸå§‹çš„â€œå¹²å‡€â€å›¾åƒï¼Œæ²¡æœ‰æ‰°åŠ¨ã€‚æ¯å¼ å›¾ç‰‡çš„æ ‡é¢˜éƒ½æ˜¾ç¤ºäº†â€œåŸå§‹åˆ†ç±»-&gt; æ•Œå¯¹åˆ†ç±»â€æ³¨æ„ï¼Œå½“ Îµ &#x3D; 0.15 Îµ &#x3D; 0.15æ—¶ï¼Œæ‰°åŠ¨å¼€å§‹å˜å¾—æ˜æ˜¾ï¼Œå½“ Îµ &#x3D; 0.3 Îµ &#x3D; 0.3æ—¶ï¼Œæ‰°åŠ¨éå¸¸æ˜æ˜¾ã€‚ç„¶è€Œï¼Œåœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œäººä»¬ä»ç„¶èƒ½å¤Ÿè¯†åˆ«æ­£ç¡®çš„ç±»åˆ«ï¼Œå°½ç®¡å¢åŠ äº†å™ªéŸ³ã€‚","categories":[{"name":"å­¦æ ¡ä½œä¸š","slug":"å­¦æ ¡ä½œä¸š","permalink":"https://snowman12137.github.io/categories/%E5%AD%A6%E6%A0%A1%E4%BD%9C%E4%B8%9A/"}],"tags":[{"name":"å­¦æ ¡ä½œä¸š","slug":"å­¦æ ¡ä½œä¸š","permalink":"https://snowman12137.github.io/tags/%E5%AD%A6%E6%A0%A1%E4%BD%9C%E4%B8%9A/"}]}],"categories":[{"name":"MAGsäº‘åˆ†æ","slug":"MAGsäº‘åˆ†æ","permalink":"https://snowman12137.github.io/categories/MAGs%E4%BA%91%E5%88%86%E6%9E%90/"},{"name":"ç”Ÿç‰©è®¡ç®—æœºç§‘å­¦","slug":"MAGsäº‘åˆ†æ/ç”Ÿç‰©è®¡ç®—æœºç§‘å­¦","permalink":"https://snowman12137.github.io/categories/MAGs%E4%BA%91%E5%88%86%E6%9E%90/%E7%94%9F%E7%89%A9%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/"},{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://snowman12137.github.io/categories/%E5%85%B6%E4%BB%96/"},{"name":"å‰ç«¯å­¦ä¹ ","slug":"å‰ç«¯å­¦ä¹ ","permalink":"https://snowman12137.github.io/categories/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/"},{"name":"Electron-Vue-WebRTCå®¢æˆ·ç«¯å­¦ä¹ ","slug":"Electron-Vue-WebRTCå®¢æˆ·ç«¯å­¦ä¹ ","permalink":"https://snowman12137.github.io/categories/Electron-Vue-WebRTC%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AD%A6%E4%B9%A0/"},{"name":"CTFç½‘ç»œæ”»é˜²","slug":"CTFç½‘ç»œæ”»é˜²","permalink":"https://snowman12137.github.io/categories/CTF%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/"},{"name":"SGX","slug":"SGX","permalink":"https://snowman12137.github.io/categories/SGX/"},{"name":"CTFå…¥é—¨","slug":"CTFå…¥é—¨","permalink":"https://snowman12137.github.io/categories/CTF%E5%85%A5%E9%97%A8/"},{"name":"å­¦æ ¡ä½œä¸š","slug":"å­¦æ ¡ä½œä¸š","permalink":"https://snowman12137.github.io/categories/%E5%AD%A6%E6%A0%A1%E4%BD%9C%E4%B8%9A/"}],"tags":[{"name":"metaGEM","slug":"metaGEM","permalink":"https://snowman12137.github.io/tags/metaGEM/"},{"name":"åšå®¢é—®é¢˜","slug":"åšå®¢é—®é¢˜","permalink":"https://snowman12137.github.io/tags/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98/"},{"name":"å‰ç«¯å­¦ä¹ ,VUE","slug":"å‰ç«¯å­¦ä¹ -VUE","permalink":"https://snowman12137.github.io/tags/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0-VUE/"},{"name":"Nodejså­¦ä¹ ","slug":"Nodejså­¦ä¹ ","permalink":"https://snowman12137.github.io/tags/Nodejs%E5%AD%A6%E4%B9%A0/"},{"name":"CTFç½‘ç»œæ”»é˜²","slug":"CTFç½‘ç»œæ”»é˜²","permalink":"https://snowman12137.github.io/tags/CTF%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/"},{"name":"SGX","slug":"SGX","permalink":"https://snowman12137.github.io/tags/SGX/"},{"name":"Linux","slug":"Linux","permalink":"https://snowman12137.github.io/tags/Linux/"},{"name":"ç°ä»£å¯†ç å­¦","slug":"ç°ä»£å¯†ç å­¦","permalink":"https://snowman12137.github.io/tags/%E7%8E%B0%E4%BB%A3%E5%AF%86%E7%A0%81%E5%AD%A6/"},{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"https://snowman12137.github.io/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"},{"name":"å­¦æ ¡ä½œä¸š","slug":"å­¦æ ¡ä½œä¸š","permalink":"https://snowman12137.github.io/tags/%E5%AD%A6%E6%A0%A1%E4%BD%9C%E4%B8%9A/"}]}